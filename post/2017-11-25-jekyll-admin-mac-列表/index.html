<!DOCTYPE html>
<html>
  <head>
      
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- ç™¾åº¦éªŒè¯ -->
<meta name="baidu-site-verification" content="1IkquSGR9Z"/>

<title>å›èµåšå®¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡"/>
<meta name="keywords" content="2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://joserccblog.github.io/favicon.ico">

<link rel="stylesheet" href="https://joserccblog.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://joserccblog.github.io/media/scripts/_vendors/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->

    

    
        <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css" />
    


<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>

<link crossorigin="anonymous" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" href="https://lib.baomitu.com/font-awesome/5.8.1/css/all.min.css" rel="stylesheet">

  </head>
  <body>
  
<div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://joserccblog.github.io/media/images/avatar.png" alt="å›èµåšå®¢" class="img-responsive">
        </figure>
        <h3 class="heading">ABOUT ME</h3>
        <h2>å›èµåšå®¢</h2>
        <p>2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">
        <div class="fh5co-box">
            <h3 class="heading">æœç´¢</h3>
            <form action="#">
                <div class="form-group">
                    <input type="text" id="bdcsMain" class="form-control" placeholder="è¾“å…¥å…³é”®å­—">
<!--                    <button type="submit" class="btn btn-sm btn-warning" style="margin-top: 6px; width: 100%">ç‚¹å‡»æœç´¢</button>-->
                </div>
            </form>
        </div>
        <div class="fh5co-box">
            <h3 class="heading">æ ‡ç­¾</h3>
            <ul>
                
                    <li><a href="https://joserccblog.github.io/tag/ilTRbUeIh">OCUI</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/qFaqD3-EnQ">é“¾å¼è¯­æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/swift">Swift</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ios">iOS</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/framework">Framework</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/carthage">Carthage</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/cocoapods">Cocoapods</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/masonry">Masonry</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/yue-shu-chong-tu">çº¦æŸå†²çª</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uistackview">UIStackView</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ios11">iOS11</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/sheng-huo">ç”Ÿæ´»</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zhi-shi-dian">çŸ¥è¯†ç‚¹</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/testflight">TestFlight</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/guo-ji-hua">å›½é™…åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xcode9">Xcode9</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zi-dong-hua">è‡ªåŠ¨åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/hei-mo-fa">é»‘é­”æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ota">OTA</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xctest">XCTest</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/appstore">AppStore</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/mac">Mac</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/gan-xiang">æ„Ÿæƒ³</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xcode">Xcode</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/svn">SVN</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xiang-fa">æƒ³æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/di-san-fang-ku">ç¬¬ä¸‰æ–¹åº“</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/mo-kuai-hua">æ¨¡å—åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/c">C</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/autolayout">AutoLayout</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xib">Xib</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/clang-format">Clang Format</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/objetive-c">Objetive-C</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zhou-bao">å‘¨æŠ¥</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/jekyll">Jekyll</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/server">Server</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uibarbuttonitem">UIBarButtonItem</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uitextfiled">UITextFiled</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                         >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                         >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                         >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                         >
                            å…³äº
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/contact/"
                         >
                            è”ç³»ä½œè€…
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://joserccblog.github.io">å›èµåšå®¢ </a>
                </h1>
            </div>
        </div>
    </div>
</header>


<!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
<!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

  <div class="container-fluid">
      <div class="row fh5co-post-entry single-entry">
          <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
              <figure class="animate-box">
                  
                      <img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-18.png" alt="Jekyll-Admin-Mac-åˆ—è¡¨" class="img-responsive">
                  
              </figure>
              <span class="fh5co-meta animate-box">
                  
                      <div class="tag-container">
                          
                              <a href="https://joserccblog.github.io/tag/swift" class="tag">Swift, </a>
                          
                              <a href="https://joserccblog.github.io/tag/mac" class="tag">Mac, </a>
                          
                              <a href="https://joserccblog.github.io/tag/jekyll" class="tag">Jekyll, </a>
                          
                      </div>
                  
              </span>
              <h2 class="fh5co-article-title animate-box">Jekyll-Admin-Mac-åˆ—è¡¨</h2>
              <span class="fh5co-meta fh5co-date animate-box">2017-11-25</span>

              <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                  <div class="row">
                      <div class="col-md-12 animate-box post-content">
                          <p> <p>[TOC]</p>
<h3 id="å…³äº-nstableviewçš„ä½¿ç”¨">å…³äº <code>NSTableView</code>çš„ä½¿ç”¨</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°±æ˜¯åšå‡ºè¿™ä¸ªåˆ—è¡¨æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>NSTableView</code>æ¥åšå‡ºè¿™ä¸ªæ•ˆæœã€‚</p>
<p>æˆ‘ä»¬æ‹–æ‹½ä¸€ä¸ª <code>NSTableView</code>æ”¾åœ¨ <code>BaseListView.xib</code>çš„è¯•å›¾ä¸Šé¢ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-47806461019232f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DFDA8143-EEE0-43A3-A863-CFCDDCF41B14"></p>
<p>è®¾ç½®å¸ƒå±€å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-b73a551be372c558.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="C99F8039-E33D-47D0-98EA-459D0AF3E336"></p>
<h3 id="è§£å†³-nstableviewçš„-headeråœ¨-xibæ— æ³•æ­£å¸¸æ˜¾ç¤º">è§£å†³ <code>NSTableView</code>çš„ <code>Header</code>åœ¨ <code>Xib</code>æ— æ³•æ­£å¸¸æ˜¾ç¤º</h3>
<p>æœ‰çš„æ—¶å€™æˆ‘ä»¬å‘ç° <code>NSTableView</code>åœ¨ <code>Xib</code>è¢«éšè—äº†ï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¾ç¤º <code>Header</code>çš„é€‰é¡¹æ˜¯å¼€å¯çš„ã€‚</p>
<blockquote>
<p>æˆ‘ä»¬åªè¦é‡æ–°å‹¾é€‰ <code>Hader</code>é€‰é¡¹å³å¯æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-b7fe64c78732c57c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2A43EA90-E3FB-400F-A286-11F990C01A24"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥æˆ‘ä»¬çš„åˆ—è¡¨åˆ†ä¸ºä¸‰éƒ¨åˆ† <code>æ ‡é¢˜</code> <code>æ—¶é—´</code> <code>æ“ä½œ</code>ï¼Œæˆ‘ä»¬å°±è®¾ç½® <code>NSTableView</code>æœ‰ <code>3</code>ä¸ª <code>Column</code>ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-9c233a0224b77a52.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="6E7EFC46-9753-4F4A-B497-1CE2C5FCBCD2"></p>
<p>å› ä¸ºåå­—çš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œæˆ‘ä»¬å°±è®¾ç½® <code>NSTableView</code>çš„ç¬¬ä¸€ä¸ª <code>Column</code>çš„å®½åº¦éšç€ <code>NSTableView</code>çš„å®½åº¦å˜åŒ–ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-748ce37cdd25774c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="69975981-2F29-4E1B-BCD8-165C1D033148"></p>
<p>æˆ‘ä»¬è®¾ç½®å…¶ä½™çš„ <code>Column</code>çš„å®½åº¦å›ºå®šä¸º <code>100</code>ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-b12e4b5d92163932.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FE8BFBD3-51D7-42C9-92F1-749290356794"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-be8a3de538a67af3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1804A265-0CAF-40DE-8F1B-7711A4F3E340"></p>
<p>æˆ‘ä»¬çš„åŸºæœ¬ç»“æ„å·²ç»å‡ºç°äº†ï¼Œç°åœ¨æˆ‘ä»¬è¦è®¾ç½® <code>Header</code>çš„èƒŒæ™¯é¢œè‰²ä¸ºé»‘è‰²ã€‚</p>
<p>æˆ‘ä»¬å…³è”ä¸€ä¸‹ <code>Xib</code>ä¸Šé¢çš„ <code>NSTableView</code>æ§ä»¶ã€‚</p>
<h3 id="è®¾ç½®-nstableviewçš„-headerèƒŒæ™¯é¢œè‰²">è®¾ç½® <code>NSTableView</code>çš„ <code>Header</code>èƒŒæ™¯é¢œè‰²ã€‚</h3>
<p>å‚è€ƒèµ„æ–™:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/32666795/how-do-i-override-layout-of-nstableheaderview">How do I override layout of NSTableHeaderView?</a></li>
</ul>
<blockquote>
<p>â›”ï¸è¿™é‡Œé‡åˆ°äº†ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œå¦‚æœä½¿ç”¨ <code>NSTableHeaderView</code>çš„å­ç±»ï¼Œåœ¨ <code>Draw</code>ç»˜åˆ¶è™½ç„¶é¢œè‰²æ˜¯è®¾ç½®äº†ï¼Œä½†æ˜¯æ ‡é¢˜å·²ç»è¢«è¦†ç›–æ‰äº†ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•è¿›è¡Œè®¾ç½®çš„è¯</p>
<pre><code class="language-swift">public func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -&gt; NSView? {
    if let headerCell = tableColumn?.headerCell {
        headerCell.drawsBackground = true
        headerCell.backgroundColor = NSColor.black
    }
    return nil
}
</code></pre>
<p>å¦‚æœæ•°æ®æºä¸º0å°±æ— æ³•è®¾ç½®,å¹¶ä¸”è¿˜æœ‰ä¸‹é¢çš„é—®é¢˜ã€‚</p>
<p>å¦‚æœå°±ç®—æœ‰æ•°æ®ä¹Ÿæ˜¯è¿™æ ·çš„çŠ¶æ€ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-31a4273656aa518b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="76FE2C1F-AA2D-4335-AB34-B0236959D216"></p>
<p>ä¸­é—´æœ‰é—´éš™å¹¶æ²¡æœ‰å®Œå…¨çš„é»‘æ‰ã€‚</p>
<p>æˆ‘ä»¬æš‚æ—¶æ²¡æœ‰æ‰¾åˆ°åˆé€‚è®¾ç½®èƒŒæ™¯é¢œè‰²çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬æš‚æ—¶ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ã€‚</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-77d3f399abc92708.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1F191849-C907-46C8-B64C-E96BB867D78F"></p>
<p>å±•ç¤ºåˆ—è¡¨åˆ†ä¸ºä¸‰ç§æ ·å¼ã€‚</p>
<ul>
<li>ç¬¬ä¸€ç§æ˜¯å›¾æ ‡åŠ ä¸Šæ–‡å­—å¹¶ä¸”æ˜¯å¯ä»¥ç‚¹å‡»çš„</li>
<li>ç¬¬äºŒç§æ˜¯æ–‡å­—åªåšå±•ç¤º</li>
<li>ç¬¬ä¸‰ç§æ˜¯ä¸¤ä¸ªæŒ‰é’®</li>
</ul>
<p>æˆ‘ä»¬è®¾ç½® <code>NSTableView</code>çš„ <code>Cell</code>çš„é«˜åº¦ä¸º <code>83</code>ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±» <code>IconTitleTableCellView</code>ç»§æ‰¿ä¸ <code>NSTableCellView</code>ã€‚æˆ‘ä»¬åœ¨ <code>IconTitleTableCellView.xib</code>ä¸Šé¢æ‹–æ‹½ä¸€ä¸ª <code>NSView</code>ç»§æ‰¿äº <code>SideMenuItemView</code>ã€‚</p>
<p>å¸ƒå±€å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-d1b1f247b19a7592.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="E0C1A309-B229-41B0-990B-E4ECED5D0988"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-9fbfcb996deb0c7e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="9E630761-F95A-4122-BBA0-6196F851AEA1"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-69e02605f892a1f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FC3C5113-C10B-42FD-8554-AF842A147602"></p>
<p>æˆ‘ä»¬å…ˆæš‚æ—¶è®¾ç½®å®½åº¦ä¸º <code>100</code>ï¼Œå› ä¸ºæ ‡é¢˜ä¸çŸ¥é“é•¿åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åŠ¨æ€æ”¹å˜é•¿åº¦ã€‚</p>
<p>ä¸ºäº†è®¾ç½®é»˜è®¤çš„å­—ä½“é¢œè‰²ï¼Œæˆ‘ä»¬è®¾ç½®<code>normalColor</code>ä¸º <code>var</code>çš„å˜é‡ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-c01f79b2a1641bda.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="30CFC0BB-A3E7-4599-A0D5-02F9B82C36BF"></p>
<h3 id="nsviewå¦‚ä½•-sizethatfits"><code>NSView</code>å¦‚ä½• <code>sizeThatFits:</code></h3>
<p>ä¸ºäº†è®©æ ‡é¢˜æ˜¾ç¤ºå®Œå…¨ï¼Œæˆ‘ä»¬ç»‘å®šä¸€ä¸‹è®¾å®šå®½åº¦çš„çº¦æŸã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var itemViewWidthConstraint: NSLayoutConstraint!
</code></pre>
<p>æˆ‘ä»¬å‘ç° <code>sizeThatFits</code>å¹¶ä¸æ˜¯ <code>NSView</code>åªæœ‰ <code>NSControl</code>æˆ–è€…å­ç±»æ‰å¯ä»¥ä½¿ç”¨ã€‚ä½†æ˜¯å¯¹äºæˆ‘ä»¬çš„éœ€æ±‚å·²ç»å¤Ÿäº†ã€‚</p>
<p>æˆ‘ä»¬ç»™ <code>SideMenuItemView</code>å†™ä¸€ä¸ª <code>sizeThatFits</code>æ–¹æ³•ã€‚</p>
<pre><code class="language-swift">func sizeThatFits(_ size: NSSize) -&gt; NSSize {
    let labelSize = self.itemTitle.sizeThatFits(size)
    let sizeWidth = size.height + 10 + labelSize.width + 10
    return NSSize(width: sizeWidth, height: size.height)
}
</code></pre>
<p>æˆ‘ä»¬é€šè¿‡è®¡ç®—å‡º <code>SideMenuItemView</code>çš„å®½åº¦ã€‚</p>
<pre><code class="language-swift">func configurationView() {
    let configuration = SideMenuItemConfiguration(title: &quot;è¿™æ˜¯æµ‹è¯•æ ‡é¢˜&quot;, iconHex: &quot;F0F6&quot;, hidden: true, selected: false, normalColor: NSColor(red:0.267, green:0.267, blue:0.267, alpha:1.000))
    self.itemView.menuItemConfiguration = configuration
    let size = self.itemView.sizeThatFits(NSSize(width: Int.max, height: 20))
    self.itemViewWidthConstraint.constant = CGFloat(size.width)
}
</code></pre>
<p>æ­¤æ—¶æˆ‘ä»¬å·²ç»æ­£å¸¸å¯ä»¥æ˜¾ç¤ºæ ‡é¢˜äº†ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-5caaa36468c861f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="F1BB28D0-A970-4CC5-BCDA-FD302A0A1E21"></p>
<h3 id="å†æ¬¡æ¿€æ´»-app">å†æ¬¡æ¿€æ´» <code>App</code></h3>
<p>æˆ‘ä»¬ç°åœ¨çš„ <code>App</code>è¿è¡Œï¼Œå‡è®¾ä¸€ä¸ªåº”ç”¨é®æŒ¡ç€æˆ‘ä»¬çš„åº”ç”¨ï¼Œæˆ‘ä»¬ç‚¹å‡» <code>App</code>å›¾æ ‡æ˜¯æ— æ³•å†æ¬¡æ˜¾ç¤ºå‡ºæ¥ <code>App</code>é¢æ¿çš„ã€‚</p>
<pre><code class="language-swift">class AppDelegate: NSObject, NSApplicationDelegate {
    
    func applicationShouldHandleReopen(_ sender: NSApplication, hasVisibleWindows flag: Bool) -&gt; Bool {
        for window in sender.windows {
            window.makeKeyAndOrderFront(self)
        }
        return true
    }

}
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-4118109a4a8859d7.gif?imageMogr2/auto-orient/strip" alt="13"></p>
<p>æ­¤æ—¶æˆ‘ä»¬å·²ç»å¯ä»¥å†æ¬¡ç‚¹å‡» <code>App</code>å›¾æ ‡è®©ç•Œé¢æ˜¾ç¤ºæœ€å‰é¢äº†ã€‚</p>
<p>æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ª <code>DateTableCellView</code>ç»§æ‰¿ä¸ <code>NSTableCellView</code>ã€‚</p>
<p>æˆ‘ä»¬æ‹–æ‹½ä¸€ä¸ª <code>Label</code>åˆ° <code>DateTableCellView.xib</code>å¸ƒå±€è®¾ç½®å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-67ff3cbddf4dd177.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="D82D8855-6B02-4B37-A27A-FB329FE29B4E"></p>
<p>æˆ‘ä»¬è®© <code>cloumn</code>ç¬¬äºŒä¸ªä½¿ç”¨ <code>DateTableCellView</code>ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±» <code>ActionTableCellView</code>ç»§æ‰¿äº <code>NSTableCellView</code>ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>ActionTableCellView.xib</code>ä¸Šé¢æ‹–æ‹½ä¸€ä¸ª <code>NSView</code>ç»§æ‰¿ä¸ <code>SideMenuItemView</code>ã€‚å¸ƒå±€è®¾ç½®å¦‚ä¸‹ï¼š</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-54ec52519cd0d675.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="8872C43C-B65D-42A2-A6F5-220CE643BECE"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-9f5dc4fdf8686102.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="22DC95EE-D8B2-405F-819A-5158E4D0E592"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-add129e8d451af9f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1CF68D9F-647B-4F5A-94F0-11794CEE3002"></p>
<p>æˆ‘ä»¬å†åœ¨å³è¾¹æ”¾ç½®ä¸€ä¸ªæŒ‰é’®ï¼Œå¸ƒå±€å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-c3e328b364e16f73.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="B2AE1F40-E784-4A65-AAE9-EAC2DA474681"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-e6948783918e0b09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="25950EC1-D246-42F1-844C-0D21B62A24A5"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-c8a40e42b343ea77.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="AF0179FB-FFBE-4C2F-9FAE-546C5C017044"></p>
<p>æˆ‘ä»¬ <code>Column</code>ç¬¬ä¸‰ä¸ªä¸º <code>ActionTableCellView</code>ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-30639b3e06ae68d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="676001A0-FB2F-4A91-9AD6-57B5120C0F9C"></p>
<p>æˆ‘ä»¬è®¾ç½®æŒ‰é’®çš„ <code>Cloumn</code>çš„å®½åº¦ä¸º <code>200</code>ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-d677e2f527af3efe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5353EFD4-E07D-4053-BADB-68D761AB8A43"></p>
<p>æ˜¾ç¤ºæ•ˆæœä¼¼ä¹è¿˜æ˜¯ä¸è¶³ï¼ŒåŸå› æ˜¯ 80çš„å®½åº¦ä¸è¶³ä»¥æ­£å¸¸çš„æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>è®¾ç½® <code>ActionTableCellView</code>ä¸­æŒ‰é’®çš„å®½åº¦éƒ½ä¸º <code>100</code>ã€‚</p>
<p>æˆ‘ä»¬ç»™ <code>DateTableCellView</code>è¿æ¥ <code>label</code>çš„å±æ€§ç”¨äºè®¾ç½®æ—¶é—´ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var dateLabel: NSTextField!
</code></pre>
<p>æˆ‘ä»¬åˆ†åˆ«ç»™ <code>ActionTableCellView</code>ä¸¤ä¸ªè‡ªå®šä¹‰æ§ä»¶è®¾ç½®åœ†è§’å’ŒèƒŒæ™¯é¢œè‰²ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var deleteItemView: SideMenuItemView!
@IBOutlet weak var lookItemView: SideMenuItemView!
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-cce11e37c8d746b1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="02DC506D-3B0A-49A7-BAF1-4AC5ED6137DC"></p>
<p>æˆ‘ä»¬çš„åˆ—è¡¨çš„æ ·å¼å·²ç»åŸºæœ¬ä¸Šæ­å»ºå®Œæ¯•äº†ã€‚</p>
<h3 id="è¯·æ±‚-jekyllçš„-postæ–‡ç« çš„åˆ—è¡¨">è¯·æ±‚ <code>Jekyll</code>çš„ <code>Post</code>æ–‡ç« çš„åˆ—è¡¨ã€‚</h3>
<p><a href="http://sbdoc.cn/share/share.html#594348153c82962eab2af2a3">è·å– Post æ–‡ç« åˆ—è¡¨è¯·æ±‚è¯¦æƒ…</a>ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª <code>GetPostListApi</code>ç±»ç”¨äºè·å–æ–‡ç« é¡µåˆ—è¡¨ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±» <code>PostDetail</code>ç”¨äºæ˜¾ç¤ºæ–‡ç« çš„ä¿¡æ¯è¯¦æƒ…ã€‚</p>
<pre><code class="language-swift">class PostDetail: Mappable {
  var path:String?
  var url:String?
  var id:String?
  var collection:String?
  var relativePath:String?
  var draft:Bool = false
  var categories:[String] = []
  var title:String?
  var date:String?
  var slug:String?
  var ext:String?
  var tags:[String] = []
  var layout:String?
  var httpURL:String?
  var apiURL:String?
  var name:String?
  required init?(map: Map) {

  }
  func mapping(map: Map) {
      path &lt;- map[&quot;path&quot;]
      url &lt;- map[&quot;url&quot;]
      id &lt;- map[&quot;id&quot;]
      collection &lt;- map[&quot;collection&quot;]
      relativePath &lt;- map[&quot;relative_path&quot;]
      draft &lt;- map[&quot;draft&quot;]
      categories &lt;- map[&quot;categories&quot;]
      title &lt;- map[&quot;title&quot;]
      date &lt;- map[&quot;date&quot;]
      slug &lt;- map[&quot;slug&quot;]
      ext &lt;- map[&quot;ext&quot;]
      tags &lt;- map[&quot;tags&quot;]
      layout &lt;- map[&quot;layout&quot;]
      httpURL &lt;- map[&quot;http_url&quot;]
      apiURL &lt;- map[&quot;api_url&quot;]
      name &lt;- map[&quot;name&quot;]
  }

}
</code></pre>
<p>æˆ‘æ²¡æœ‰æ‰¾åˆ° <a href="https://github.com/Hearst-DD/ObjectMapper/">ObjectMapper</a>ç›´æ¥è½¬æˆ æ¨¡å‹æ•°ç»„çš„ï¼Œåº”è¯¥éœ€è¦è‡ªå·±å•ç‹¬å°è£…æ·»åŠ æ•°ç»„é‡Œé¢ï¼Œä½†æ˜¯å´æ— æ„å‘ç°äº†è¿™ä¸ªã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-532f3c1725156800.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="30C53E57-9AE4-43C3-B8E3-E29F9349F8A9"></p>
<p>å®˜æ–¹å»ºè®®æˆ‘ä»¬ä½¿ç”¨ <code>AlamofireObjectMapper</code>è¿™ä¸ªåº“ï¼Œçœ‹äº†æ–‡æ¡£ç¡®å®æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å°±ç”¨è¿™ä¸ªåº“æ›¿æ¢æ‰ <code>Alamofire</code>å’Œ <code>ObjectMapper</code>ã€‚</p>
<pre><code class="language-swift">class GetPostListApi {
    func loadRequest(success:GetPostListApiSuccessCompletionHandle?, failure:GetPostListApiFailureCompletionHandle?) {
        let URL = &quot;http://localhost:4000/_api/collections/posts/entries&quot;
        Alamofire.request(URL).responseArray { (response:DataResponse&lt;[PostDetail]&gt;) in
            if let list = response.value {
                self.completionHandle(success: success, failure: nil, postList: list, error: nil)
            } else {
                self.completionHandle(success: nil, failure: failure, postList: nil, error: response.error)
            }
        }
    }
    
    func completionHandle(success:GetPostListApiSuccessCompletionHandle?, failure:GetPostListApiFailureCompletionHandle?, postList:[PostDetail]?, error:Error?) {
        if let success = success , let postList = postList {
            success(postList)
        } else if let failure = failure {
            failure(error)
        }
    }

}
</code></pre>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¼šå‘ç° <code>GetPostListApi</code>è¿™ä¸ªç±»å’Œ <code>GetConfigurationApi</code>æœ‰å¤ªå¤šçš„ç›¸ä¼¼ä»£ç ã€‚æˆ‘ä»¬ä¸å¦¨åˆ›å»ºä¸€ä¸ª <code>BaseRequestApi</code>çš„è¯·æ±‚å­ç±»å»æ‰ä¸€äº›å¤šä½™çš„ä»£ç ã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨è¯·æ±‚çš„åœ°å€æ˜¯åŸºäº <code>http://localhost:4000/_api/</code>è¿™ä¸ªåœ°å€ï¼Œå¤§éƒ¨åˆ†çš„ <code>Jekyll</code>æœ¬åœ°éƒ½æ˜¯ <code>4000</code>ç«¯å£ä¹Ÿå¯èƒ½æ˜¯å…¶ä»–çš„ã€‚</p>
<p>æˆ‘ä»¬å°±åœ¨ <code>BaseRequestApi</code>å®šä¹‰ä¸€ä¸ª <code>URL</code>çš„å˜é‡é»˜è®¤ä¸º <code>http://localhost:4000/_api/</code>ã€‚</p>
<p>ä¸ºäº†èƒ½å¤Ÿè¯·æ±‚åˆ°æ•°æ®ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‘èµ·è¯·æ±‚çš„æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬å‘èµ·è¯·æ±‚éœ€è¦å®Œæ•´çš„è¯·æ±‚åœ°å€æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–¹æ³•ä¼ é€’ <code>http://localhost:4000/_api/</code>çš„åç¼€ã€‚</p>
<pre><code class="language-swift">func URLPath() -&gt; String {
    return &quot;&quot;
}
</code></pre>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–¹æ³•ç”¨äºæ‹¼æ¥å®Œæ•´çš„è¯·æ±‚åœ°å€ã€‚</p>
<pre><code class="language-swift">func URLFullPath() -&gt; String {
    guard self.URLPath().characters.count &gt; 0 else {
        return self.URL
    }
    return &quot;\(self.URL)/\(self.URLPath())&quot;
}
</code></pre>
<p>å½“åç¼€æ˜¯ç©ºå­—ç¬¦ä¸²çš„æ—¶å€™æˆ‘ä»¬ä¸æ‹¼æ¥ã€‚</p>
<h3 id="å…³äºæ³›å‹å‚æ•°">å…³äºæ³›å‹å‚æ•°</h3>
<p>å¯¹äº <code>æ³›å‹å‚æ•°</code>åœ¨ <code>OC</code>å’Œ <code>Swift</code>ä¸€ç›´æ²¡æœ‰æ˜ç™½è¿‡æ¥ï¼Œä¹Ÿä¸€ç›´æŒæ¡ç²¾é«“ï¼Œåˆ°ç°åœ¨éƒ½ä¸ä¼šç”¨ã€‚</p>
<p>ç°åœ¨è¦å°è£…è¯·æ±‚ï¼Œå¯¹äºä»£ç†å›è°ƒåº”è¯¥éœ€è¦ç”¨ä¸Š <code>æ³›å‹å‚æ•°</code>,ç ”ç©¶ä¸€ä¸‹ã€‚</p>
<p>å‚è€ƒèµ„æ–™:</p>
<ul>
<li><a href="http://www.swift51.com/swift3.0/chapter3/08_Generic_Parameters_and_Arguments.html">æ³›å‹å‚æ•°ï¼ˆGeneric Parameters and Arguments)</a>ã€‚</li>
<li><a href="http://www.jianshu.com/p/935c6bdbab5e">swift3.0ï¼šassociatedtype</a>ã€‚</li>
</ul>
<p>æˆ‘ä»¬è·å–æ•°æ®ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯å¯¹è±¡ç±»å‹ï¼Œä¸€ç§æ˜¯æ•°ç»„å¯¹è±¡ç±»å‹ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªè¯·æ±‚åè®®ã€‚</p>
<pre><code class="language-swift">protocol BaseRequestProtocol {
    associatedtype R:BaseMappable
    func loadObjectRequest(success:BaseRequestResponseObjectCompletionHandle&lt;R&gt;, failure:BaseRequestFailureCompletionHandle)
    func loadArrayRequest(success:BaseRequestResponseArrayCompletionHandle&lt;R&gt;, failure:BaseRequestFailureCompletionHandle)
}
</code></pre>
<pre><code class="language-swift">typealias BaseRequestResponseObjectCompletionHandle&lt;T:BaseMappable&gt; = (_ model:T) -&gt; Void
typealias BaseRequestResponseArrayCompletionHandle&lt;T:BaseMappable&gt; = (_ models:[T]) -&gt; Void
typealias BaseRequestFailureCompletionHandle = (_ error:Error) -&gt; Void
</code></pre>
<p>æˆ‘ä»¬è®©è¯·æ±‚çš„åŸºç±» <code>BaseRequestApi</code>å®ç° <code>BaseRequestProtocol</code>çš„åè®®ã€‚</p>
<pre><code class="language-swift">class BaseRequestApi&lt;T:BaseMappable&gt;: BaseRequestProtocol
</code></pre>
<p>æˆ‘ä»¬å®ç°ä¸€ä¸‹ <code>BaseRequestProtocol</code>çš„æ–¹æ³•ã€‚</p>
<pre><code class="language-swift">func loadObjectRequest(success: @escaping (T) -&gt; Void, failure: @escaping (Error?) -&gt; Void) {
    Alamofire.request(self.URLFullPath()).responseObject { (response:DataResponse&lt;R&gt;) in
        guard let value = response.value else {
            failure(response.error)
        }
        success(value)
    }
}
</code></pre>
<p>æˆ‘ä»¬è¿”å›ç¡®ä¿è¿”å›çš„å¯¹è±¡å­˜åœ¨ï¼Œå½“ä¸å­˜åœ¨å°±è¿”å›é”™è¯¯ä¿¡æ¯ã€‚</p>
<pre><code class="language-swift">public var error: Error? { return result.error }
</code></pre>
<p>å› ä¸º <code>error</code>å¯èƒ½ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬å°±å›è°ƒ <code>BaseRequestFailureCompletionHandle</code>è®¾ç½®å¯é€‰å‹ã€‚</p>
<h3 id="å…³äº-escaping">å…³äº <code>@escaping</code></h3>
<p>æˆ‘ä»¬åœ¨ç½‘ç»œè¯·æ±‚å®Œæˆä¹‹åè¿›è¡Œå›è°ƒç¼–è¯‘å™¨ä¼šæç¤ºæˆ‘ä»¬åŠ ä¸Š <code>@escaping</code>ã€‚å…³äº <code>@escaping</code>æˆ‘ä»¬å¯ä»¥å‚è€ƒä¸‹é¢èµ„æ–™ã€‚</p>
<p>å‚è€ƒèµ„æ–™: <a href="http://www.jianshu.com/p/73bd0633ab00">swift3.0ä¸­@escaping å’Œ @noescape çš„å«ä¹‰</a>ã€‚</p>
<p>çœ‹è¿‡èµ„æ–™æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œç³»ç»Ÿé»˜è®¤æ˜¯ <code>@noescape</code>ã€‚åªè¦è¢« <code>@noescape</code>æ ‡è®°çš„ <code>é—­åŒ…</code>æˆ‘ä»¬éƒ½æ˜¯ä¸éœ€è¦å…³å¿ƒå†…å­˜ç®¡ç†çš„ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåœ¨æ–¹æ³•æ‰§è¡Œå®Œæ¯•æ‰æ‰§è¡Œ <code>é—­åŒ…</code>æˆ‘ä»¬å°±éœ€è¦ç”¨ <code>@escaping</code>æ ‡è¯†ï¼Œè¿™æ ·ç³»ç»Ÿè‡ªåŠ¨åœ¨è°ƒç”¨æ—¶å€™æç¤ºç”¨æˆ·å¯¹äºç›´æ¥ä½¿ç”¨ <code>self</code>è¿›è¡Œå†…å­˜ç®¡ç†ã€‚</p>
<pre><code class="language-swift">func loadArrayRequest(success: @escaping ([T]) -&gt; Void, failure: @escaping BaseRequestFailureCompletionHandle) {
    Alamofire.request(self.URLFullPath()).responseArray { (response:DataResponse&lt;[R]&gt;) in
        guard let value = response.value else {
            failure(response.error)
            return
        }
        success(value)
    }
}

func loadObjectRequest(success: @escaping (T) -&gt; Void, failure: @escaping (Error?) -&gt; Void) {
    Alamofire.request(self.URLFullPath()).responseObject { (response:DataResponse&lt;R&gt;) in
        guard let value = response.value else {
            failure(response.error)
            return
        }
        success(value)
    }
}
</code></pre>
<p>æˆ‘ä»¬ç°åœ¨çš„è¯·æ±‚åŸºç±»åŸºæœ¬ä¸Šå·²ç»å¯ä»¥æ­£å¸¸çš„è¿è¡Œäº†,æˆ‘ä»¬å·²ç»è¿«ä¸åŠå¾…çš„å‡†å¤‡å°è¯•ä¸€ä¸‹ã€‚</p>
<h3 id="ç²¾ç®€è¯·æ±‚å­ç±»">ç²¾ç®€è¯·æ±‚å­ç±»</h3>
<p>æˆ‘ä»¬è®¾ç½® <code>GetConfigurationApi</code>çˆ¶ç±»ä¸º <code>BaseRequestApi</code>ã€‚</p>
<pre><code class="language-swift">class GetConfigurationApi: BaseRequestApi&lt;JekyllConfiguration&gt; {
    override func URLPath() -&gt; String {
        return &quot;configuration&quot;
    }
}
</code></pre>
<p>æˆ‘ä»¬æ­¤æ—¶å­ç±»çš„ä»£ç å°±å˜æˆè¿™ä¹ˆçš„ç®€å•ã€‚ä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬é…ç½®çš„æ•°æ®åœ¨å­æ•°æ®é‡Œé¢ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>Path</code>è¿›è¡Œè·å–ï¼Œæˆ‘ä»¬å°±ä¸º <code>BaseRequestApi</code>è®¾ç½®ä¸€ä¸ªå±æ€§å¯ä»¥è®©å¤–æ¥è®¾ç½® <code>Path</code>ã€‚</p>
<pre><code class="language-swift">var responseKeyPath:String?
</code></pre>
<pre><code class="language-swift">class GetConfigurationApi: BaseRequestApi&lt;JekyllConfiguration&gt; {
    override func URLPath() -&gt; String {
        return &quot;configuration&quot;
    }
    
    var responseKeyPath: String? = &quot;content&quot;
}
</code></pre>
<p>æ­¤æ—¶æˆ‘ä»¬ä¼šå—åˆ°ç¼–è¯‘å™¨é€šçŸ¥æˆ‘ä»¬çš„é”™è¯¯ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-044ef315c3eed9e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="795C05DA-D33F-4B3E-96E1-7661DE196969"></p>
<h3 id="cannot-override-with-a-stored-property">cannot override with a stored property</h3>
<p>å‚è€ƒèµ„æ–™:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/37405351/how-can-i-override-this-swift-property">How can I override this Swift property?</a></li>
</ul>
<pre><code class="language-swift">override var responseKeyPath: String? {
    get {
        return &quot;content&quot;
    }
    set {
        self.responseKeyPath = newValue
    }
}
</code></pre>
<p>æˆ‘ä»¬æ­¤æ—¶åœ¨ <code>ViewController</code>çš„è¯·æ±‚ä»£ç å¯ä»¥è®¾ç½®å¦‚ä¸‹ã€‚</p>
<pre><code class="language-swift">let getConfigurationApi = GetConfigurationApi()
getConfigurationApi.loadObjectRequest(success: { [weak self] (configuration) in
    guard let title = configuration.title else {
        return
    }
    self?.navigationBar.blogMenuItem.itemTitle.stringValue = title
}, failure: { (error) in })
</code></pre>
<p>æˆ‘ä»¬å°±å¯ä»¥è¯·æ±‚åˆ°æ•°æ®äº†ï¼Œæ˜¯ä¸æ˜¯ä»£ç æ›´åŠ çš„ç®€æ´äº†å‘¢ï¼Ÿ</p>
<h3 id="è¯·æ±‚æ–‡ç« åˆ—è¡¨">è¯·æ±‚æ–‡ç« åˆ—è¡¨</h3>
<p>æˆ‘ä»¬é…ç½® <code>GetPostListApi</code>ç±»çš„ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="language-swift">class GetPostListApi: BaseRequestApi&lt;PostDetail&gt; {
    override func URLPath() -&gt; String {
        return &quot;collections/posts/entries&quot;
    }
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>PostsView</code>æ–°å†™ä¸€ä¸ªæ–¹æ³•ç”¨äºè·å–æ–‡ç« åˆ—è¡¨ã€‚</p>
<pre><code class="language-swift">func loadData() {
    let api = GetPostListApi()
    api.loadArrayRequest(success: { (list:[PostDetail]) in

    }) { (error) in }
}
</code></pre>
<p>æœ‰äº†æ•°æ®æˆ‘ä»¬éœ€è¦åœ¨åˆ—è¡¨é‡Œé¢å±•ç¤ºå‡ºæ¥ã€‚</p>
<p><code>BaseListView</code>ä½œä¸ºåˆ—è¡¨çš„åŸºç±»ï¼Œæˆ‘ä»¬çš„æ•°æ®æºçš„ç»“æ„å¯èƒ½ä¸å¤ªä¸€æ ·ï¼Œæˆ‘ä»¬ä¸å¯èƒ½è®©æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®æºä¼ å…¥ <code>BaseListView</code>ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬çš„ <code>æ³›å‹å‚æ•°</code>åˆå¯ä»¥ç™»åœºäº†ã€‚</p>
<p>æˆ‘ä»¬ç»™ <code>BaseListView</code>æ–°å»ºä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œå¿…é¡»æ˜¯ <code>BaseMappable</code>çš„å­ç±»ã€‚</p>
<pre><code class="language-swift">class BaseListView&lt;M:BaseMappable&gt;
</code></pre>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªå±æ€§å­˜å‚¨ <code>M</code>æ•°ç»„ï¼Œå½“ç”¨æˆ·é‡æ–°è®¾ç½®å°±åˆ·æ–°è¡¨æ ¼ã€‚</p>
<pre><code class="language-swift">var models:[M] = [] {
    didSet {
        self.tableView.reloadData()
    }
}
</code></pre>
<h3 id="iboutlet-property-cannot-have-non-objc-class-type">@IBOutlet Property cannot have non-â€˜@objcâ€™ class type</h3>
<p>æ­¤æ—¶æˆ‘ä»¬å·²ç»æ”¶åˆ°äº†ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ã€‚</p>
<p>å‚è€ƒèµ„æ–™:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/32836343/generic-controller-in-swift-2-0-using-storyboards">Generic controller in swift 2.0 using storyboards</a>ã€‚</li>
</ul>
<p>æŸ¥äº†å¾ˆå¤šçš„èµ„æ–™ï¼Œè¿™ä¸ªæŠ€æœ¯éš¾ç‚¹å€’æ˜¯æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ–¹æ³•è§£å†³ã€‚æ˜¯å› ä¸º <code>@IBOutlet</code>åœ¨ <code>OC</code>é‡Œé¢ä½¿ç”¨çš„è¿è¡Œæ—¶ï¼Œä½†æ˜¯è¿è¡Œæ—¶ä¸å…è®¸ <code>@IBOutlet</code>ç»‘å®šä¸€ä¸ªæ³›å‹çš„å¯¹è±¡ã€‚</p>
<p>æˆ‘è¿˜å°è¯•è¿‡åœ¨ <code>BaseListView</code>ä½¿ç”¨å…¶ä»–çš„æ³›å‹ç±»é—´æ¥ä»£ç†ï¼Œä½†æ˜¯ä¾ç„¶æ— æ³•è§£å†³æˆ‘ä»¬çš„é—®é¢˜ã€‚</p>
<p>æˆ‘ç°åœ¨å”¯ä¸€èƒ½å¤Ÿæƒ³åˆ°çš„æ–¹æ¡ˆå°±æ˜¯æ‰€è°“çš„åè®®ï¼Œç”¨åè®®å£°æ˜æ³›å‹å‚æ•°ã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›åˆ«äººç»§æ‰¿æˆ‘ä»¬çš„åè®®å¯ä»¥æŠŠæ•°æ®è½¬æ¢æˆæˆ‘ä»¬æƒ³è¦çš„æ•°æ®ã€‚</p>
<pre><code class="language-swift">protocol BaseListViewDataSource {
    associatedtype M:BaseMappable ///&lt; æ³›å‹ç±»å‹
    static func converModels(models:[M]) -&gt; [BaseListViewDataModel] ///&lt; å°†å…¶ä»–ç±»å‹å¯¹è±¡æ•°ç»„è½¬æ¢æˆBaseListViewDataModelå¯¹è±¡æ•°ç»„
    static func converModel(model:M) -&gt; BaseListViewDataModel ///&lt; å°†å…¶ä»–ç±»å‹è½¬æ¢æˆBaseListViewDataModelå¯¹è±¡
}

extension BaseListViewDataSource {
    static func converModels(models:[M]) -&gt; [BaseListViewDataModel] {
        var datas:[BaseListViewDataModel] = []
        for model in models {
            let data = self.converModel(model: model)
            datas.append(data)
        }
        return datas
    }
}

class BaseListViewDataModel {
    var title:String? ///&lt; æ˜¾ç¤ºæ ‡é¢˜
    var date:String? ///&lt; æ˜¾ç¤ºæ—¶é—´
}
</code></pre>
<p>æˆ‘ä»¬ <code>PostDetail</code>å®ç°æˆ‘ä»¬åˆšæ‰çš„åè®® <code>BaseListViewDataSource</code>ã€‚</p>
<pre><code class="language-swift">static func converModel(model: PostDetail) -&gt; BaseListViewDataModel {
    let data = BaseListViewDataModel()
    data.title = model.title
    data.date = model.date
    return data
}

typealias M = PostDetail
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>loadData</code>æ–¹æ³•å®ç°æˆ‘ä»¬åˆšæ‰çš„æ–¹æ³•ã€‚</p>
<pre><code class="language-swift">func loadData() {
    let api = GetPostListApi()
    api.loadArrayRequest(success: { (list:[PostDetail]) in
        self.listView.models = PostDetail.converModels(models: list)
    }) { (error) in }
}
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-c2af09200d7e6ceb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="36426B52-B1F6-4C1F-BE2E-77806B868657"></p>
<p>æˆ‘ä»¬å·²ç»å¯ä»¥å‘ç°æˆ‘ä»¬çš„ç•Œé¢å·²ç»å¯ä»¥æ­£å¸¸çš„æ˜¾ç¤ºæˆ‘ä»¬æ•°æ®æ¡æ•°ï¼Œç°åœ¨å‰©ä¸‹åšçš„å°±æ˜¯ç»™æˆ‘ä»¬ç•Œé¢æ­£ç¡®çš„èµ‹å€¼äº†ã€‚</p>
<pre><code class="language-swift">public func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -&gt; NSView? {
    guard let identifier = tableColumn?.identifier else {
        return nil
    }
    let model = self.models[row]
    let view = tableView.make(withIdentifier: identifier, owner: self)
    if let iconTitle = view as? IconTitleTableCellView, let title = model.title {

    }
    return view
}
</code></pre>
<p>æˆ‘ä»¬å°†  <code>IconTitleTableCellView</code>ä¸­ <code>configurationView</code>æ–¹æ³•ä¿®æ”¹å¦‚ä¸‹ã€‚</p>
<pre><code class="language-swift">func configurationView(title:String) {
    let configuration = SideMenuItemConfiguration(title: title, iconHex: &quot;F0F6&quot;, hidden: true, selected: false, normalColor: NSColor(red:0.267, green:0.267, blue:0.267, alpha:1.000))
    self.itemView.menuItemConfiguration = configuration
    let size = self.itemView.sizeThatFits(NSSize(width: Int.max, height: 20))
    self.itemViewWidthConstraint.constant = CGFloat(size.width)
}
</code></pre>
<pre><code class="language-swift">public func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -&gt; NSView? {
    guard let identifier = tableColumn?.identifier else {
        return nil
    }
    let model = self.models[row]
    let view = tableView.make(withIdentifier: identifier, owner: self)
    if let iconTitle = view as? IconTitleTableCellView, let title = model.title {
        iconTitle.configurationView(title: title)
    }
    return view
}
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-7a858dd177d19a36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="E7D6285D-3D63-4C92-9BFF-B8DE754E48C3"></p>
<p>æˆ‘ä»¬çš„ç•Œé¢å°±å¯ä»¥æ­£å¸¸çš„æ˜¾ç¤ºæ ‡é¢˜äº†ã€‚åŒæ ·æˆ‘ä»¬æˆ‘ä»¬èµ‹å€¼ä¸€ä¸‹æ—¶é—´ã€‚</p>
<pre><code class="language-swift">if let dateView = view as? DateTableCellView, let date = model.date {
    dateView.dateLabel.stringValue = date
}
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-074a435a0a6085a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="97394D1F-3DFC-4939-9111-283A3A18A7CB"></p>
<p>æˆ‘ä»¬å‘ç°æ—¶é—´æ˜¾ç¤ºçš„æ ¼å¼ä¸æ­£ç¡®ã€‚æˆ‘ä»¬ç»™ <code>DateTableCellView</code>å†™ä¸€ä¸ªè½¬æ¢æ—¶é—´æ ¼å¼çš„æ–¹æ³•ã€‚</p>
<pre><code class="language-swift">func configuration(dateString:String) {
    let formatter = DateFormatter()
    formatter.dateFormat = &quot;yyyy-MM-dd hh:mm:ss zzzz&quot;
    guard let date = formatter.date(from: dateString) else {
        return
    }
    formatter.dateFormat = &quot;MMM dd,yyyy&quot;
    self.dateLabel.stringValue = formatter.string(from: date)
}
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-511f0ec90bf527d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2D3D00B6-EC09-4A1B-9FFA-57298DBCDDBD"></p>
<p>æˆ‘ä»¬çœ‹åˆ°æ˜¾ç¤ºç«Ÿç„¶æ˜¯ä¸­æ–‡<code>å…­æœˆ</code>ï¼Œä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°çš„ <code>Jun</code>ã€‚</p>
<h3 id="ä¸­æ–‡ç³»ç»Ÿæ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤ºè‹±æ–‡å­—ç¬¦">ä¸­æ–‡ç³»ç»Ÿæ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤ºè‹±æ–‡å­—ç¬¦</h3>
<pre><code class="language-swift">formatter.locale = Locale(identifier: &quot;en_US&quot;)
</code></pre>
<p>æˆ‘ä»¬è¿˜æ˜¯æŒ‰ç…§é»˜è®¤çš„æ¯”è¾ƒå¥½ï¼Œæˆ‘ä»¬ä¸­æ–‡ç”¨èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚</p>
<p>ç°åœ¨è¦åšçš„å°±æ˜¯ <code>åˆ é™¤</code>  <code>æŸ¥çœ‹</code>ä¸¤ä¸ªæ–¹æ³•äº†ã€‚æˆ‘ä»¬å°è£…çš„ <code>SideMenuItemView</code>æ§ä»¶æ˜¯æ— æ³•å“åº”æˆ‘ä»¬çš„äº‹ä»¶çš„ã€‚</p>
<h3 id="ç»™-nsviewæ·»åŠ -nsgesturerecognizeräº‹ä»¶">ç»™ <code>NSView</code>æ·»åŠ  <code>NSGestureRecognizer</code>äº‹ä»¶</h3>
<p>å‚è€ƒèµ„æ–™:</p>
<ul>
<li><a href="https://developer.apple.com/documentation/appkit/nsgesturerecognizer">NSGestureRecognizer</a>ã€‚</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-6861c654b3f7b625.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="15D2ADAE-B1B7-495C-AA6A-E7C9677CFE0D"></p>
<p>ä¸€å…±æœ‰äº”ä¸ª <code>NSGestureRecognizer</code>çš„å­ç±»å¯ä»¥ä½¿ç”¨ã€‚æˆ‘ä»¬ä½¿ç”¨ <code>NSClickGestureRecognizer</code>æ¥å¤„ç†ç‚¹å‡»ã€‚</p>
<pre><code class="language-swift">func addClick() {
    let click = NSClickGestureRecognizer(target: self, action:#selector(self.clickAction))
    self.addGestureRecognizer(click)
}

func clickAction() {
}
</code></pre>
<p>æˆ‘ä»¬çš„æ–¹æ³•æ— æ³•å‘Šè¯‰å¤–æ¥ä»€ä¹ˆæ—¶å€™ç‚¹å‡»äº†ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå›è°ƒå°±å¥½äº†ã€‚</p>
<pre><code class="language-swift">typealias SideMenuItemViewClickCompletionHandle = (_ view:SideMenuItemView) -&gt; Void

func addClick(completionHandle:@escaping SideMenuItemViewClickCompletionHandle) {
        self.clickCompletionHandle = completionHandle
        let click = NSClickGestureRecognizer(target: self, action:#selector(self.clickAction))
        self.addGestureRecognizer(click)
    }
    
func clickAction() {
    guard let completionHandle = self.clickCompletionHandle else {
        return
    }
    completionHandle(self)
}

var clickCompletionHandle:SideMenuItemViewClickCompletionHandle?
</code></pre>
<h3 id="åˆ é™¤æ–‡ç« ">åˆ é™¤æ–‡ç« </h3>
<p>å‚è€ƒèµ„æ–™:</p>
<ul>
<li><a href="http://www.sbdoc.cn/share/share.html#594899063c82962eab2af3a7">åˆ é™¤æ–‡ç« æ¥å£</a>ã€‚</li>
</ul>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±» <code>DeletePostDetail</code>ç»§æ‰¿ä¸æˆ‘ä»¬ <code>BaseRequestApi</code>ã€‚</p>
<pre><code class="language-swift">class DeletePostDetail: BaseRequestApi&lt;DeletePostDetailResponse&gt; {
    override func URLPath() -&gt; String {
        return &quot;collections/posts/{name}&quot;
    }
}

class DeletePostDetailResponse: BaseMappable  {
    func mapping(map: Map) {
        
    }
}
</code></pre>
<p>è¿™æ ·æ˜¯ä¸ç¬¦åˆæˆ‘ä»¬è¯·æ±‚çš„æ ‡å‡†çš„ï¼Œæˆ‘ä»¬çš„åœ°å€éœ€è¦ä¸€ä¸ªçœŸå®çš„ <code>name</code>ã€‚</p>
<p>æˆ‘ä»¬å°±ç»™ <code>DeletePostDetail</code>åˆå§‹åŒ–å¸¦ä¸€ä¸ª <code>name</code>çš„å‚æ•°ã€‚</p>
<pre><code class="language-swift">override func URLPath() -&gt; String {
    return &quot;collections/posts/\(self.name)&quot;
}

let name:String

init(name:String) {
    self.name = name
}
</code></pre>
<p>æˆ‘ä»¬åˆ é™¤çš„è¯·æ±‚æ˜¯ <code>delete</code>è¯·æ±‚,æˆ‘ä»¬åº•å±‚å°è£…çš„é»˜è®¤ä¸º <code>Get</code>è¯·æ±‚ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¨å¾®çš„ä¿®æ”¹ä¸€ä¸‹ã€‚</p>
<pre><code class="language-swift">func requestMethod() -&gt; HTTPMethod {
    return HTTPMethod.get
}
Alamofire.request(self.URLFullPath(), method:self.requestMethod())
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬çˆ¶ç±»é»˜è®¤æ˜¯ <code>Get</code>è¯·æ±‚ï¼Œå­ç±»å¦‚æœéœ€è¦ <code>delete</code>è¯·æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦é‡å†™è¿™ä¸ªæ–¹æ³•å³å¯ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ç‚¹å‡»åˆ é™¤çš„æŒ‰é’®æç¤ºç”¨æˆ·æ˜¯å¦è¦åˆ é™¤è¿™ä¸ªæ–‡ç« ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¼ å…¥ä¸€ä¸ªæ–‡ç« çš„æ–‡ä»¶åç§°ã€‚</p>
<pre><code class="language-swift">///BaseListViewDataModelç±»
var fileName:String? ///&lt; Markdown çš„æ–‡ä»¶åç§°
</code></pre>
<pre><code class="language-swift">///PostDetailç±»
static func converModel(model: PostDetail) -&gt; BaseListViewDataModel {
    let data = BaseListViewDataModel()
    data.title = model.title
    data.date = model.date
    data.fileName = model.name
    return data
}
</code></pre>
<pre><code class="language-swift">///ActionTableCellView
var fileName:String? ///&lt; ç”¨æ¥çŸ¥é“è¦åˆ é™¤é‚£ä¸ªæ–‡ä»¶
</code></pre>
<h3 id="å…³äº-nsalert">å…³äº <code>NSAlert</code></h3>
<p>å¯¹äºå¼¹å‡ºæ¡†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>NSAlert</code>æ§ä»¶</p>
<p>å‚è€ƒèµ„æ–™:</p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_705998560101vo1y.html">è‹¹æœå°ç™½çš„å­¦ä¹ ä¹‹è·¯--NSAlertçš„ä¸¤ç§ä½¿ç”¨æ–¹æ³•</a>ã€‚</li>
</ul>
<blockquote>
<p>åœ¨ <code>ActionTableCellView</code>ç±»å¢åŠ ä»£ç å¦‚ä¸‹</p>
</blockquote>
<pre><code class="language-swift">self.deleteItemView.addClick { (view) in
    guard let fileName = self.fileName, let window = NSApplication.shared().keyWindow else {
        return
    }
    let alert = NSAlert()
    alert.messageText = &quot;ç¡®å®šè¦åˆ é™¤\(fileName)&quot;
    alert.beginSheetModal(for: window, completionHandler: { (response) in

    })
}
</code></pre>
<blockquote>
<p>åœ¨ <code>BaseListView</code>çš„ <code>public func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -&gt; NSView?</code>æ–¹æ³• å¢åŠ ä»£ç å¦‚ä¸‹</p>
<pre><code class="language-swift">if let actionView = view as? ActionTableCellView {
    actionView.fileName = model.fileName
}
</code></pre>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-b822166c6369a14a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2C2B5648-FEF8-4467-B32B-121AE71C5ABF"></p>
<p>æ­¤æ—¶åªæœ‰ä¸€ä¸ªç¡®å®šï¼Œæ²¡æœ‰å–æ¶ˆæŒ‰é’®ï¼Œåˆ°æ—¶å€™è¯¯åˆ å°± GG äº†ã€‚</p>
<pre><code class="language-swift">self.deleteItemView.addClick { (view) in
    guard let fileName = self.fileName, let window = NSApplication.shared().keyWindow else {
        return
    }
    let alert = NSAlert()
    alert.messageText = &quot;ç¡®å®šè¦åˆ é™¤\(fileName)&quot;
    alert.addButton(withTitle: &quot;åˆ é™¤&quot;)
    alert.addButton(withTitle: &quot;å–æ¶ˆ&quot;)
    alert.beginSheetModal(for: window, completionHandler: { (response) in

    })
}
</code></pre>
<p>å½“æˆ‘ä»¬ç‚¹å‡»åˆ é™¤æŒ‰é’®æˆ‘ä»¬éœ€è¦æ‰§è¡Œåˆ é™¤çš„è¯·æ±‚ã€‚</p>
<pre><code class="language-swift">if response == NSAlertFirstButtonReturn {
    self.deletePost(fileName: fileName)
}
</code></pre>
<pre><code class="language-swift">func deletePost(fileName:String) {
    let api = DeletePostDetail(name: fileName)
    api.loadObjectRequest(success: { (response) in
    }) { (error) in
    }
}
</code></pre>
<p>å½“æˆ‘ä»¬åˆ é™¤å®Œæ¯•æˆ‘ä»¬éœ€è¦åˆ·æ–°æˆ‘ä»¬çš„è¡¨æ ¼ï¼Œæˆ‘å°±ç»™ <code>ActionTableCellView</code>æ–°å†™ä¸€ä¸ªå›è°ƒç”¨äºåˆ é™¤å®Œæ¯•æ›´æ–°è¡¨æ ¼çš„å†…å®¹ã€‚</p>
<pre><code class="language-swift">typealias ActionTableCellViewDeleteSuccessCompletionHandle = (_ view:ActionTableCellView) -&gt; Void
</code></pre>
<pre><code class="language-swift">var deleteSuccessCompletionHandle:ActionTableCellViewDeleteSuccessCompletionHandle?
</code></pre>
<pre><code class="language-swift">func deletePost(fileName:String) {
  let api = DeletePostDetail(name: fileName)
  api.loadObjectRequest(success: { (response) in
      guard let completionHandle = self.deleteSuccessCompletionHandle else {
          return
      }
      completionHandle(self)
  }) { (error) in

  }
}
</code></pre>
<p>æˆ‘ä»¬å‘ç°æˆ‘ä»¬çš„è¡¨æ ¼å¹¶æ²¡æœ‰åˆ·æ–°ï¼Œå› ä¸ºå¯¹äº <code>Delete</code>è¯·æ±‚æ˜¯æ²¡æœ‰ä»»ä½•ä¿¡æ¯å›è°ƒçš„ã€‚æˆ‘ä»¬åªç”¨çŸ¥é“çŠ¶æ€å—æ˜¯<code>200</code>å°±å¯ä»¥çŸ¥é“æˆåŠŸäº†ã€‚</p>
<pre><code class="language-swift">func loadObjectRequest(success: @escaping (T?) -&gt; Void, failure: @escaping (Error?) -&gt; Void) {
    Alamofire.request(self.URLFullPath(),method:self.requestMethod()).responseObject(keyPath:self.responseKeyPath) { (response:DataResponse&lt;R&gt;) in
        guard let code = response.response?.statusCode, code == 200 else {
            failure(response.error)
            return
        }
        success(response.value)
    }
}
</code></pre>
<p>å½“æˆ‘ä»¬å½“è¯†åˆ«çŠ¶æ€å—ä¸º <code>200</code>æœç„¶æˆåŠŸäº†ã€‚</p>
<h3 id="osxå¹³å°ä»£ç æ‰“å¼€ä¸€ä¸ªåœ°å€"><code>OSX</code>å¹³å°ä»£ç æ‰“å¼€ä¸€ä¸ªåœ°å€</h3>
<p>æˆ‘ä»¬åšå®Œ <code>åˆ é™¤</code>åŠŸèƒ½ï¼Œè¿˜å‰©ä¸‹ä¸€ä¸ª <code>æŸ¥çœ‹</code>åŠŸèƒ½ï¼Œå½“ç”¨æˆ·ç‚¹å‡» <code>æŸ¥çœ‹</code>æŒ‰é’®ã€‚</p>
<p>æˆ‘ä»¬ç»™ <code>ActionTableCellView</code>æ–°å¢ä¸€ä¸ªæ–¹æ³•ç”¨äºé…ç½® <code>æŸ¥çœ‹</code>æŒ‰é’®çš„ç‚¹å‡»æ–¹æ³•ã€‚</p>
<pre><code class="language-swift">func addLookView() {
    self.lookItemView.addClick { (view) in
        guard let urlString = self.httpURL, let url = URL(string: urlString)  else {
            return
        }
        NSWorkspace.shared().open(url)
    }
}
</code></pre>
<p>ç•Œé¢ä¸Šé¢çš„æœç´¢åŠŸèƒ½ï¼Œè¯´ç®€å•ä¸ç®€å•ï¼Œè¯´å¤æ‚ä¸å¤æ‚ã€‚é‚£è¦ä½ éœ€è¦å®ç°çš„æœç´¢åˆ°ä»€ä¹ˆç¨‹åº¦ã€‚</p>
<p>å‚è€ƒèµ„æ–™:</p>
<ul>
<li><a href="http://junshang.me/9-37-12-%E5%85%B3%E4%BA%8E%E6%90%9C%E7%B4%A2%E5%87%BA%E6%9D%A5%E7%9A%84%E5%86%85%E5%AE%B9%E6%A0%B9%E6%8D%AE%E6%9D%83%E9%87%8D%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F/">å…³äºæœç´¢å‡ºæ¥çš„å†…å®¹æ ¹æ®æƒé‡è¿›è¡Œæ’åº</a>ã€‚</li>
</ul>
<p>æˆ‘ä»¬åšå…ˆåšä¸€ä¸ªç®€å•ç‰ˆæœ¬çš„ï¼Œå°±ç›´æ¥åŒ¹é…å°±å¥½äº†ã€‚</p>
<p>æˆ‘ä»¬ç»™ <code>BaseListView</code>å¢åŠ ä¸€ä¸ªæœç´¢è¿‡æ»¤ä¹‹åçš„æ•°ç»„ã€‚</p>
<pre><code class="language-swift">private var filterModels:[BaseListViewDataModel] = []
</code></pre>
<p>æˆ‘ä»¬ç”¨ <code>filterModels</code>æ¥ä½œä¸ºæˆ‘ä»¬æš‚æ—¶æ•°æ®çš„æ•°æ®æºã€‚</p>
<p>æˆ‘ä»¬ç»™ <code>ContentHeaderValue1</code>å…³è”ä¸€ä¸‹æœç´¢è¾“å…¥æ¡†ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var searchFiled: NSTextField!
</code></pre>
<p>æˆ‘ä»¬è®¾ç½®ä¸€ä¸‹ <code>searchFiled</code>ä»£ç†å¯¹è±¡ä¸º <code>BaseListView</code>ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var header: ContentHeader! {
    didSet {
        guard let headerValue1 = self.header.headerContent as? ContentHeaderValue1 else {
            return
        }
        headerValue1.searchFiled.delegate = self
    }
}
</code></pre>
<p>ç»è¿‡ç ”ç©¶å¦‚æœè¦ç›‘å¬è¾“å…¥æ¡†æ–‡å­—å˜åŒ–éœ€è¦ç”¨é€šçŸ¥ã€‚æˆ‘ä»¬å£°æ˜ä¸€ä¸ªæ–¹æ³•ç›‘å¬è¾“å…¥æ¡†é€šçŸ¥å˜åŒ–ã€‚</p>
<pre><code class="language-swift">func searchFiledTextChanged(notification:Notification) {
    guard let filed = notification.object as? NSTextField else {
        return
    }

    guard let headerValue1 = self.header.headerContent as? ContentHeaderValue1 else {
        return
    }

    guard filed == headerValue1.searchFiled else {
        return
    }

}
</code></pre>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–¹æ³•å¤„ç†å­—ç¬¦ä¸²æ”¹å˜è¿‡æ»¤æ•°æ®æºã€‚</p>
<pre><code class="language-swift">func filterDataModels(filter:String) {
    self.filterModels.removeAll()
    if filter.characters.count == 0 {
        self.filterModels.append(contentsOf: self.models)
    } else {
        for model in self.models {
            if let _ = model.title?.range(of: filter) {
                self.filterModels.append(model)
            }
        }
    }
    self.tableView.reloadData()
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>searchFiledTextChanged</code>æ–¹æ³•é‡Œé¢è°ƒç”¨æˆ‘ä»¬åˆšæ‰çš„è¿‡æ»¤çš„æ–¹æ³•ã€‚</p>
<pre><code class="language-swift">func searchFiledTextChanged(notification:Notification) {
    guard let filed = notification.object as? NSTextField else {
        return
    }

    guard let headerValue1 = self.header.headerContent as? ContentHeaderValue1 else {
        return
    }

    guard filed == headerValue1.searchFiled else {
        return
    }
    self.filterDataModels(filter: filed.stringValue)
}
</code></pre>
<p>å› ä¸ºæˆ‘ä»¬åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è¾“å…¥ä»»ä½•çš„æœç´¢å­—ç¬¦ä¸²ï¼Œè®¾ç½® <code>models</code>æˆ‘ä»¬è¦åˆå§‹åŒ–æˆ‘ä»¬çš„ <code>filterDataModels</code>æ•°ç»„ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–¹æ³•ç”¨äºåˆå§‹åŒ– <code>filterDataModels</code>ã€‚</p>
<pre><code class="language-swift">func settingFilterModels() {
    guard let headerValue1 = self.header.headerContent as? ContentHeaderValue1 else {
        return
    }
    let filterText = headerValue1.searchFiled.stringValue
    self.filterDataModels(filter: filterText)
}
</code></pre>
<p>æˆ‘ä»¬åœ¨è®¾ç½® <code>models</code>æ—¶å€™è¿›è¡Œé‡æ–°è®¾ç½® <code>filterModels</code>ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>header</code>çš„æ–¹æ³• <code>didSet</code>è¿›è¡Œæ³¨å†Œé€šçŸ¥ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-3bd9de09862d9ee2.gif?imageMogr2/auto-orient/strip" alt="201706201728"></p>
<p>æˆ‘ä»¬çš„æœç´¢åŠŸèƒ½å·²ç»å¯ä»¥ç”¨äº†ã€‚</p>
<h3 id="deinitæ–¹æ³•"><code>deinit</code>æ–¹æ³•</h3>
<p>æˆ‘ä»¬åœ¨ <code>Objective-C</code>å¼€å‘é‡Œé¢ç»å¸¸åœ¨ <code>dealloc</code>æ³¨é”€é€šçŸ¥ï¼Œå‡å°‘èµ„æºæ¶ˆè€—ã€‚æˆ‘ä»¬åœ¨ <code>Swift</code>é‡Œé¢å¯ä»¥ä½¿ç”¨ <code>deinit</code>å‡½æ•°ã€‚</p>
<p>å‚è€ƒèµ„æ–™:</p>
<ul>
<li><a href="http://swifter.tips/retain-cycle/">å†…å­˜ç®¡ç†ï¼ŒWEAK å’Œ UNOWNED</a></li>
</ul>
<pre><code class="language-objc">    deinit {
        NotificationCenter.default.removeObserver(self)
    }
</code></pre>
<p>åˆšæ‰æ— æ„é—´å‘ç°ä¸‹é¢ç³»ç»Ÿè‡ªå¸¦çš„æ–¹æ³•</p>
<pre><code class="language-swift">extension NSObject {

    open func controlTextDidBeginEditing(_ obj: Notification)

    open func controlTextDidEndEditing(_ obj: Notification)

    open func controlTextDidChange(_ obj: Notification)
}
</code></pre>
<p>è¿™æ˜¯ <code>NSObject</code>çš„æ‰©å±•ï¼Œæˆ‘ä»¬å»æ‰æˆ‘ä»¬æ³¨å†Œçš„é€šçŸ¥ï¼Œç”¨ <code>controlTextDidChange</code>æ–¹æ³•è¯•ä¸€ä¸‹ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="http://www.baiyuxiong.com/?p=1212">swift os x å“åº” NSTextField çš„controlTextDidChangeäº‹ä»¶</a></li>
</ul>
 </p>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              <div class="next-post">
                                  <div class="next">ä¸‹ä¸€ç¯‡</div>
                                  <a href="https://joserccblog.github.io/post/2017-11-25-jekyll-admin-mac-æ¨¡æ¿å¤„ç†">
                                      <h3 class="post-title">
                                          Jekyll-Admin-Mac-æ¨¡æ¿å¤„ç†
                                      </h3>
                                  </a>
                              </div>
                          
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              

                              
                                  <div id="disqus_thread"></div>
                              
                          
                      </div>
                  </div>
              </div>

          </article>
      </div>
  </div>

    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
</footer>


    <!-- jQuery -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/md5.min.js"></script>

<script type="application/javascript">
    hljs.initHighlightingOnLoad();
</script>



    

    
        <script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>
        <script>

            var options = {
                shortname: 'josercc',
                apikey: 'DBJHHPsqZBT5EUYFyQmorAozkwxTDoySOnd4bmdt9G29YFySUFhFE6SLZrSCHee4',
            }
            if ('') {
                options.api = ''
            }
            var dsqjs = new DisqusJS(options)

        </script>
    




  </body>
</html>
