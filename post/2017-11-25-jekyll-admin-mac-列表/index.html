<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jekyll-Admin-Mac-列表 | 君赏博客</title>
<meta name="description" content="2012年从事iOS开发，资深iOS开发菜鸟，目前在环球易购占坑。喜欢研究偏门技术，喜欢自动化编程，喜欢研究小软件提高编程效率" />
<link rel="shortcut icon" href="https://joserccblog.github.io/favicon.ico">
<link rel="stylesheet" href="https://joserccblog.github.io/styles/main.css">

<script src="https://joserccblog.github.io/media/js/jquery.min.js"></script>
<script src="https://joserccblog.github.io/media/js/masonry.pkgd.min.js"></script>
<script src="https://joserccblog.github.io/media/js/aos.js"></script>
<script src="https://joserccblog.github.io/media/js/pace.min.js"></script>
<script src="https://joserccblog.github.io/media/js/view-image.min.js"></script>
<script src="https://joserccblog.github.io/media/js/functions.js"></script>
    <script src="https://joserccblog.github.io/media/js/waterfall.min.js"></script>
    <script src="https://joserccblog.github.io/media/js/prism.min.js"></script>
    
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
    
  </head>
  <body>
            <header id="header" class="grid-container">
        <!-- start: .menu-wrapper -->
        <div class="menu-mobile"> 
          <i class="fa fa-reorder"></i>
        </div>
        <div class="menu-wrapper">
          <div class="">
            <div class="logo">
              <a href="https://joserccblog.github.io"><img src="https://joserccblog.github.io/media/images/logoo.png" alt=""></a>
            </div>
            <!-- start: .main-nav -->

            <nav class="main-nav grid-container grid-parent">
              <ul id="menu-header" class="menu gradient-effect">
                
                  <li class=""><a href="https://joserccblog.github.io" class="menu">首页</a></li>
                
                
                  <li class="" >
                    <a href="/archives" class="menu">
                      归档
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/tags" class="menu">
                      标签
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/post/about" class="menu">
                      关于
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/post/contact/" class="menu">
                      联系作者
                    </a>
                  </li>
                
              </ul>
            </nav>
            <!-- end: .main-nav -->
            <div class="clear"></div>
            <div class="border hide-on-tablet hide-on-mobile"></div>
          </div>    
          <div class="clear"></div>
        </div>
        <!-- end: .menu-wrapper -->
        <div class="clear"></div>
      </header>

      <main id="single" class="main grid-container fullcover no-sidebar aos-init aos-animate" data-aos="fade">

        <div class="center content">
          <div class="featured-image cover" style="background-image: url('http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-18.png');">
            <div class="meta top"> 
              <time class="meta-info" style="float:left;" datetime="2017-11-25"><i class="fa fa-calendar"></i><span class="lately">2 年前</span></time>
               
               
               <span id="/post/2017-11-25-jekyll-admin-mac-列表/" class="leancloud_visitors views-counter meta-info">
                <i class="fa fa-leancloud"></i><span class="leancloud-visitors-count" style="vertical-align: middle;">0</span>
               </span>
               
            </div>
            <div class="info">
              <div class="tags ">
                
                      <a href="https://joserccblog.github.io/tag/swift" class="ctag ctag-0 ctag-swift" aria-label="">Swift</a>
                    
                      <a href="https://joserccblog.github.io/tag/mac" class="ctag ctag-1 ctag-mac" aria-label="">Mac</a>
                    
                      <a href="https://joserccblog.github.io/tag/jekyll" class="ctag ctag-2 ctag-jekyll" aria-label="">Jekyll</a>
                    
              </div>
              <h1 class="title ularge white bold">Jekyll-Admin-Mac-列表</h1>
            </div>
          </div>
        </div>  

        <div class="epcl-page-wrapper">
          <div class="left-content grid-70 np-mobile">
            <article class="main-article post">
              <section class="post-content">
                <div class="text">
                  <p>[TOC]</p>
<h3 id="关于-nstableview的使用">关于 <code>NSTableView</code>的使用</h3>
<p>接下来我们需要就是做出这个列表数据，我们可以使用 <code>NSTableView</code>来做出这个效果。</p>
<p>我们拖拽一个 <code>NSTableView</code>放在 <code>BaseListView.xib</code>的试图上面。</p>
<figure data-type="image" tabindex="1"><img src="http://upload-images.jianshu.io/upload_images/545662-47806461019232f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DFDA8143-EEE0-43A3-A863-CFCDDCF41B14" loading="lazy"></figure>
<p>设置布局如下。</p>
<figure data-type="image" tabindex="2"><img src="http://upload-images.jianshu.io/upload_images/545662-b73a551be372c558.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="C99F8039-E33D-47D0-98EA-459D0AF3E336" loading="lazy"></figure>
<h3 id="解决-nstableview的-header在-xib无法正常显示">解决 <code>NSTableView</code>的 <code>Header</code>在 <code>Xib</code>无法正常显示</h3>
<p>有的时候我们发现 <code>NSTableView</code>在 <code>Xib</code>被隐藏了，但是我们显示 <code>Header</code>的选项是开启的。</p>
<blockquote>
<p>我们只要重新勾选 <code>Hader</code>选项即可显示出来。</p>
</blockquote>
<figure data-type="image" tabindex="3"><img src="http://upload-images.jianshu.io/upload_images/545662-b7fe64c78732c57c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2A43EA90-E3FB-400F-A286-11F990C01A24" loading="lazy"></figure>
<p>我们可以看出来我们的列表分为三部分 <code>标题</code> <code>时间</code> <code>操作</code>，我们就设置 <code>NSTableView</code>有 <code>3</code>个 <code>Column</code>。</p>
<figure data-type="image" tabindex="4"><img src="http://upload-images.jianshu.io/upload_images/545662-9c233a0224b77a52.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="6E7EFC46-9753-4F4A-B497-1CE2C5FCBCD2" loading="lazy"></figure>
<p>因为名字的长度是不固定的，我们就设置 <code>NSTableView</code>的第一个 <code>Column</code>的宽度随着 <code>NSTableView</code>的宽度变化。</p>
<figure data-type="image" tabindex="5"><img src="http://upload-images.jianshu.io/upload_images/545662-748ce37cdd25774c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="69975981-2F29-4E1B-BCD8-165C1D033148" loading="lazy"></figure>
<p>我们设置其余的 <code>Column</code>的宽度固定为 <code>100</code>。</p>
<figure data-type="image" tabindex="6"><img src="http://upload-images.jianshu.io/upload_images/545662-b12e4b5d92163932.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FE8BFBD3-51D7-42C9-92F1-749290356794" loading="lazy"></figure>
<figure data-type="image" tabindex="7"><img src="http://upload-images.jianshu.io/upload_images/545662-be8a3de538a67af3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1804A265-0CAF-40DE-8F1B-7711A4F3E340" loading="lazy"></figure>
<p>我们的基本结构已经出现了，现在我们要设置 <code>Header</code>的背景颜色为黑色。</p>
<p>我们关联一下 <code>Xib</code>上面的 <code>NSTableView</code>控件。</p>
<h3 id="设置-nstableview的-header背景颜色">设置 <code>NSTableView</code>的 <code>Header</code>背景颜色。</h3>
<p>参考资料:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/32666795/how-do-i-override-layout-of-nstableheaderview">How do I override layout of NSTableHeaderView?</a></li>
</ul>
<blockquote>
<p>⛔️这里遇到了一个棘手的问题，如果使用 <code>NSTableHeaderView</code>的子类，在 <code>Draw</code>绘制虽然颜色是设置了，但是标题已经被覆盖掉了。</p>
<p>如果我们使用下面的方法进行设置的话</p>
<pre><code class="language-swift">public func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -&gt; NSView? {
    if let headerCell = tableColumn?.headerCell {
        headerCell.drawsBackground = true
        headerCell.backgroundColor = NSColor.black
    }
    return nil
}
</code></pre>
<p>如果数据源为0就无法设置,并且还有下面的问题。</p>
<p>如果就算有数据也是这样的状态。</p>
<figure data-type="image" tabindex="8"><img src="http://upload-images.jianshu.io/upload_images/545662-31a4273656aa518b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="76FE2C1F-AA2D-4335-AB34-B0236959D216" loading="lazy"></figure>
<p>中间有间隙并没有完全的黑掉。</p>
<p>我们暂时没有找到合适设置背景颜色的方案，我们暂时使用系统自带的。</p>
</blockquote>
<figure data-type="image" tabindex="9"><img src="http://upload-images.jianshu.io/upload_images/545662-77d3f399abc92708.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1F191849-C907-46C8-B64C-E96BB867D78F" loading="lazy"></figure>
<p>展示列表分为三种样式。</p>
<ul>
<li>第一种是图标加上文字并且是可以点击的</li>
<li>第二种是文字只做展示</li>
<li>第三种是两个按钮</li>
</ul>
<p>我们设置 <code>NSTableView</code>的 <code>Cell</code>的高度为 <code>83</code>。</p>
<p>我们新建一个类 <code>IconTitleTableCellView</code>继承与 <code>NSTableCellView</code>。我们在 <code>IconTitleTableCellView.xib</code>上面拖拽一个 <code>NSView</code>继承于 <code>SideMenuItemView</code>。</p>
<p>布局如下。</p>
<figure data-type="image" tabindex="10"><img src="http://upload-images.jianshu.io/upload_images/545662-d1b1f247b19a7592.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="E0C1A309-B229-41B0-990B-E4ECED5D0988" loading="lazy"></figure>
<figure data-type="image" tabindex="11"><img src="http://upload-images.jianshu.io/upload_images/545662-9fbfcb996deb0c7e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="9E630761-F95A-4122-BBA0-6196F851AEA1" loading="lazy"></figure>
<figure data-type="image" tabindex="12"><img src="http://upload-images.jianshu.io/upload_images/545662-69e02605f892a1f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FC3C5113-C10B-42FD-8554-AF842A147602" loading="lazy"></figure>
<p>我们先暂时设置宽度为 <code>100</code>，因为标题不知道长度，所以我们需要动态改变长度。</p>
<p>为了设置默认的字体颜色，我们设置<code>normalColor</code>为 <code>var</code>的变量。</p>
<figure data-type="image" tabindex="13"><img src="http://upload-images.jianshu.io/upload_images/545662-c01f79b2a1641bda.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="30CFC0BB-A3E7-4599-A0D5-02F9B82C36BF" loading="lazy"></figure>
<h3 id="nsview如何-sizethatfits"><code>NSView</code>如何 <code>sizeThatFits:</code></h3>
<p>为了让标题显示完全，我们绑定一下设定宽度的约束。</p>
<pre><code class="language-swift">@IBOutlet weak var itemViewWidthConstraint: NSLayoutConstraint!
</code></pre>
<p>我们发现 <code>sizeThatFits</code>并不是 <code>NSView</code>只有 <code>NSControl</code>或者子类才可以使用。但是对于我们的需求已经够了。</p>
<p>我们给 <code>SideMenuItemView</code>写一个 <code>sizeThatFits</code>方法。</p>
<pre><code class="language-swift">func sizeThatFits(_ size: NSSize) -&gt; NSSize {
    let labelSize = self.itemTitle.sizeThatFits(size)
    let sizeWidth = size.height + 10 + labelSize.width + 10
    return NSSize(width: sizeWidth, height: size.height)
}
</code></pre>
<p>我们通过计算出 <code>SideMenuItemView</code>的宽度。</p>
<pre><code class="language-swift">func configurationView() {
    let configuration = SideMenuItemConfiguration(title: &quot;这是测试标题&quot;, iconHex: &quot;F0F6&quot;, hidden: true, selected: false, normalColor: NSColor(red:0.267, green:0.267, blue:0.267, alpha:1.000))
    self.itemView.menuItemConfiguration = configuration
    let size = self.itemView.sizeThatFits(NSSize(width: Int.max, height: 20))
    self.itemViewWidthConstraint.constant = CGFloat(size.width)
}
</code></pre>
<p>此时我们已经正常可以显示标题了。</p>
<figure data-type="image" tabindex="14"><img src="http://upload-images.jianshu.io/upload_images/545662-5caaa36468c861f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="F1BB28D0-A970-4CC5-BCDA-FD302A0A1E21" loading="lazy"></figure>
<h3 id="再次激活-app">再次激活 <code>App</code></h3>
<p>我们现在的 <code>App</code>运行，假设一个应用遮挡着我们的应用，我们点击 <code>App</code>图标是无法再次显示出来 <code>App</code>面板的。</p>
<pre><code class="language-swift">class AppDelegate: NSObject, NSApplicationDelegate {
    
    func applicationShouldHandleReopen(_ sender: NSApplication, hasVisibleWindows flag: Bool) -&gt; Bool {
        for window in sender.windows {
            window.makeKeyAndOrderFront(self)
        }
        return true
    }

}
</code></pre>
<figure data-type="image" tabindex="15"><img src="http://upload-images.jianshu.io/upload_images/545662-4118109a4a8859d7.gif?imageMogr2/auto-orient/strip" alt="13" loading="lazy"></figure>
<p>此时我们已经可以再次点击 <code>App</code>图标让界面显示最前面了。</p>
<p>我们再创建一个 <code>DateTableCellView</code>继承与 <code>NSTableCellView</code>。</p>
<p>我们拖拽一个 <code>Label</code>到 <code>DateTableCellView.xib</code>布局设置如下。</p>
<figure data-type="image" tabindex="16"><img src="http://upload-images.jianshu.io/upload_images/545662-67ff3cbddf4dd177.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="D82D8855-6B02-4B37-A27A-FB329FE29B4E" loading="lazy"></figure>
<p>我们让 <code>cloumn</code>第二个使用 <code>DateTableCellView</code>。</p>
<p>我们新建一个类 <code>ActionTableCellView</code>继承于 <code>NSTableCellView</code>。</p>
<p>我们在 <code>ActionTableCellView.xib</code>上面拖拽一个 <code>NSView</code>继承与 <code>SideMenuItemView</code>。布局设置如下：</p>
<figure data-type="image" tabindex="17"><img src="http://upload-images.jianshu.io/upload_images/545662-54ec52519cd0d675.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="8872C43C-B65D-42A2-A6F5-220CE643BECE" loading="lazy"></figure>
<figure data-type="image" tabindex="18"><img src="http://upload-images.jianshu.io/upload_images/545662-9f5dc4fdf8686102.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="22DC95EE-D8B2-405F-819A-5158E4D0E592" loading="lazy"></figure>
<figure data-type="image" tabindex="19"><img src="http://upload-images.jianshu.io/upload_images/545662-add129e8d451af9f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1CF68D9F-647B-4F5A-94F0-11794CEE3002" loading="lazy"></figure>
<p>我们再在右边放置一个按钮，布局如下。</p>
<figure data-type="image" tabindex="20"><img src="http://upload-images.jianshu.io/upload_images/545662-c3e328b364e16f73.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="B2AE1F40-E784-4A65-AAE9-EAC2DA474681" loading="lazy"></figure>
<figure data-type="image" tabindex="21"><img src="http://upload-images.jianshu.io/upload_images/545662-e6948783918e0b09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="25950EC1-D246-42F1-844C-0D21B62A24A5" loading="lazy"></figure>
<figure data-type="image" tabindex="22"><img src="http://upload-images.jianshu.io/upload_images/545662-c8a40e42b343ea77.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="AF0179FB-FFBE-4C2F-9FAE-546C5C017044" loading="lazy"></figure>
<p>我们 <code>Column</code>第三个为 <code>ActionTableCellView</code>。</p>
<figure data-type="image" tabindex="23"><img src="http://upload-images.jianshu.io/upload_images/545662-30639b3e06ae68d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="676001A0-FB2F-4A91-9AD6-57B5120C0F9C" loading="lazy"></figure>
<p>我们设置按钮的 <code>Cloumn</code>的宽度为 <code>200</code>。</p>
<figure data-type="image" tabindex="24"><img src="http://upload-images.jianshu.io/upload_images/545662-d677e2f527af3efe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5353EFD4-E07D-4053-BADB-68D761AB8A43" loading="lazy"></figure>
<p>显示效果似乎还是不足，原因是 80的宽度不足以正常的显示出来。</p>
<p>设置 <code>ActionTableCellView</code>中按钮的宽度都为 <code>100</code>。</p>
<p>我们给 <code>DateTableCellView</code>连接 <code>label</code>的属性用于设置时间。</p>
<pre><code class="language-swift">@IBOutlet weak var dateLabel: NSTextField!
</code></pre>
<p>我们分别给 <code>ActionTableCellView</code>两个自定义控件设置圆角和背景颜色。</p>
<pre><code class="language-swift">@IBOutlet weak var deleteItemView: SideMenuItemView!
@IBOutlet weak var lookItemView: SideMenuItemView!
</code></pre>
<figure data-type="image" tabindex="25"><img src="http://upload-images.jianshu.io/upload_images/545662-cce11e37c8d746b1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="02DC506D-3B0A-49A7-BAF1-4AC5ED6137DC" loading="lazy"></figure>
<p>我们的列表的样式已经基本上搭建完毕了。</p>
<h3 id="请求-jekyll的-post文章的列表">请求 <code>Jekyll</code>的 <code>Post</code>文章的列表。</h3>
<p><a href="http://sbdoc.cn/share/share.html#594348153c82962eab2af2a3">获取 Post 文章列表请求详情</a>。</p>
<p>我们新建一个 <code>GetPostListApi</code>类用于获取文章页列表。</p>
<p>我们新建一个类 <code>PostDetail</code>用于显示文章的信息详情。</p>
<pre><code class="language-swift">class PostDetail: Mappable {
  var path:String?
  var url:String?
  var id:String?
  var collection:String?
  var relativePath:String?
  var draft:Bool = false
  var categories:[String] = []
  var title:String?
  var date:String?
  var slug:String?
  var ext:String?
  var tags:[String] = []
  var layout:String?
  var httpURL:String?
  var apiURL:String?
  var name:String?
  required init?(map: Map) {

  }
  func mapping(map: Map) {
      path &lt;- map[&quot;path&quot;]
      url &lt;- map[&quot;url&quot;]
      id &lt;- map[&quot;id&quot;]
      collection &lt;- map[&quot;collection&quot;]
      relativePath &lt;- map[&quot;relative_path&quot;]
      draft &lt;- map[&quot;draft&quot;]
      categories &lt;- map[&quot;categories&quot;]
      title &lt;- map[&quot;title&quot;]
      date &lt;- map[&quot;date&quot;]
      slug &lt;- map[&quot;slug&quot;]
      ext &lt;- map[&quot;ext&quot;]
      tags &lt;- map[&quot;tags&quot;]
      layout &lt;- map[&quot;layout&quot;]
      httpURL &lt;- map[&quot;http_url&quot;]
      apiURL &lt;- map[&quot;api_url&quot;]
      name &lt;- map[&quot;name&quot;]
  }

}
</code></pre>
<p>我没有找到 <a href="https://github.com/Hearst-DD/ObjectMapper/">ObjectMapper</a>直接转成 模型数组的，应该需要自己单独封装添加数组里面，但是却无意发现了这个。</p>
<figure data-type="image" tabindex="26"><img src="http://upload-images.jianshu.io/upload_images/545662-532f3c1725156800.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="30C53E57-9AE4-43C3-B8E3-E29F9349F8A9" loading="lazy"></figure>
<p>官方建议我们使用 <code>AlamofireObjectMapper</code>这个库，看了文档确实比较简单，我们就用这个库替换掉 <code>Alamofire</code>和 <code>ObjectMapper</code>。</p>
<pre><code class="language-swift">class GetPostListApi {
    func loadRequest(success:GetPostListApiSuccessCompletionHandle?, failure:GetPostListApiFailureCompletionHandle?) {
        let URL = &quot;http://localhost:4000/_api/collections/posts/entries&quot;
        Alamofire.request(URL).responseArray { (response:DataResponse&lt;[PostDetail]&gt;) in
            if let list = response.value {
                self.completionHandle(success: success, failure: nil, postList: list, error: nil)
            } else {
                self.completionHandle(success: nil, failure: failure, postList: nil, error: response.error)
            }
        }
    }
    
    func completionHandle(success:GetPostListApiSuccessCompletionHandle?, failure:GetPostListApiFailureCompletionHandle?, postList:[PostDetail]?, error:Error?) {
        if let success = success , let postList = postList {
            success(postList)
        } else if let failure = failure {
            failure(error)
        }
    }

}
</code></pre>
<p>写到这里，我们会发现 <code>GetPostListApi</code>这个类和 <code>GetConfigurationApi</code>有太多的相似代码。我们不妨创建一个 <code>BaseRequestApi</code>的请求子类去掉一些多余的代码。</p>
<p>我们现在请求的地址是基于 <code>http://localhost:4000/_api/</code>这个地址，大部分的 <code>Jekyll</code>本地都是 <code>4000</code>端口也可能是其他的。</p>
<p>我们就在 <code>BaseRequestApi</code>定义一个 <code>URL</code>的变量默认为 <code>http://localhost:4000/_api/</code>。</p>
<p>为了能够请求到数据，我们创建一个发起请求的方法。</p>
<p>我们发起请求需要完整的请求地址我们新建一个方法传递 <code>http://localhost:4000/_api/</code>的后缀。</p>
<pre><code class="language-swift">func URLPath() -&gt; String {
    return &quot;&quot;
}
</code></pre>
<p>我们新建一个方法用于拼接完整的请求地址。</p>
<pre><code class="language-swift">func URLFullPath() -&gt; String {
    guard self.URLPath().characters.count &gt; 0 else {
        return self.URL
    }
    return &quot;\(self.URL)/\(self.URLPath())&quot;
}
</code></pre>
<p>当后缀是空字符串的时候我们不拼接。</p>
<h3 id="关于泛型参数">关于泛型参数</h3>
<p>对于 <code>泛型参数</code>在 <code>OC</code>和 <code>Swift</code>一直没有明白过来，也一直掌握精髓，到现在都不会用。</p>
<p>现在要封装请求，对于代理回调应该需要用上 <code>泛型参数</code>,研究一下。</p>
<p>参考资料:</p>
<ul>
<li><a href="http://www.swift51.com/swift3.0/chapter3/08_Generic_Parameters_and_Arguments.html">泛型参数（Generic Parameters and Arguments)</a>。</li>
<li><a href="http://www.jianshu.com/p/935c6bdbab5e">swift3.0：associatedtype</a>。</li>
</ul>
<p>我们获取数据主要分为两种，一种是对象类型，一种是数组对象类型。</p>
<p>我们新建一个请求协议。</p>
<pre><code class="language-swift">protocol BaseRequestProtocol {
    associatedtype R:BaseMappable
    func loadObjectRequest(success:BaseRequestResponseObjectCompletionHandle&lt;R&gt;, failure:BaseRequestFailureCompletionHandle)
    func loadArrayRequest(success:BaseRequestResponseArrayCompletionHandle&lt;R&gt;, failure:BaseRequestFailureCompletionHandle)
}
</code></pre>
<pre><code class="language-swift">typealias BaseRequestResponseObjectCompletionHandle&lt;T:BaseMappable&gt; = (_ model:T) -&gt; Void
typealias BaseRequestResponseArrayCompletionHandle&lt;T:BaseMappable&gt; = (_ models:[T]) -&gt; Void
typealias BaseRequestFailureCompletionHandle = (_ error:Error) -&gt; Void
</code></pre>
<p>我们让请求的基类 <code>BaseRequestApi</code>实现 <code>BaseRequestProtocol</code>的协议。</p>
<pre><code class="language-swift">class BaseRequestApi&lt;T:BaseMappable&gt;: BaseRequestProtocol
</code></pre>
<p>我们实现一下 <code>BaseRequestProtocol</code>的方法。</p>
<pre><code class="language-swift">func loadObjectRequest(success: @escaping (T) -&gt; Void, failure: @escaping (Error?) -&gt; Void) {
    Alamofire.request(self.URLFullPath()).responseObject { (response:DataResponse&lt;R&gt;) in
        guard let value = response.value else {
            failure(response.error)
        }
        success(value)
    }
}
</code></pre>
<p>我们返回确保返回的对象存在，当不存在就返回错误信息。</p>
<pre><code class="language-swift">public var error: Error? { return result.error }
</code></pre>
<p>因为 <code>error</code>可能不存在，我们就回调 <code>BaseRequestFailureCompletionHandle</code>设置可选型。</p>
<h3 id="关于-escaping">关于 <code>@escaping</code></h3>
<p>我们在网络请求完成之后进行回调编译器会提示我们加上 <code>@escaping</code>。关于 <code>@escaping</code>我们可以参考下面资料。</p>
<p>参考资料: <a href="http://www.jianshu.com/p/73bd0633ab00">swift3.0中@escaping 和 @noescape 的含义</a>。</p>
<p>看过资料我们可以知道，系统默认是 <code>@noescape</code>。只要被 <code>@noescape</code>标记的 <code>闭包</code>我们都是不需要关心内存管理的。</p>
<p>但是如果在方法执行完毕才执行 <code>闭包</code>我们就需要用 <code>@escaping</code>标识，这样系统自动在调用时候提示用户对于直接使用 <code>self</code>进行内存管理。</p>
<pre><code class="language-swift">func loadArrayRequest(success: @escaping ([T]) -&gt; Void, failure: @escaping BaseRequestFailureCompletionHandle) {
    Alamofire.request(self.URLFullPath()).responseArray { (response:DataResponse&lt;[R]&gt;) in
        guard let value = response.value else {
            failure(response.error)
            return
        }
        success(value)
    }
}

func loadObjectRequest(success: @escaping (T) -&gt; Void, failure: @escaping (Error?) -&gt; Void) {
    Alamofire.request(self.URLFullPath()).responseObject { (response:DataResponse&lt;R&gt;) in
        guard let value = response.value else {
            failure(response.error)
            return
        }
        success(value)
    }
}
</code></pre>
<p>我们现在的请求基类基本上已经可以正常的运行了,我们已经迫不及待的准备尝试一下。</p>
<h3 id="精简请求子类">精简请求子类</h3>
<p>我们设置 <code>GetConfigurationApi</code>父类为 <code>BaseRequestApi</code>。</p>
<pre><code class="language-swift">class GetConfigurationApi: BaseRequestApi&lt;JekyllConfiguration&gt; {
    override func URLPath() -&gt; String {
        return &quot;configuration&quot;
    }
}
</code></pre>
<p>我们此时子类的代码就变成这么的简单。但是现在有一个问题就是我们配置的数据在子数据里面。</p>
<p>我们需要使用 <code>Path</code>进行获取，我们就为 <code>BaseRequestApi</code>设置一个属性可以让外接设置 <code>Path</code>。</p>
<pre><code class="language-swift">var responseKeyPath:String?
</code></pre>
<pre><code class="language-swift">class GetConfigurationApi: BaseRequestApi&lt;JekyllConfiguration&gt; {
    override func URLPath() -&gt; String {
        return &quot;configuration&quot;
    }
    
    var responseKeyPath: String? = &quot;content&quot;
}
</code></pre>
<p>此时我们会受到编译器通知我们的错误。</p>
<figure data-type="image" tabindex="27"><img src="http://upload-images.jianshu.io/upload_images/545662-044ef315c3eed9e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="795C05DA-D33F-4B3E-96E1-7661DE196969" loading="lazy"></figure>
<h3 id="cannot-override-with-a-stored-property">cannot override with a stored property</h3>
<p>参考资料:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/37405351/how-can-i-override-this-swift-property">How can I override this Swift property?</a></li>
</ul>
<pre><code class="language-swift">override var responseKeyPath: String? {
    get {
        return &quot;content&quot;
    }
    set {
        self.responseKeyPath = newValue
    }
}
</code></pre>
<p>我们此时在 <code>ViewController</code>的请求代码可以设置如下。</p>
<pre><code class="language-swift">let getConfigurationApi = GetConfigurationApi()
getConfigurationApi.loadObjectRequest(success: { [weak self] (configuration) in
    guard let title = configuration.title else {
        return
    }
    self?.navigationBar.blogMenuItem.itemTitle.stringValue = title
}, failure: { (error) in })
</code></pre>
<p>我们就可以请求到数据了，是不是代码更加的简洁了呢？</p>
<h3 id="请求文章列表">请求文章列表</h3>
<p>我们配置 <code>GetPostListApi</code>类的代码如下。</p>
<pre><code class="language-swift">class GetPostListApi: BaseRequestApi&lt;PostDetail&gt; {
    override func URLPath() -&gt; String {
        return &quot;collections/posts/entries&quot;
    }
}
</code></pre>
<p>我们在 <code>PostsView</code>新写一个方法用于获取文章列表。</p>
<pre><code class="language-swift">func loadData() {
    let api = GetPostListApi()
    api.loadArrayRequest(success: { (list:[PostDetail]) in

    }) { (error) in }
}
</code></pre>
<p>有了数据我们需要在列表里面展示出来。</p>
<p><code>BaseListView</code>作为列表的基类，我们的数据源的结构可能不太一样，我们不可能让我们自定义的数据源传入 <code>BaseListView</code>。</p>
<p>这个时候我们的 <code>泛型参数</code>又可以登场了。</p>
<p>我们给 <code>BaseListView</code>新建一个泛型参数，必须是 <code>BaseMappable</code>的子类。</p>
<pre><code class="language-swift">class BaseListView&lt;M:BaseMappable&gt;
</code></pre>
<p>我们新建一个属性存储 <code>M</code>数组，当用户重新设置就刷新表格。</p>
<pre><code class="language-swift">var models:[M] = [] {
    didSet {
        self.tableView.reloadData()
    }
}
</code></pre>
<h3 id="iboutlet-property-cannot-have-non-objc-class-type">@IBOutlet Property cannot have non-‘@objc’ class type</h3>
<p>此时我们已经收到了一个错误信息。</p>
<p>参考资料:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/32836343/generic-controller-in-swift-2-0-using-storyboards">Generic controller in swift 2.0 using storyboards</a>。</li>
</ul>
<p>查了很多的资料，这个技术难点倒是没有找到合适的方法解决。是因为 <code>@IBOutlet</code>在 <code>OC</code>里面使用的运行时，但是运行时不允许 <code>@IBOutlet</code>绑定一个泛型的对象。</p>
<p>我还尝试过在 <code>BaseListView</code>使用其他的泛型类间接代理，但是依然无法解决我们的问题。</p>
<p>我现在唯一能够想到的方案就是所谓的协议，用协议声明泛型参数。</p>
<p>我们希望别人继承我们的协议可以把数据转换成我们想要的数据。</p>
<pre><code class="language-swift">protocol BaseListViewDataSource {
    associatedtype M:BaseMappable ///&lt; 泛型类型
    static func converModels(models:[M]) -&gt; [BaseListViewDataModel] ///&lt; 将其他类型对象数组转换成BaseListViewDataModel对象数组
    static func converModel(model:M) -&gt; BaseListViewDataModel ///&lt; 将其他类型转换成BaseListViewDataModel对象
}

extension BaseListViewDataSource {
    static func converModels(models:[M]) -&gt; [BaseListViewDataModel] {
        var datas:[BaseListViewDataModel] = []
        for model in models {
            let data = self.converModel(model: model)
            datas.append(data)
        }
        return datas
    }
}

class BaseListViewDataModel {
    var title:String? ///&lt; 显示标题
    var date:String? ///&lt; 显示时间
}
</code></pre>
<p>我们 <code>PostDetail</code>实现我们刚才的协议 <code>BaseListViewDataSource</code>。</p>
<pre><code class="language-swift">static func converModel(model: PostDetail) -&gt; BaseListViewDataModel {
    let data = BaseListViewDataModel()
    data.title = model.title
    data.date = model.date
    return data
}

typealias M = PostDetail
</code></pre>
<p>我们在 <code>loadData</code>方法实现我们刚才的方法。</p>
<pre><code class="language-swift">func loadData() {
    let api = GetPostListApi()
    api.loadArrayRequest(success: { (list:[PostDetail]) in
        self.listView.models = PostDetail.converModels(models: list)
    }) { (error) in }
}
</code></pre>
<figure data-type="image" tabindex="28"><img src="http://upload-images.jianshu.io/upload_images/545662-c2af09200d7e6ceb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="36426B52-B1F6-4C1F-BE2E-77806B868657" loading="lazy"></figure>
<p>我们已经可以发现我们的界面已经可以正常的显示我们数据条数，现在剩下做的就是给我们界面正确的赋值了。</p>
<pre><code class="language-swift">public func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -&gt; NSView? {
    guard let identifier = tableColumn?.identifier else {
        return nil
    }
    let model = self.models[row]
    let view = tableView.make(withIdentifier: identifier, owner: self)
    if let iconTitle = view as? IconTitleTableCellView, let title = model.title {

    }
    return view
}
</code></pre>
<p>我们将  <code>IconTitleTableCellView</code>中 <code>configurationView</code>方法修改如下。</p>
<pre><code class="language-swift">func configurationView(title:String) {
    let configuration = SideMenuItemConfiguration(title: title, iconHex: &quot;F0F6&quot;, hidden: true, selected: false, normalColor: NSColor(red:0.267, green:0.267, blue:0.267, alpha:1.000))
    self.itemView.menuItemConfiguration = configuration
    let size = self.itemView.sizeThatFits(NSSize(width: Int.max, height: 20))
    self.itemViewWidthConstraint.constant = CGFloat(size.width)
}
</code></pre>
<pre><code class="language-swift">public func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -&gt; NSView? {
    guard let identifier = tableColumn?.identifier else {
        return nil
    }
    let model = self.models[row]
    let view = tableView.make(withIdentifier: identifier, owner: self)
    if let iconTitle = view as? IconTitleTableCellView, let title = model.title {
        iconTitle.configurationView(title: title)
    }
    return view
}
</code></pre>
<figure data-type="image" tabindex="29"><img src="http://upload-images.jianshu.io/upload_images/545662-7a858dd177d19a36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="E7D6285D-3D63-4C92-9BFF-B8DE754E48C3" loading="lazy"></figure>
<p>我们的界面就可以正常的显示标题了。同样我们我们赋值一下时间。</p>
<pre><code class="language-swift">if let dateView = view as? DateTableCellView, let date = model.date {
    dateView.dateLabel.stringValue = date
}
</code></pre>
<figure data-type="image" tabindex="30"><img src="http://upload-images.jianshu.io/upload_images/545662-074a435a0a6085a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="97394D1F-3DFC-4939-9111-283A3A18A7CB" loading="lazy"></figure>
<p>我们发现时间显示的格式不正确。我们给 <code>DateTableCellView</code>写一个转换时间格式的方法。</p>
<pre><code class="language-swift">func configuration(dateString:String) {
    let formatter = DateFormatter()
    formatter.dateFormat = &quot;yyyy-MM-dd hh:mm:ss zzzz&quot;
    guard let date = formatter.date(from: dateString) else {
        return
    }
    formatter.dateFormat = &quot;MMM dd,yyyy&quot;
    self.dateLabel.stringValue = formatter.string(from: date)
}
</code></pre>
<figure data-type="image" tabindex="31"><img src="http://upload-images.jianshu.io/upload_images/545662-511f0ec90bf527d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2D3D00B6-EC09-4A1B-9FFA-57298DBCDDBD" loading="lazy"></figure>
<p>我们看到显示竟然是中文<code>六月</code>，不是我们希望看到的 <code>Jun</code>。</p>
<h3 id="中文系统格式化时间显示英文字符">中文系统格式化时间显示英文字符</h3>
<pre><code class="language-swift">formatter.locale = Locale(identifier: &quot;en_US&quot;)
</code></pre>
<p>我们还是按照默认的比较好，我们中文用起来比较方便。</p>
<p>现在要做的就是 <code>删除</code>  <code>查看</code>两个方法了。我们封装的 <code>SideMenuItemView</code>控件是无法响应我们的事件的。</p>
<h3 id="给-nsview添加-nsgesturerecognizer事件">给 <code>NSView</code>添加 <code>NSGestureRecognizer</code>事件</h3>
<p>参考资料:</p>
<ul>
<li><a href="https://developer.apple.com/documentation/appkit/nsgesturerecognizer">NSGestureRecognizer</a>。</li>
</ul>
<figure data-type="image" tabindex="32"><img src="http://upload-images.jianshu.io/upload_images/545662-6861c654b3f7b625.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="15D2ADAE-B1B7-495C-AA6A-E7C9677CFE0D" loading="lazy"></figure>
<p>一共有五个 <code>NSGestureRecognizer</code>的子类可以使用。我们使用 <code>NSClickGestureRecognizer</code>来处理点击。</p>
<pre><code class="language-swift">func addClick() {
    let click = NSClickGestureRecognizer(target: self, action:#selector(self.clickAction))
    self.addGestureRecognizer(click)
}

func clickAction() {
}
</code></pre>
<p>我们的方法无法告诉外接什么时候点击了，如果有一个回调就好了。</p>
<pre><code class="language-swift">typealias SideMenuItemViewClickCompletionHandle = (_ view:SideMenuItemView) -&gt; Void

func addClick(completionHandle:@escaping SideMenuItemViewClickCompletionHandle) {
        self.clickCompletionHandle = completionHandle
        let click = NSClickGestureRecognizer(target: self, action:#selector(self.clickAction))
        self.addGestureRecognizer(click)
    }
    
func clickAction() {
    guard let completionHandle = self.clickCompletionHandle else {
        return
    }
    completionHandle(self)
}

var clickCompletionHandle:SideMenuItemViewClickCompletionHandle?
</code></pre>
<h3 id="删除文章">删除文章</h3>
<p>参考资料:</p>
<ul>
<li><a href="http://www.sbdoc.cn/share/share.html#594899063c82962eab2af3a7">删除文章接口</a>。</li>
</ul>
<p>我们新建一个类 <code>DeletePostDetail</code>继承与我们 <code>BaseRequestApi</code>。</p>
<pre><code class="language-swift">class DeletePostDetail: BaseRequestApi&lt;DeletePostDetailResponse&gt; {
    override func URLPath() -&gt; String {
        return &quot;collections/posts/{name}&quot;
    }
}

class DeletePostDetailResponse: BaseMappable  {
    func mapping(map: Map) {
        
    }
}
</code></pre>
<p>这样是不符合我们请求的标准的，我们的地址需要一个真实的 <code>name</code>。</p>
<p>我们就给 <code>DeletePostDetail</code>初始化带一个 <code>name</code>的参数。</p>
<pre><code class="language-swift">override func URLPath() -&gt; String {
    return &quot;collections/posts/\(self.name)&quot;
}

let name:String

init(name:String) {
    self.name = name
}
</code></pre>
<p>我们删除的请求是 <code>delete</code>请求,我们底层封装的默认为 <code>Get</code>请求，我们还需要稍微的修改一下。</p>
<pre><code class="language-swift">func requestMethod() -&gt; HTTPMethod {
    return HTTPMethod.get
}
Alamofire.request(self.URLFullPath(), method:self.requestMethod())
</code></pre>
<p>这样我们父类默认是 <code>Get</code>请求，子类如果需要 <code>delete</code>请求，我们只需要重写这个方法即可。</p>
<p>我们需要点击删除的按钮提示用户是否要删除这个文章，所以我们需要传入一个文章的文件名称。</p>
<pre><code class="language-swift">///BaseListViewDataModel类
var fileName:String? ///&lt; Markdown 的文件名称
</code></pre>
<pre><code class="language-swift">///PostDetail类
static func converModel(model: PostDetail) -&gt; BaseListViewDataModel {
    let data = BaseListViewDataModel()
    data.title = model.title
    data.date = model.date
    data.fileName = model.name
    return data
}
</code></pre>
<pre><code class="language-swift">///ActionTableCellView
var fileName:String? ///&lt; 用来知道要删除那个文件
</code></pre>
<h3 id="关于-nsalert">关于 <code>NSAlert</code></h3>
<p>对于弹出框我们可以使用 <code>NSAlert</code>控件</p>
<p>参考资料:</p>
<ul>
<li><a href="http://blog.sina.com.cn/s/blog_705998560101vo1y.html">苹果小白的学习之路--NSAlert的两种使用方法</a>。</li>
</ul>
<blockquote>
<p>在 <code>ActionTableCellView</code>类增加代码如下</p>
</blockquote>
<pre><code class="language-swift">self.deleteItemView.addClick { (view) in
    guard let fileName = self.fileName, let window = NSApplication.shared().keyWindow else {
        return
    }
    let alert = NSAlert()
    alert.messageText = &quot;确定要删除\(fileName)&quot;
    alert.beginSheetModal(for: window, completionHandler: { (response) in

    })
}
</code></pre>
<blockquote>
<p>在 <code>BaseListView</code>的 <code>public func tableView(_ tableView: NSTableView, viewFor tableColumn: NSTableColumn?, row: Int) -&gt; NSView?</code>方法 增加代码如下</p>
<pre><code class="language-swift">if let actionView = view as? ActionTableCellView {
    actionView.fileName = model.fileName
}
</code></pre>
</blockquote>
<figure data-type="image" tabindex="33"><img src="http://upload-images.jianshu.io/upload_images/545662-b822166c6369a14a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2C2B5648-FEF8-4467-B32B-121AE71C5ABF" loading="lazy"></figure>
<p>此时只有一个确定，没有取消按钮，到时候误删就 GG 了。</p>
<pre><code class="language-swift">self.deleteItemView.addClick { (view) in
    guard let fileName = self.fileName, let window = NSApplication.shared().keyWindow else {
        return
    }
    let alert = NSAlert()
    alert.messageText = &quot;确定要删除\(fileName)&quot;
    alert.addButton(withTitle: &quot;删除&quot;)
    alert.addButton(withTitle: &quot;取消&quot;)
    alert.beginSheetModal(for: window, completionHandler: { (response) in

    })
}
</code></pre>
<p>当我们点击删除按钮我们需要执行删除的请求。</p>
<pre><code class="language-swift">if response == NSAlertFirstButtonReturn {
    self.deletePost(fileName: fileName)
}
</code></pre>
<pre><code class="language-swift">func deletePost(fileName:String) {
    let api = DeletePostDetail(name: fileName)
    api.loadObjectRequest(success: { (response) in
    }) { (error) in
    }
}
</code></pre>
<p>当我们删除完毕我们需要刷新我们的表格，我就给 <code>ActionTableCellView</code>新写一个回调用于删除完毕更新表格的内容。</p>
<pre><code class="language-swift">typealias ActionTableCellViewDeleteSuccessCompletionHandle = (_ view:ActionTableCellView) -&gt; Void
</code></pre>
<pre><code class="language-swift">var deleteSuccessCompletionHandle:ActionTableCellViewDeleteSuccessCompletionHandle?
</code></pre>
<pre><code class="language-swift">func deletePost(fileName:String) {
  let api = DeletePostDetail(name: fileName)
  api.loadObjectRequest(success: { (response) in
      guard let completionHandle = self.deleteSuccessCompletionHandle else {
          return
      }
      completionHandle(self)
  }) { (error) in

  }
}
</code></pre>
<p>我们发现我们的表格并没有刷新，因为对于 <code>Delete</code>请求是没有任何信息回调的。我们只用知道状态吗是<code>200</code>就可以知道成功了。</p>
<pre><code class="language-swift">func loadObjectRequest(success: @escaping (T?) -&gt; Void, failure: @escaping (Error?) -&gt; Void) {
    Alamofire.request(self.URLFullPath(),method:self.requestMethod()).responseObject(keyPath:self.responseKeyPath) { (response:DataResponse&lt;R&gt;) in
        guard let code = response.response?.statusCode, code == 200 else {
            failure(response.error)
            return
        }
        success(response.value)
    }
}
</code></pre>
<p>当我们当识别状态吗为 <code>200</code>果然成功了。</p>
<h3 id="osx平台代码打开一个地址"><code>OSX</code>平台代码打开一个地址</h3>
<p>我们做完 <code>删除</code>功能，还剩下一个 <code>查看</code>功能，当用户点击 <code>查看</code>按钮。</p>
<p>我们给 <code>ActionTableCellView</code>新增一个方法用于配置 <code>查看</code>按钮的点击方法。</p>
<pre><code class="language-swift">func addLookView() {
    self.lookItemView.addClick { (view) in
        guard let urlString = self.httpURL, let url = URL(string: urlString)  else {
            return
        }
        NSWorkspace.shared().open(url)
    }
}
</code></pre>
<p>界面上面的搜索功能，说简单不简单，说复杂不复杂。那要你需要实现的搜索到什么程度。</p>
<p>参考资料:</p>
<ul>
<li><a href="http://junshang.me/9-37-12-%E5%85%B3%E4%BA%8E%E6%90%9C%E7%B4%A2%E5%87%BA%E6%9D%A5%E7%9A%84%E5%86%85%E5%AE%B9%E6%A0%B9%E6%8D%AE%E6%9D%83%E9%87%8D%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F/">关于搜索出来的内容根据权重进行排序</a>。</li>
</ul>
<p>我们做先做一个简单版本的，就直接匹配就好了。</p>
<p>我们给 <code>BaseListView</code>增加一个搜索过滤之后的数组。</p>
<pre><code class="language-swift">private var filterModels:[BaseListViewDataModel] = []
</code></pre>
<p>我们用 <code>filterModels</code>来作为我们暂时数据的数据源。</p>
<p>我们给 <code>ContentHeaderValue1</code>关联一下搜索输入框。</p>
<pre><code class="language-swift">@IBOutlet weak var searchFiled: NSTextField!
</code></pre>
<p>我们设置一下 <code>searchFiled</code>代理对象为 <code>BaseListView</code>。</p>
<pre><code class="language-swift">@IBOutlet weak var header: ContentHeader! {
    didSet {
        guard let headerValue1 = self.header.headerContent as? ContentHeaderValue1 else {
            return
        }
        headerValue1.searchFiled.delegate = self
    }
}
</code></pre>
<p>经过研究如果要监听输入框文字变化需要用通知。我们声明一个方法监听输入框通知变化。</p>
<pre><code class="language-swift">func searchFiledTextChanged(notification:Notification) {
    guard let filed = notification.object as? NSTextField else {
        return
    }

    guard let headerValue1 = self.header.headerContent as? ContentHeaderValue1 else {
        return
    }

    guard filed == headerValue1.searchFiled else {
        return
    }

}
</code></pre>
<p>我们新建一个方法处理字符串改变过滤数据源。</p>
<pre><code class="language-swift">func filterDataModels(filter:String) {
    self.filterModels.removeAll()
    if filter.characters.count == 0 {
        self.filterModels.append(contentsOf: self.models)
    } else {
        for model in self.models {
            if let _ = model.title?.range(of: filter) {
                self.filterModels.append(model)
            }
        }
    }
    self.tableView.reloadData()
}
</code></pre>
<p>我们在 <code>searchFiledTextChanged</code>方法里面调用我们刚才的过滤的方法。</p>
<pre><code class="language-swift">func searchFiledTextChanged(notification:Notification) {
    guard let filed = notification.object as? NSTextField else {
        return
    }

    guard let headerValue1 = self.header.headerContent as? ContentHeaderValue1 else {
        return
    }

    guard filed == headerValue1.searchFiled else {
        return
    }
    self.filterDataModels(filter: filed.stringValue)
}
</code></pre>
<p>因为我们初始化的时候，我们还没有输入任何的搜索字符串，设置 <code>models</code>我们要初始化我们的 <code>filterDataModels</code>数组。</p>
<p>我们新建一个方法用于初始化 <code>filterDataModels</code>。</p>
<pre><code class="language-swift">func settingFilterModels() {
    guard let headerValue1 = self.header.headerContent as? ContentHeaderValue1 else {
        return
    }
    let filterText = headerValue1.searchFiled.stringValue
    self.filterDataModels(filter: filterText)
}
</code></pre>
<p>我们在设置 <code>models</code>时候进行重新设置 <code>filterModels</code>。</p>
<p>我们在 <code>header</code>的方法 <code>didSet</code>进行注册通知。</p>
<figure data-type="image" tabindex="34"><img src="http://upload-images.jianshu.io/upload_images/545662-3bd9de09862d9ee2.gif?imageMogr2/auto-orient/strip" alt="201706201728" loading="lazy"></figure>
<p>我们的搜索功能已经可以用了。</p>
<h3 id="deinit方法"><code>deinit</code>方法</h3>
<p>我们在 <code>Objective-C</code>开发里面经常在 <code>dealloc</code>注销通知，减少资源消耗。我们在 <code>Swift</code>里面可以使用 <code>deinit</code>函数。</p>
<p>参考资料:</p>
<ul>
<li><a href="http://swifter.tips/retain-cycle/">内存管理，WEAK 和 UNOWNED</a></li>
</ul>
<pre><code class="language-objc">    deinit {
        NotificationCenter.default.removeObserver(self)
    }
</code></pre>
<p>刚才无意间发现下面系统自带的方法</p>
<pre><code class="language-swift">extension NSObject {

    open func controlTextDidBeginEditing(_ obj: Notification)

    open func controlTextDidEndEditing(_ obj: Notification)

    open func controlTextDidChange(_ obj: Notification)
}
</code></pre>
<p>这是 <code>NSObject</code>的扩展，我们去掉我们注册的通知，用 <code>controlTextDidChange</code>方法试一下。</p>
<p>参考资料：</p>
<ul>
<li><a href="http://www.baiyuxiong.com/?p=1212">swift os x 响应 NSTextField 的controlTextDidChange事件</a></li>
</ul>

                </div>
                <div class="clear"></div>
              </section>
            </article>
            <div class="clear"></div>

            <section class="related section">
              
              <article class="prev grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-19.png');"></div>
                 <a href="https://joserccblog.github.io/post/2017-11-25-jekyll-admin-mac-开发纪要-左侧菜单栏" class="full-link"></a>
                 <div class="info">
                  <time datetime="2017-11-25">2017-11-25</time>
                  <h4 class="title white no-margin">Jekyll-Admin-Mac-开发纪要-左侧菜单栏</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://joserccblog.github.io/media/images/left-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              
              
              <article class="next grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-17.png');"></div>
                 <a href="https://joserccblog.github.io/post/2017-11-25-jekyll-admin-mac-模板处理" class="full-link"></a>
                 <div class="info">
                  <time datetime="2017-11-25">2017-11-25</time>
                  <h4 class="title white no-margin">Jekyll-Admin-Mac-模板处理</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://joserccblog.github.io/media/images/right-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              

                <div class="clear"></div>
            </section>

              <div class="clear"></div>

              <div id="comments" class="bg-white hosted ">

              
                
                
                  <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css">
<script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>

<div id="disqus_thread"></div>

<script>

var options = {
  shortname: 'josercc',
  apikey: 'DBJHHPsqZBT5EUYFyQmorAozkwxTDoySOnd4bmdt9G29YFySUFhFE6SLZrSCHee4',
}
if ('') {
  options.api = ''
}
var dsqjs = new DisqusJS(options)

</script>

                
              
                <div class="clear"></div>
              </div>

              <div class="clear"></div>
            </div>
          </div>
      </main>

          <footer id="footer" class="grid-container">
        <div class="widgets row gradient-effect">
            <div class="default-sidebar border-effect">
              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_epcl_posts_thumbs underline-effect">
                  <h4 class="widget-title title white bordered">最新文章</h4>
                  
                  
                  <article class="item post-0 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://joserccblog.github.io/post/apple-login-jie-ru-qian-yi-ci-shen-ru-yan-jiu" class="thumb hover-effect">
                      <span class="fullimage cover" style="display: block;background-image: url('http://ipicimage-1251019290.coscd.myqcloud.com/2019-09-18-064137.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2019-09-18">2019-09-18</time>
                      <h4 class="title usmall">
                        <a href="https://joserccblog.github.io/post/apple-login-jie-ru-qian-yi-ci-shen-ru-yan-jiu">Apple Login接入前一次深入研究</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-1 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://joserccblog.github.io/post/ji-yu-xcode11-bian-yi-de-command-line-chu-lai-de-er-jin-zhi-framework-zai-di-ban-ben-bian-yi-bao-cuo-___isplatformversionatleast" class="thumb hover-effect">
                      <span class="fullimage cover" style="display: block;background-image: url('http://ipicimage-1251019290.coscd.myqcloud.com/2019-09-16-070825.png');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2019-09-16">2019-09-16</time>
                      <h4 class="title usmall">
                        <a href="https://joserccblog.github.io/post/ji-yu-xcode11-bian-yi-de-command-line-chu-lai-de-er-jin-zhi-framework-zai-di-ban-ben-bian-yi-bao-cuo-___isplatformversionatleast">基于 Xcode11编译的 Command Line 出来的 二进制 Framework 在低版本编译报错___isPlatformVersionAtLeast</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-2 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://joserccblog.github.io/post/guan-yu-objective-c-ban-ben-de-swiftui-ku-de-zi-dong-sheng-cheng-bu-ju-de-yan-jiu-xin-de" class="thumb hover-effect">
                      <span class="fullimage cover" style="display: block;background-image: url('data:image/jpeg;base64,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');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2019-08-29">2019-08-29</time>
                      <h4 class="title usmall">
                        <a href="https://joserccblog.github.io/post/guan-yu-objective-c-ban-ben-de-swiftui-ku-de-zi-dong-sheng-cheng-bu-ju-de-yan-jiu-xin-de">关于Objective-C版本的SwiftUI库的自动生成布局的研究心得</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_tag_cloud underline-effect">
                  <h4 class="widget-title title white bordered">标签云</h4>
                  <div class="tagcloud">
                    
                      <a href="https://joserccblog.github.io/tag/swift" class="ctag ctag-0 ctag-swift" aria-label="">Swift</a>
                    
                      <a href="https://joserccblog.github.io/tag/ios" class="ctag ctag-1 ctag-ios" aria-label="">iOS</a>
                    
                      <a href="https://joserccblog.github.io/tag/framework" class="ctag ctag-2 ctag-framework" aria-label="">Framework</a>
                    
                      <a href="https://joserccblog.github.io/tag/carthage" class="ctag ctag-3 ctag-carthage" aria-label="">Carthage</a>
                    
                      <a href="https://joserccblog.github.io/tag/cocoapods" class="ctag ctag-4 ctag-cocoapods" aria-label="">Cocoapods</a>
                    
                      <a href="https://joserccblog.github.io/tag/masonry" class="ctag ctag-5 ctag-masonry" aria-label="">Masonry</a>
                    
                      <a href="https://joserccblog.github.io/tag/yue-shu-chong-tu" class="ctag ctag-6 ctag-yue-shu-chong-tu" aria-label="">约束冲突</a>
                    
                      <a href="https://joserccblog.github.io/tag/uistackview" class="ctag ctag-7 ctag-uistackview" aria-label="">UIStackView</a>
                    
                      <a href="https://joserccblog.github.io/tag/ios11" class="ctag ctag-8 ctag-ios11" aria-label="">iOS11</a>
                    
                      <a href="https://joserccblog.github.io/tag/sheng-huo" class="ctag ctag-9 ctag-sheng-huo" aria-label="">生活</a>
                    
                      <a href="https://joserccblog.github.io/tag/zhi-shi-dian" class="ctag ctag-10 ctag-zhi-shi-dian" aria-label="">知识点</a>
                    
                      <a href="https://joserccblog.github.io/tag/testflight" class="ctag ctag-11 ctag-testflight" aria-label="">TestFlight</a>
                    
                      <a href="https://joserccblog.github.io/tag/guo-ji-hua" class="ctag ctag-12 ctag-guo-ji-hua" aria-label="">国际化</a>
                    
                      <a href="https://joserccblog.github.io/tag/xcode9" class="ctag ctag-13 ctag-xcode9" aria-label="">Xcode9</a>
                    
                      <a href="https://joserccblog.github.io/tag/zi-dong-hua" class="ctag ctag-14 ctag-zi-dong-hua" aria-label="">自动化</a>
                    
                      <a href="https://joserccblog.github.io/tag/hei-mo-fa" class="ctag ctag-15 ctag-hei-mo-fa" aria-label="">黑魔法</a>
                    
                      <a href="https://joserccblog.github.io/tag/ota" class="ctag ctag-16 ctag-ota" aria-label="">OTA</a>
                    
                      <a href="https://joserccblog.github.io/tag/xctest" class="ctag ctag-17 ctag-xctest" aria-label="">XCTest</a>
                    
                      <a href="https://joserccblog.github.io/tag/appstore" class="ctag ctag-18 ctag-appstore" aria-label="">AppStore</a>
                    
                      <a href="https://joserccblog.github.io/tag/mac" class="ctag ctag-19 ctag-mac" aria-label="">Mac</a>
                    
                      <a href="https://joserccblog.github.io/tag/gan-xiang" class="ctag ctag-20 ctag-gan-xiang" aria-label="">感想</a>
                    
                      <a href="https://joserccblog.github.io/tag/xcode" class="ctag ctag-21 ctag-xcode" aria-label="">Xcode</a>
                    
                      <a href="https://joserccblog.github.io/tag/svn" class="ctag ctag-22 ctag-svn" aria-label="">SVN</a>
                    
                      <a href="https://joserccblog.github.io/tag/xiang-fa" class="ctag ctag-23 ctag-xiang-fa" aria-label="">想法</a>
                    
                      <a href="https://joserccblog.github.io/tag/di-san-fang-ku" class="ctag ctag-24 ctag-di-san-fang-ku" aria-label="">第三方库</a>
                    
                      <a href="https://joserccblog.github.io/tag/mo-kuai-hua" class="ctag ctag-25 ctag-mo-kuai-hua" aria-label="">模块化</a>
                    
                      <a href="https://joserccblog.github.io/tag/c" class="ctag ctag-26 ctag-c" aria-label="">C</a>
                    
                      <a href="https://joserccblog.github.io/tag/autolayout" class="ctag ctag-27 ctag-autolayout" aria-label="">AutoLayout</a>
                    
                      <a href="https://joserccblog.github.io/tag/xib" class="ctag ctag-28 ctag-xib" aria-label="">Xib</a>
                    
                      <a href="https://joserccblog.github.io/tag/clang-format" class="ctag ctag-29 ctag-clang-format" aria-label="">Clang Format</a>
                    
                      <a href="https://joserccblog.github.io/tag/objetive-c" class="ctag ctag-30 ctag-objetive-c" aria-label="">Objetive-C</a>
                    
                      <a href="https://joserccblog.github.io/tag/zhou-bao" class="ctag ctag-31 ctag-zhou-bao" aria-label="">周报</a>
                    
                      <a href="https://joserccblog.github.io/tag/jekyll" class="ctag ctag-32 ctag-jekyll" aria-label="">Jekyll</a>
                    
                      <a href="https://joserccblog.github.io/tag/server" class="ctag ctag-33 ctag-server" aria-label="">Server</a>
                    
                      <a href="https://joserccblog.github.io/tag/uibarbuttonitem" class="ctag ctag-34 ctag-uibarbuttonitem" aria-label="">UIBarButtonItem</a>
                    
                      <a href="https://joserccblog.github.io/tag/uitextfiled" class="ctag ctag-35 ctag-uitextfiled" aria-label="">UITextFiled</a>
                    
                  </div>
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="epcl_about-2" class="widget widget_epcl_about underline-effect">
                  <h4 class="widget-title title white bordered">关于我</h4>
                  <div class="avatar">
                    <a href="" class="translate-effect thumb"><span class="fullimage cover" style="background-image: url(https://joserccblog.github.io/images/avatar.png);"></span></a>
                  </div>
                  <div class="info">
                    <h4 class="title small author-name gradient-effect no-margin"><a href="">君赏博客</a></h4>
                    <p class="founder">2012年从事iOS开发，资深iOS开发菜鸟，目前在环球易购占坑。喜欢研究偏门技术，喜欢自动化编程，喜欢研究小软件提高编程效率</p>
                    <div class="social">
                      
                          
                            <a href="https://github.com/josercc" class="translate-effect" target="_blank"><i class="fa fa-github"></i></a>
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </div> 
                  </div>
                  <div class="clear"></div>
                  </section>
              </div>

            </div>
            <div class="clear"></div>
        </div>

        <div class="logo">
          <a href="https://joserccblog.github.io"><img class="" src="https://joserccblog.github.io/media/images/logo.png" alt=""></a>
        </div>
        <p class="published border-effect">
          ©2019 共 94 篇文章
          <br/>
          Theme <a href="https://gridea.dev/" target="_blank">「breek」</a> Powered by <a href="https://gridea.dev/" target="_blank">「Gridea」</a>
        </p>
        
        <a href="javascript:void(0)" id="back-to-top" class="epcl-button dark" style="display:none">
          <i class="fa fa-arrow"></i>
        </a>
    </footer>
    <div class="clear"></div>

      <script type="text/javascript">
       jQuery(document).ready(function($){
          $("photos img").each(function(){
              var _a = $("<a></a>").attr("href",this.src);
              $(this).wrap("<div class='photo'></div>").wrap(_a);
          })
          $("figure img").each(function(){
              var _b = $("<a></a>").attr("href",this.src);
              $(this).wrap(_b);
          })
          isImgLoad(function(){
            var photos = document.querySelector('photos');
            if(photos){
              waterfall(photos);
            }
            $(window).resize(function() {
             if(photos){
                  waterfall(photos);
            }
          });
        });
        var t_img;
        var isLoad = true;
        function isImgLoad(callback){
          $('photos img').each(function(){
            if(this.height === 0){
              isLoad = false;
              return false;
            }
          });
          if(isLoad){
            clearTimeout(t_img);
            callback();
          }else{
            isLoad = true;
            t_img = setTimeout(function(){
              isImgLoad(callback);
            },500);
          }
        }
      });
      </script>

    </div>
    <!-- end: #wrapper -->
  </body>
</html>
