<!DOCTYPE html>
<html>
  <head>
      
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- ç™¾åº¦éªŒè¯ -->
<meta name="baidu-site-verification" content="1IkquSGR9Z"/>

<title>å›èµåšå®¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡"/>
<meta name="keywords" content="2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://joserccblog.github.io/favicon.ico">

<link rel="stylesheet" href="https://joserccblog.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://joserccblog.github.io/media/scripts/_vendors/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->

    

    
        <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css" />
    


<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>

<link crossorigin="anonymous" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" href="https://lib.baomitu.com/font-awesome/5.8.1/css/all.min.css" rel="stylesheet">

  </head>
  <body>
  
<div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://joserccblog.github.io/media/images/avatar.png" alt="å›èµåšå®¢" class="img-responsive">
        </figure>
        <h3 class="heading">ABOUT ME</h3>
        <h2>å›èµåšå®¢</h2>
        <p>2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">
        <div class="fh5co-box">
            <h3 class="heading">æœç´¢</h3>
            <form action="#">
                <div class="form-group">
                    <input type="text" id="bdcsMain" class="form-control" placeholder="è¾“å…¥å…³é”®å­—">
<!--                    <button type="submit" class="btn btn-sm btn-warning" style="margin-top: 6px; width: 100%">ç‚¹å‡»æœç´¢</button>-->
                </div>
            </form>
        </div>
        <div class="fh5co-box">
            <h3 class="heading">æ ‡ç­¾</h3>
            <ul>
                
                    <li><a href="https://joserccblog.github.io/tag/ilTRbUeIh">OCUI</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/qFaqD3-EnQ">é“¾å¼è¯­æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/swift">Swift</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ios">iOS</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/framework">Framework</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/carthage">Carthage</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/cocoapods">Cocoapods</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/masonry">Masonry</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/yue-shu-chong-tu">çº¦æŸå†²çª</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uistackview">UIStackView</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ios11">iOS11</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/sheng-huo">ç”Ÿæ´»</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zhi-shi-dian">çŸ¥è¯†ç‚¹</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/testflight">TestFlight</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/guo-ji-hua">å›½é™…åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xcode9">Xcode9</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zi-dong-hua">è‡ªåŠ¨åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/hei-mo-fa">é»‘é­”æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ota">OTA</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xctest">XCTest</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/appstore">AppStore</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/mac">Mac</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/gan-xiang">æ„Ÿæƒ³</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xcode">Xcode</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/svn">SVN</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xiang-fa">æƒ³æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/di-san-fang-ku">ç¬¬ä¸‰æ–¹åº“</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/mo-kuai-hua">æ¨¡å—åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/c">C</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/autolayout">AutoLayout</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xib">Xib</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/clang-format">Clang Format</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/objetive-c">Objetive-C</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zhou-bao">å‘¨æŠ¥</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/jekyll">Jekyll</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/server">Server</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uibarbuttonitem">UIBarButtonItem</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uitextfiled">UITextFiled</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                         >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                         >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                         >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                         >
                            å…³äº
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/contact/"
                         >
                            è”ç³»ä½œè€…
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://joserccblog.github.io">å›èµåšå®¢ </a>
                </h1>
            </div>
        </div>
    </div>
</header>


<!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
<!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

  <div class="container-fluid">
      <div class="row fh5co-post-entry single-entry">
          <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
              <figure class="animate-box">
                  
                      <img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-17.png" alt="Jekyll-Admin-Mac-æ¨¡æ¿å¤„ç†" class="img-responsive">
                  
              </figure>
              <span class="fh5co-meta animate-box">
                  
                      <div class="tag-container">
                          
                              <a href="https://joserccblog.github.io/tag/swift" class="tag">Swift, </a>
                          
                              <a href="https://joserccblog.github.io/tag/mac" class="tag">Mac, </a>
                          
                              <a href="https://joserccblog.github.io/tag/jekyll" class="tag">Jekyll, </a>
                          
                      </div>
                  
              </span>
              <h2 class="fh5co-article-title animate-box">Jekyll-Admin-Mac-æ¨¡æ¿å¤„ç†</h2>
              <span class="fh5co-meta fh5co-date animate-box">2017-11-25</span>

              <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                  <div class="row">
                      <div class="col-md-12 animate-box post-content">
                          <p> <p>æœ¬æ–‡<code>5600</code>å­—å¤§çº¦éœ€è¦èŠ±è´¹15åˆ†é’Ÿé˜…è¯»ï¼Œæ–‡ç« å›¾ç‰‡è¿‡å¤šï¼Œå»ºè®® <code>wifi</code>ç¯å¢ƒé˜…è¯»ã€‚</p>
<p>[TOC]</p>
<h3 id="åˆ¶ä½œå¯¼èˆªæ¡">åˆ¶ä½œå¯¼èˆªæ¡</h3>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« æ‰€è¯´ï¼Œæˆ‘ä»¬å·²ç»åšå‡ºäº†ä¾§è¾¹æ çš„æ•ˆæœäº†ã€‚</p>
<p><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-061211.png" alt="CA8ACEBA-C382-47CB-8897-61B6393AA27E"></p>
<p>ä¸Šå›¾æ˜¯å³ä¾§çš„å¯¼èˆªæ¡ï¼Œè™½ç„¶å†…å®¹å¾ˆå°‘ï¼Œä½†æ˜¯ç¡®å®ä¸€ç›´æ‚¬æµ®åœ¨æœ€ä¸Šå±‚çš„ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±» <code>NavigationBar</code>ç±»ç»§æ‰¿äºæˆ‘ä»¬çš„ <code>BaseView</code>ï¼Œæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ª <code>NavigationBar.xib</code>ã€‚</p>
<p>å› ä¸º <code>NavigationBar</code>é«˜åº¦ä¸º <code>75</code>æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å¸ƒå±€è¦è®©å®½åº¦è¿›è¡Œè‡ªé€‚åº”ã€‚</p>
<p>æˆ‘ä»¬æ‹–æ‹½ä¸€ä¸ª <code>NSView</code>ç»§æ‰¿ä¸ <code>SideMenuItemView</code>,å³ä¾§æ˜¾ç¤ºå½“å‰çš„ç‰ˆæœ¬å·ã€‚æˆ‘ä»¬å…ˆæ‹–æ‹½ä¸€ä¸ª <code>Label</code>å…¥å±€å¦‚ä¸‹ï¼š</p>
<p><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-061212.png" alt="BF5D2639-591A-4372-98B8-699FDB785508"></p>
<p><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-061214.png" alt="349254E0-3BE6-4FC5-BEE8-265CDB9F67C5"></p>
<p>æˆ‘ä»¬è®¾ç½®æ–‡æœ¬é¢œè‰²ä¸º <code>9ea1a3</code>ï¼Œå­—ä½“<code>20</code>ï¼Œç‰ˆæœ¬æˆ‘ä»¬å°±è®¾ç½®ä¸º <code>v0.5.1</code></p>
<p>æˆ‘ä»¬å°†åˆšæ‰çš„ <code>SideMenuItemView</code>çš„å¸ƒå±€è®¾ç½®å¦‚ä¸‹ã€‚</p>
<p><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-061215.png" alt="C1A8F496-8180-43ED-8A43-96D96B808E24"></p>
<p><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-061218.png" alt="1EC16AEA-AA72-44E9-9A4D-A602737C855F"></p>
<p>æˆ‘ä»¬æ‹–æ‹½ä¸€ä¸ª <code>NSView</code>è¯•å›¾ç»§æ‰¿ä¸ <code>NavigationBar</code>æ”¾ç½®åœ¨ <code>ViewController</code>çš„è¯•å›¾ä¸Šé¢ï¼Œå¸ƒå±€è®¾ç½®å¦‚ä¸‹ã€‚</p>
<p><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-061219.png" alt="F2E08528-38E1-4595-8BDC-38738CADE656"></p>
<p><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-061221.png" alt="7DC5BD13-B9A2-45C0-9519-5B08FCE4047A"></p>
<p>æˆ‘ä»¬è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºç™½è‰²ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>NavigationBar</code>å…³è”è¯•å›¾ä¸Šé¢çš„ <code>SideMenuItemView</code>æ§ä»¶ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var blogMenuItem: SideMenuItemView!
</code></pre>
<p>æˆ‘ä»¬è®¾ç½®ä¸€ä¸‹ <code>blogMenuItem</code>çš„åŸºæœ¬å‚æ•°ã€‚</p>
<pre><code class="language-swift">required init?(coder: NSCoder) {
    super.init(coder: coder)
    self.loadXibView()
    self.blogMenuItem.iconImageView.iconHex = &quot;F015&quot;
    self.blogMenuItem.itemTitle.stringValue = &quot;æˆ‘çš„åšå®¢&quot;
}
</code></pre>
<p><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-25-61222.png" alt="6A3B9BB3-BB39-4183-BFF2-12D0208ADDB9"></p>
<p>æˆ‘ä»¬è¿è¡Œèµ·æ¥å¯ä»¥çœ‹åˆ°è¿™æ ·çš„æ•ˆæœå›¾äº†ã€‚</p>
<blockquote>
<p>âš ï¸å› ä¸ºä¹‹å‰æˆ‘ä»¬çš„ <code>SideMenuItemView</code>è®¾ç½®äº†èƒŒæ™¯é¢œè‰²ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ <code>SideMenuItemView.xib</code>è®¾ç½®é»˜è®¤é€æ˜å³å¯ã€‚</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-59f73f32947f244a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="B4798919-7E76-43FB-9D13-C66FC0D3F420"></p>
<p>ä¸‹é¢è¿˜æœ‰ä¸€æ¡çº¿ï¼Œé»˜è®¤æƒ…å†µæ˜¯ä¸å…è®¸å‡ºç°çš„ï¼Œæˆ‘ä»¬è®¾ç½® <code>SideMenuItemView</code>é»˜è®¤ä¸æ˜¾ç¤ºä¸‹é¢çš„çº¿ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-6e17cce313c98d85.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="BE160EC2-93EC-4C8F-82D2-E48B63CF3AB2"></p>
<p>å­—ä½“é¢œè‰²æˆ‘ä»¬è®¾ç½®é»˜è®¤ä¸º <code>444444</code>ã€‚æˆ‘ä»¬è®¾ç½® <code>SideMenuItemView</code>å›¾æ ‡é¢œè‰²ä¸º <code>444444</code>ã€‚</p>
<pre><code class="language-swift">self.blogMenuItem.iconImageView.color = NSColor(red:0.267, green:0.267, blue:0.267, alpha:1.000)
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-a4924ce94dfc6a9b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="535BA904-0C09-4B08-9720-A57003D7030B"></p>
<p>ç°åœ¨æˆ‘ä»¬çš„ç•Œé¢å·²ç»åšå‡ºæ¥äº†ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬çš„åšå®¢åå­—ä¸€èˆ¬éƒ½æ˜¯è‡ªå·±é…ç½®çš„ï¼Œæˆ‘ä»¬æƒ³è·å–æˆ‘ä»¬è‡ªå·±é…ç½®çš„åšå®¢åç§°æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬åˆ©ç”¨è·å–é…ç½®çš„è¯·æ±‚ã€‚</p>
<p><a href="http://localhost:4000/_api/configuration">http://localhost:4000/_api/configuration</a></p>
<p>æˆ‘ä»¬æ—¢ç„¶æœ‰æ¥å£äº†ï¼Œè‡ªç„¶éœ€è¦ç½‘ç»œè¯·æ±‚æ¡†æ¶äº†ï¼Œéš¾é“æˆ‘ä»¬æ˜¯è¯·æ±‚ç³»ç»Ÿçš„ <code>API</code>?</p>
<p><code>NO!NO!NO!</code></p>
<h3 id="ä½¿ç”¨ç½‘ç»œæ¡†æ¶alamofire">ä½¿ç”¨ç½‘ç»œæ¡†æ¶<code>Alamofire</code></h3>
<p>æˆ‘ä»¬ä½¿ç”¨ <code>Swift</code>æœ€å¤§çš„è¯·æ±‚æ¡†æ¶ <code>Alamofire</code>ã€‚</p>
<p><a href="https://github.com/Alamofire/Alamofire">Alamofire(Objective-C ä¸­çš„ AFNetWorking)</a></p>
<p>æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„ <code>podfile</code>æ–‡ä»¶é‡Œé¢æ·»åŠ å¦‚ä¸‹çš„ä»£ç ã€‚</p>
<pre><code class="language-ruby">pod 'Alamofire', '~&gt; 4.4'
</code></pre>
<p>è¿è¡Œå®‰è£…å‘½ä»¤</p>
<pre><code class="language-shell">pod install
</code></pre>
<p>æ—¢ç„¶æœ‰æ•°æ®æ¥å£ï¼Œæˆ‘ä»¬è‡ªç„¶éœ€è¦æœ‰ç»Ÿä¸€æ¥å£ç®¡ç†ã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ª <code>Api</code>æ–‡ä»¶å¤¹ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±» <code>GetConfigurationApi</code>ç”¨äºè·å–ç³»ç»Ÿçš„é…ç½®ã€‚</p>
<p>æˆ‘ä»¬å¯¼å…¥ <code>Alamofire</code>åº“ã€‚</p>
<pre><code class="language-swift">import Alamofire
</code></pre>
<p>æˆ‘ä»¬å†™ä¸€ä¸ª <code>loadRequest</code>æ–¹æ³•ç”¨äºå‘èµ·è¯·æ±‚ã€‚</p>
<pre><code class="language-swift">func loadRequest() {
    Alamofire.request(&quot;http://localhost:4000/_api/configuration&quot;, method: .get).responseJSON { (response) in
    }
}
</code></pre>
<blockquote>
<p>âš ï¸æˆ‘ä¹Ÿæ˜¯åˆšåˆšæ‰çœ‹çš„ <code>Alamofire API</code>çš„æ–‡æ¡£ã€‚</p>
</blockquote>
<h3 id="ä½¿ç”¨-swiftyjson">ä½¿ç”¨ <code>SwiftyJSON</code></h3>
<p>å¯¹äº <code>Model</code>æ¨¡å‹åº“æˆ‘ä»¬ä½¿ç”¨ <a href="https://github.com/SwiftyJSON/SwiftyJSON">SwiftyJSON</a>ã€‚</p>
<pre><code class="language-ruby">pod 'SwiftyJSON', '~&gt;3.1.4'l
</code></pre>
<p>å‚è€ƒèµ„æ–™: [<a href="http://tangplin.github.io/swiftyjson/">SwiftyJSONä»‹ç»</a>](http://tangplin.github.io/swiftyjson/)</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-dc441629cfe333b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ECAAD073-4B09-419D-829A-E86FD2C3468B"></p>
<p>æˆ‘ä»¬åœ¨å®˜æ–¹çš„æ–‡æ¡£é‡Œé¢å‘ç°äº† æ€ä¹ˆåœ¨ <code>Alamofire</code>ä½¿ç”¨ <code>SwiftyJSON</code>çš„ä»£ç ï¼Œæˆ‘ä»¬æ·»åŠ åˆ°æˆ‘ä»¬ä»£ç é‡Œé¢ã€‚</p>
<pre><code class="language-swift">func loadRequest() {
    Alamofire.request(&quot;http://localhost:4000/_api/configuration&quot;, method: .get).responseJSON { (response) in
        switch response.result {
            case .success(let value):
            let json = JSON(value)
            print(json)
            case .failure(let error):
            print(error)
        }
    }
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>ViewController</code>æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„è¯·æ±‚ã€‚</p>
<pre><code class="language-swift">override func viewDidLoad() {
    super.viewDidLoad()
    let getConfigurationApi = GetConfigurationApi()
    getConfigurationApi.loadRequest()
}
</code></pre>
<p>ä½†æ˜¯æˆ‘ä»¬åœ¨è¾“å‡ºçœ‹åˆ°ä¸‹é¢ä¸€æ®µä¿¡æ¯ã€‚</p>
<pre><code class="language-shell">2017-06-10 11:40:28.476420+0800 Jekyll-Admin-Mac[42248:987400] App Transport Security has blocked a cleartext HTTP (http://) resource load since it is insecure. Temporary exceptions can be configured via your app's Info.plist file.
Error Domain=NSURLErrorDomain Code=-1022 &quot;The resource could not be loaded because the App Transport Security policy requires the use of a secure connection.&quot; UserInfo={NSUnderlyingError=0x60000004e1f0 {Error Domain=kCFErrorDomainCFNetwork Code=-1022 &quot;(null)&quot;}, NSErrorFailingURLStringKey=http://localhost:4000/_api/configuration, NSErrorFailingURLKey=http://localhost:4000/_api/configuration, NSLocalizedDescription=The resource could not be loaded because the App Transport Security policy requires the use of a secure connection.}
</code></pre>
<blockquote>
<p>âœ…å› ä¸ºä» <code>iOS10å¼€å§‹è‹¹æœåœ¨é»˜è®¤æ–°å»ºå·¥ç¨‹é‡Œé¢é»˜è®¤å…³é—­äº†</code>HTTP`çš„æ”¯æŒï¼Œæˆ‘ä»¬å¼€å¯ä¸€ä¸‹ã€‚</p>
<p>å‚è€ƒèµ„æ–™: <a href="https://onevcat.com/2016/06/ios-10-ats/">å…³äº iOS 10 ä¸­ ATS çš„é—®é¢˜</a>ã€‚</p>
</blockquote>
<h3 id="ios10å¼€å¯å¯ç”¨-http-è¯·æ±‚"><code>iOS10å¼€å¯å¯ç”¨ HTTP è¯·æ±‚</code></h3>
<p>æˆ‘ä»¬æ‰“å¼€å·¥ç¨‹çš„ <code>info.plist</code>ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-7938cb9b9ee17444.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5584329D-3C64-4BA0-B067-C892A5035F64"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-cc8c25f1d932b1a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="81486772-5A9B-4B75-B129-8615C28A3919"></p>
<p>æ­¤æ—¶æˆ‘ä»¬å†æ¬¡çš„è¿è¡Œå‘ç°å·²ç»æ‰“å°å‡ºæ¥æ•°æ®äº†ã€‚</p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å‘ç° <code>SwiftyJSON</code>å¯ä»¥è½¬ <code>Model</code>æ¨¡å‹çš„åŠŸèƒ½ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è€ƒè™‘æ¢æˆå¯ä»¥è½¬æ¢æ¨¡å‹çš„åº“ <code>ObjectMapper</code>ã€‚</p>
<h3 id="ä½¿ç”¨-objectmapper">ä½¿ç”¨ <code>ObjectMapper</code></h3>
<p>å‚è€ƒèµ„æ–™: <a href="http://www.hmttommy.com/2015/11/29/swiftjson/">SwiftyJson + ObjectMapper + Argo</a>ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>GetConfigurationApi.swift</code>æ–‡ä»¶é‡Œé¢å£°æ˜ <code>JekyllConfiguration</code>ç±»ã€‚</p>
<pre><code class="language-swift">class JekyllConfiguration: Mappable {
    var title:String?
    required init?(map: Map) {
        
    }
    func mapping(map: Map) {
        title &lt;- map[&quot;title&quot;]
    }
}
</code></pre>
<p>æˆ‘ä»¬æš‚æ—¶å…ˆè·å–é…ç½®é‡Œé¢çš„ <code>title</code>ç”¨äºæˆ‘ä»¬æ˜¾ç¤ºåšå®¢çš„åå­—ã€‚</p>
<pre><code class="language-swift">func loadRequest() {
    Alamofire.request(&quot;http://localhost:4000/_api/configuration&quot;, method: .get).responseJSON { (response) in
        switch response.result {
            case .success(let value):
                guard let valueDic = value as? [String:Any] else {
                    return
                }
                guard let content = valueDic[&quot;content&quot;] as? [String:Any] else {
                    return
                }
                guard let configuration = JekyllConfiguration(JSON: content) else {
                    return
                }
                guard let titlt = configuration.title else {
                    return
                }
                print(titlt)
            case .failure(let error):
                print(error)
        }
    }
}
</code></pre>
<p>å› ä¸ºæˆ‘ä»¬çš„æ•°æ®æ˜¯åœ¨ <code>Content</code>å±‚æ¬¡çš„æ‰€ä»¥éœ€è¦å‰¥ä¸æŠ½èŒ§æ‰å¯ä»¥æ‹¿åˆ°æ•°æ®ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-4f7df82c61316148.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="591FBE71-862E-427A-BBE2-193AF0E2EF62"></p>
<p>ç”±æ­¤å¯ä»¥æˆ‘ä»¬å·²ç»å¯ä»¥æ‹¿åˆ°æ•°æ®äº†ã€‚</p>
<p>æˆ‘ä»¬å·²ç»æ‹¿åˆ°äº†æ•°æ®ï¼Œä½†æ˜¯æˆ‘ä»¬ç©¶ç«Ÿå¦‚ä½•æ‰èƒ½è®©å¤–æ¥çŸ¥é“æ•°æ®å‘¢ã€‚é‚£å°±ç”¨åˆ°äº†å›è°ƒï¼Œåœ¨ <code>Swift</code>æˆ‘ä»¬å«åšé—­åŒ…ã€‚</p>
<pre><code class="language-swift">typealias GetConfigurationApiSuccessCompletionHandle = (_ configuration:JekyllConfiguration) -&gt; Void
typealias GetConfigurationApiFailureCompletionHandle = (_ error:Error?) -&gt; Void
</code></pre>
<p>ç»™ <code>loadRequest</code>å¢åŠ ä¸¤ä¸ªå›è°ƒçš„å±æ€§ã€‚</p>
<pre><code class="language-swift">func loadRequest(success:GetConfigurationApiSuccessCompletionHandle?, failure:GetConfigurationApiFailureCompletionHandle?) {
    Alamofire.request(&quot;http://localhost:4000/_api/configuration&quot;, method: .get).responseJSON { (response) in
        switch response.result {
            case .success(let value):
                guard let valueDic = value as? [String:Any] else {
                    self.completionHandle(success: nil, failure: failure, configuration: nil, error: nil);
                    return
                }
                guard let content = valueDic[&quot;content&quot;] as? [String:Any] else {
                    self.completionHandle(success: nil, failure: failure, configuration: nil, error: nil);
                    return
                }
                guard let configuration = JekyllConfiguration(JSON: content) else {
                    self.completionHandle(success: nil, failure: failure, configuration: nil, error: nil);
                    return
                }
                self.completionHandle(success: success, failure: nil, configuration: configuration, error: nil)
            case .failure(let error):
                self.completionHandle(success: nil, failure: failure, configuration: nil, error: error)
        }
    }
}

func completionHandle(success:GetConfigurationApiSuccessCompletionHandle?, failure:GetConfigurationApiFailureCompletionHandle?, configuration:JekyllConfiguration?, error:Error?) {
    if let success = success , let configuration = configuration{
        success(configuration)
    } else if let failure = failure {
        failure(error)
    }
}

</code></pre>
<p>æœ‰äº†æ•°æ®äº†ï¼Œæˆ‘ä»¬æŠŠ <code>NavigationBar</code>ç»‘å®šåˆ° <code>ViewController</code>çš„ç±»é‡Œé¢ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var navigationBar: NavigationBar!
</code></pre>
<p>æˆ‘ä»¬åœ¨å›è°ƒçš„æ—¶å€™è®¾ç½®ä¸€ä¸‹æ ‡é¢˜ã€‚</p>
<pre><code class="language-swift">override func viewDidLoad() {
    super.viewDidLoad()
    let getConfigurationApi = GetConfigurationApi()
    getConfigurationApi.loadRequest(success: { (configuration) in
        guard let title = configuration.title else {
            return
        }
        self.navigationBar.blogMenuItem.itemTitle.stringValue = title
    }) { (error) in

    }
}
</code></pre>
<blockquote>
<p>âš ï¸å†™åˆ°è¿™é‡Œæˆ‘ä»¬å¯èƒ½å›æƒ³ï¼Œæˆ‘ä»¬åœ¨ <code>Objective-C</code>é‡Œé¢çš„ <code>Block</code>é‡Œé¢æˆ‘ä»¬éœ€è¦è§£å†³å¾ªç¯å¼•ç”¨ã€‚</p>
<p>è¿™é‡Œçš„é—­åŒ…æ˜¯å¦ä¹Ÿéœ€è¦è§£å†³å¾ªç¯å¼•ç”¨ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æ˜¯å±äºæ–¹æ³•é—­åŒ…ï¼Œç†è®ºä¸Šä¸å­˜åœ¨å¾ªç¯å¼•ç”¨çš„ï¼Œæˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šã€‚</p>
<p><a href="http://www.jianshu.com/p/cbd0b7390bcf">è§£æSwiftä¸­é—­åŒ…çš„å¾ªç¯å¼•ç”¨</a></p>
</blockquote>
<h3 id="å…³äº-swifté—­åŒ…é‡Œé¢å¾ªç¯å¼•ç”¨">å…³äº <code>Swift</code>é—­åŒ…é‡Œé¢å¾ªç¯å¼•ç”¨</h3>
<p>æˆ‘ä»¬ä¿®æ”¹è¯·æ±‚çš„ä»£ç å¦‚ä¸‹:</p>
<pre><code class="language-swift">override func viewDidLoad() {
    super.viewDidLoad()
    let getConfigurationApi = GetConfigurationApi()
    getConfigurationApi.loadRequest(success: { [weak self] (configuration) in
        guard let title = configuration.title else {
            return
        }
        self?.navigationBar.blogMenuItem.itemTitle.stringValue = title
    }) { (error) in

    }
}
</code></pre>
<p>å¯¼èˆªæ¡åšå®Œä¹‹åï¼Œæˆ‘ä»¬å‰©ä¸‹è¦åšçš„å°±æ˜¯å†…å®¹åŒºåŸŸäº†ã€‚å› ä¸º <code>æ–‡ç« </code> <code>é¡µé¢</code> <code>æ•°æ®</code>ç•Œé¢å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªæ¨¡æ¿ï¼Œæˆ‘ä»¬å°±å°è£…æˆä¸€ä¸ªæ¨¡æ¿ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-919c7a4a1a955d1f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="073F87F3-FFEE-43C4-B7C4-3B4DEFDB8030"></p>
<h3 id="å°è£…æ¨¡å—">å°è£…æ¨¡å—</h3>
<p>è¿™ä¸€å—åŒºåŸŸå¤§éƒ¨åˆ†éƒ½æ˜¯ç›¸åŒçš„ï¼Œæˆ‘ä»¬ä¹Ÿå°è£…æˆçˆ¶ç±»ï¼Œå®ç°ç”¨å­ç±»ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±»åå­—å«åš <code>ContentHeader</code>ï¼Œé«˜åº¦æˆ‘ä»¬è®¾ç½®ä¸º <code>44</code>ã€‚</p>
<p>æˆ‘ä»¬æ‹–æ‹½ä¸€ä¸ª <code>Label</code>å¸ƒå±€è®¾ç½®å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-91fc98288e22661f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="B52017E2-6F68-4B7B-A54A-93342866BAC8"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-6ce0269ee86de073.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="37C089C3-15F8-4FF2-A787-0FCD9770323C"></p>
<p>æˆ‘ä»¬è®¾ç½®å­—ä½“é¢œè‰²ä¸º <code>444444</code>ï¼Œå­—ä½“å¤§å°ä¸º <code>30</code>ã€‚</p>
<p>æˆ‘ä»¬å‘ç°æœ‰çš„è§†é¢‘å¤§è‡´åˆ†ä¸ºä¸¤ç±»ã€‚</p>
<ul>
<li><img src="http://upload-images.jianshu.io/upload_images/545662-392bdb28be37515b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="30E92ED8-5264-4E52-9FA5-6999631CCA56">
<ul>
<li>æ–‡ç« </li>
<li>é¡µé¢</li>
<li>æ•°æ®</li>
<li>æ–‡ä»¶</li>
</ul>
</li>
<li><img src="http://upload-images.jianshu.io/upload_images/545662-4c3e1f54862ce7dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="D527DD48-7D96-41BE-958C-980D5FDABD17">
<ul>
<li>é…ç½®</li>
</ul>
</li>
</ul>
<p>æˆ‘ä»¬æ”¾ç½®ä¸€ä¸ª<code>NSView</code>è¯•å›¾ç”¨äºæ‰˜ç®¡è¿™ä¸¤ç§çš„å­è¯•å›¾ï¼Œå¸ƒå±€å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-63281f4c88ceb313.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="8E9AEEC5-4B4F-4FB4-91CE-C5169D4D366B"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-6982862bbe46462c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="371F1282-C1BE-41A2-8C1B-ADDCA487CB08"></p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±» <code>ContentHeaderValue1</code>å±•ç¤ºä¸‹é¢ç•Œé¢ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-392bdb28be37515b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="30E92ED8-5264-4E52-9FA5-6999631CCA56"></p>
<p>æˆ‘ä»¬è®¾ç½® <code>ContentHeaderValue1.xib</code>çš„ <code>View</code>çš„é«˜åº¦ä¸º <code>40</code>ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>ContentHeaderValue1.xib</code>æ‹–æ‹½ä¸€ä¸ª <code>NSView</code>ç»§æ‰¿ä¸ <code>SideMenuItemView</code>ã€‚</p>
<p>å¸ƒå±€å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-f26539c359788599.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2A0D64EC-0F35-4B60-985E-55E9E1607F45"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-4b25fab0b144bd12.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="E7F69C94-2040-45A8-94A6-D5496FD0A237"></p>
<p>æˆ‘ä»¬åœ¨å³ä¾§æ‹–æ‹½ä¸€ä¸ª <code>NSTextFiled</code>ï¼Œå¸ƒå±€å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-0b351b1a51c67813.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="AD11A2AF-7869-4702-9FA4-A493CE9C9D70"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-0378c56ebb680580.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="584D9E79-B199-42F9-B611-82ED0C0C806B"></p>
<p>æˆ‘ä»¬è®¾ç½® <code>SideMenuItemView</code>çš„èƒŒæ™¯é¢œè‰²ä¸º <code>ff6e00</code>ã€‚</p>
<h3 id="è®¾ç½®-nsviewçš„åœ†è§’">è®¾ç½® <code>NSView</code>çš„åœ†è§’</h3>
<p>æˆ‘ä»¬å¯ä»¥å‘ç°ç•Œé¢å¾ˆå¤šéƒ½ç”¨åˆ°äº†åœ†è§’ï¼Œè¿™å¯¹äº <code>iOS</code>é‡Œé¢æ˜¯å¾ˆå¸¸è§çš„ã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ª <code>NSView</code>çš„åˆ†ç±»<code>NSView+CornerRadius</code>ç”¨äºç”»åœ†è§’ã€‚</p>
<pre><code class="language-swift">@IBDesignable extension NSView {
    @IBInspectable var cornerRadius:Float? {
        get {
            guard let cornerRadius = self.layer?.cornerRadius else {
                return nil
            }
            return Float(cornerRadius)
        } set {
            guard let newValue = newValue else {
                return
            }
            self.layer?.masksToBounds = true
            self.layer?.cornerRadius = CGFloat(newValue)
        }
    }
}
</code></pre>
<h3 id="è§£å†³-xibæ— æ³•æ˜¾ç¤ºè‡ªå®šä¹‰æ§ä»¶ä»-xibåŠ è½½çš„é—®é¢˜">è§£å†³ <code>Xib</code>æ— æ³•æ˜¾ç¤ºè‡ªå®šä¹‰æ§ä»¶ä» <code>Xib</code>åŠ è½½çš„é—®é¢˜ã€‚</h3>
<p>ä¹‹å‰è‡ªå®šä¹‰æ§ä»¶æ˜¯åŠ è½½ <code>Xib</code>çš„ï¼Œè¿è¡Œçš„æ—¶å€™æ˜¯å¯ä»¥å‡ºç°çš„ã€‚ä½†æ˜¯åœ¨ <code>Xib</code>æ˜¯æ— æ³•è¿›è¡Œé¢„è§ˆçš„ï¼Œæˆ‘ä»¥ä¸ºè¿™åº”è¯¥å±äºæ­£å¸¸çš„æƒ…å†µï¼Œæ¯•ç«Ÿç¨‹åºè¿˜æ²¡æœ‰è¿›è¡Œè¿è¡Œã€‚</p>
<p>å‰ä¸¤å¤©çœ‹åˆ°ä¸€ä½å¤§ç¥å†™çš„ <a href="http://blog.csdn.net/daiyibo123/article/details/49072963">iOS-StoryboadåŠ¨æ€åˆ·æ–°</a>ã€‚æˆ‘æ‰å‘ç°åŸæ¥åœ¨ <code>Xib</code>é‡Œé¢æ˜¯å¯ä»¥è¿›è¡Œå®æ—¶çœ‹åˆ°çš„ã€‚</p>
<p>åŸæ¥æˆ‘ä»¬å½“æ—¶è¿›è¡ŒåŠ è½½ <code>Xib</code>çš„è·¯å¾„ä¸æ­£ç¡®ï¼ŒåŠ è½½çš„è·¯å¾„å±äºè¿è¡Œæ—¶å€™è·¯å¾„å’Œ <code>Xib</code>æ˜¾ç¤ºåŠ è½½çš„è·¯å¾„ä¸æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>æˆ‘ä»¬ä¿®æ”¹åŠ è½½ <code>Xib</code>è·å– <code>Bundle</code>çš„æ–¹æ³•å¦‚ä¸‹:</p>
<pre><code class="language-swift">Bundle(for: type(of: self)).loadNibNamed(nibName, owner: self, topLevelObjects: &amp;views)
</code></pre>
<h3 id="objective-c-ä¸­çš„-self-class-ç”¨-swiftæ€ä¹ˆè¡¨ç¤º"><code>Objective-C</code> ä¸­çš„ <code>[self class]</code> ç”¨ <code>Swift</code>æ€ä¹ˆè¡¨ç¤º</h3>
<p>æˆ‘ä»¬ä¹‹å‰ç”¨ <code>Objective-C</code>è¿›è¡Œç»å¸¸è¿™æ ·å†™ <code>self.class</code>æˆ–è€… <code>[self class]</code>ä½†æ˜¯æˆ‘ä»¬æƒ³åœ¨ <code>Swift</code>æ€ä¹ˆè·å– <code>anyClass</code>çš„å¯¹è±¡å‘¢ã€‚</p>
<p>æ¯”å¦‚ <code>UIViewController</code>æˆ‘ä»¬ç›´æ¥å¯ä»¥ è¿™æ ·è·å– <code>UIViewController.type</code>ã€‚ä½†æ˜¯ <code>self</code>è¿™ä¸ªå…³é”®å­—æˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“æ˜¯å“ªä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬æœ€åæŸ¥è¯¢å¯ä»¥åˆ©ç”¨ä¸‹é¢ä»£ç è·å–ã€‚</p>
<pre><code class="language-swift">let anyClass = type(of:self)
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-97e2030b0fcd8eb2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5EDB0FDC-1A94-4AC3-BAE4-3901381A2C1E"></p>
<p>æ­¤æ—¶æˆ‘ä»¬åœ¨ <code>Xib</code>é‡Œé¢å·²ç»å¯ä»¥åœ¨é‡Œé¢é¢„è§ˆåˆ° <code>SideMenuItemView</code>çš„æ ·å­äº†ã€‚</p>
<h3 id="å…³äº-prepareforinterfacebuilderæ–¹æ³•">å…³äº <code>prepareForInterfaceBuilder()</code>æ–¹æ³•</h3>
<p>è¿™ä¸ªæ–¹æ³•å¯ä»¥åªåœ¨é¢„è§ˆ <code>Xib</code>çš„æ—¶å€™èµ·ä½œç”¨å¯ä»¥åšä¸€äº› <code>Moke</code>æ•°æ®ã€‚</p>
<p>å‚è€ƒèµ„æ–™: <a href="http://zhangbuhuai.com/ibinspectable-and-ibdesignable/">IBInspectableå’ŒIBDesignable</a>ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>SideMenuItemView</code>å†™ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ã€‚</p>
<pre><code class="language-swift">override func prepareForInterfaceBuilder() {
    super.prepareForInterfaceBuilder()
    self.itemTitle.stringValue = &quot;æµ‹è¯•&quot;
    self.iconImageView.iconHex = &quot;F15C&quot;
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>SideMenuView.xib</code>å·²ç»å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å†™çš„æµ‹è¯•æ•°æ®äº†ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-7065e0d1e2ab5cf6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="A64D5D7F-18BE-48D6-BE00-CC15682E6A79"></p>
<h3 id="è§£å†³-nsviewä¸èƒ½æ˜¾ç¤ºåœ†è§’çš„é—®é¢˜">è§£å†³ <code>NSView</code>ä¸èƒ½æ˜¾ç¤ºåœ†è§’çš„é—®é¢˜ã€‚</h3>
<p>æˆ‘ä»¬åˆšæ‰ <code>NSView+CornerRadius.swift</code>æ–‡ä»¶ç»™ <code>NSView</code>åšäº†ä¸€ä¸ªåˆ†ç±»ç”¨äºè®¾ç½®åœ†è§’ï¼Œæˆ‘ä»¬å‘ç°å¹¶ä¸æˆåŠŸã€‚</p>
<p>æˆ‘ä»¬éœ€è¦è®¾ç½® <code>wantsLayer</code>å±æ€§ã€‚</p>
<pre><code class="language-swift">self.wantsLayer = true
</code></pre>
<p>å‚è€ƒèµ„æ–™ : <a href="http://blog.csdn.net/u014600626/article/details/53006110">Macå¼€å‘</a>ã€‚ <a href="https://objccn.io/issue-14-5/">ä» UIKit åˆ° AppKit</a>ã€‚</p>
<blockquote>
<p>è®¾ç½®æ­¤å±æ€§çš„å€¼ä»¥<a href="https://developer.apple.com/documentation/swift/true"><code>true</code></a>å°†è§†å›¾è½¬æ¢ä¸ºå±‚æ¬¡æ”¯æŒçš„è§†å›¾ï¼Œå³è§†å›¾ä½¿ç”¨<a href="https://developer.apple.com/documentation/quartzcore/calayer"><code>CALayer</code></a>å¯¹è±¡æ¥ç®¡ç†å…¶æ¸²æŸ“çš„å†…å®¹ã€‚åˆ›å»ºå±‚æ”¯æŒçš„è§†å›¾éšå¼åœ°å¯¼è‡´è¯¥è§†å›¾ä¸‹çš„æ•´ä¸ªè§†å›¾å±‚æ¬¡ç»“æ„æˆä¸ºå±‚æ”¯æŒã€‚å› æ­¤ï¼Œè§†å›¾åŠå…¶æ‰€æœ‰å­è§†å›¾ï¼ˆåŒ…æ‹¬å­è§†å›¾çš„å­è§†å›¾ï¼‰éƒ½å°†è¢«å±‚å æ”¯æŒã€‚æ­¤å±æ€§çš„é»˜è®¤å€¼ä¸º<a href="https://developer.apple.com/documentation/swift/false"><code>false</code></a>ã€‚</p>
<p>åœ¨å±‚æ¬¡æ”¯æŒçš„è§†å›¾ä¸­ï¼Œè§†å›¾å®Œæˆçš„ä»»ä½•ç»˜å›¾éƒ½å°†ç¼“å­˜åˆ°åº•å±‚å›¾å±‚å¯¹è±¡ã€‚ç„¶åï¼Œå¯ä»¥ä»¥æ¯”æ˜¾å¼æ˜¾ç¤ºè§†å›¾å†…å®¹æ›´æœ‰æ•ˆçš„æ–¹å¼æ¥æ“çºµç¼“å­˜çš„å†…å®¹ã€‚AppKitä¼šè‡ªåŠ¨åˆ›å»ºåº•å±‚å›¾å±‚å¯¹è±¡ï¼ˆä½¿ç”¨è¯¥æ–¹æ³•ï¼‰å¹¶å¤„ç†è§†å›¾å†…å®¹çš„ç¼“å­˜ã€‚å¦‚æœè¯¥æ–¹æ³•è¿”å›ï¼Œåˆ™ä¸åº”ç›´æ¥ä¸åº•å±‚å¯¹è±¡è¿›è¡Œäº¤äº’ã€‚ç›¸åï¼Œä½¿ç”¨æ­¤ç±»çš„æ–¹æ³•å¯¹è§†å›¾åŠå…¶å›¾å±‚è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚å¦‚æœè¿”å›ï¼Œåˆ™åœ¨è§†å›¾æ–¹æ³•ä¸­ä¿®æ”¹å›¾å±‚æ˜¯åˆé€‚çš„ï¼ˆå¹¶ä¸”é€‚å½“ï¼‰ã€‚<a href="https://developer.apple.com/documentation/appkit/nsview/1483687-makebackinglayer"><code>makeBackingLayer()</code></a><a href="https://developer.apple.com/documentation/appkit/nsview/1483461-wantsupdatelayer"><code>wantsUpdateLayer</code></a><a href="https://developer.apple.com/documentation/swift/false"><code>false</code></a><code>wantsUpdateLayer</code><a href="https://developer.apple.com/documentation/swift/true"><code>true</code></a><a href="https://developer.apple.com/documentation/appkit/nsview/1483580-updatelayer"><code>updateLayer()</code></a></p>
<p>å¯¹äºå±‚æ¬¡æ”¯æŒçš„è§†å›¾ï¼Œæ‚¨å¯ä»¥é€šè¿‡å°†å±æ€§è®¾ç½®ä¸ºå¹³å¦åŒ–å±‚æ¬¡ç»“æ„ã€‚ä¸ºäº†é˜²æ­¢å­è§†å›¾å°†å…¶å†…å®¹æ”¾å¤§åˆ°æ­¤è§†å›¾çš„å›¾å±‚ä¸­ï¼Œè¯·å°†å­è§†å›¾çš„å±æ€§å€¼æ˜¾å¼è®¾ç½®ä¸ºã€‚ <a href="https://developer.apple.com/documentation/appkit/nsview/1483347-candrawsubviewsintolayer"><code>canDrawSubviewsIntoLayer</code></a><a href="https://developer.apple.com/documentation/swift/true"><code>true</code></a><code>wantsLayer</code><a href="https://developer.apple.com/documentation/swift/true"><code>true</code></a></p>
<p>é™¤äº†åˆ›å»ºå±‚æ”¯æŒçš„è§†å›¾ï¼Œæ‚¨è¿˜å¯ä»¥é€šè¿‡å°†å›¾å±‚ç›´æ¥åˆ†é…ç»™è§†å›¾çš„<a href="https://developer.apple.com/documentation/appkit/nsview/1483298-layer"><code>layer</code></a>å±æ€§æ¥åˆ›å»ºå±‚æ‰˜ç®¡è§†å›¾ã€‚åœ¨å±‚æ‰˜ç®¡è§†å›¾ä¸­ï¼Œæ‚¨è´Ÿè´£ç®¡ç†è§†å›¾çš„å›¾å±‚ã€‚è¦åˆ›å»ºå±‚æ‰˜ç®¡è§†å›¾ï¼Œæ‚¨å¿…é¡»é¦–å…ˆè®¾ç½®<code>layer</code>å±æ€§ï¼Œç„¶åå°†æ­¤å±æ€§è®¾ç½®ä¸º<a href="https://developer.apple.com/documentation/swift/true"><code>true</code></a>ã€‚è®¾ç½®è¿™äº›å±æ€§çš„å€¼çš„é¡ºåºè‡³å…³é‡è¦ã€‚</p>
<p>åœ¨å›¾å±‚æ‰˜ç®¡è§†å›¾ä¸­ï¼Œä¸è¦ä¾èµ–è§†å›¾è¿›è¡Œç»˜å›¾ã€‚åŒæ ·ï¼Œä¸è¦åœ¨åˆ†å±‚æ‰˜ç®¡è§†å›¾ä¸­æ·»åŠ å­è§†å›¾ã€‚æ ¹å±‚ï¼ˆå³ä½¿ç”¨<code>layer</code>å±æ€§è®¾ç½®çš„å±‚ï¼‰æˆä¸ºå±‚æ ‘çš„æ ¹å±‚ã€‚å¿…é¡»ä½¿ç”¨Core Animationç•Œé¢å¯¹è¯¥å›¾å±‚æ ‘è¿›è¡Œä»»ä½•æ“ä½œã€‚æ‚¨ä»ç„¶ä½¿ç”¨è¯¥è§†å›¾æ¥å¤„ç†é¼ æ ‡å’Œé”®ç›˜äº‹ä»¶ï¼Œä½†ç»˜å›¾å¿…é¡»ç”±Core Animationå¤„ç†ã€‚</p>
</blockquote>
<h3 id="ä½¿ç”¨-calayerè®¾ç½®èƒŒæ™¯é¢œè‰²">ä½¿ç”¨ <code>CALayer</code>è®¾ç½®èƒŒæ™¯é¢œè‰²</h3>
<p>æˆ‘ä»¬ä¿®æ”¹ <code>BaseView</code>çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-swift">@IBInspectable var backgroundColor:NSColor! = NSColor.clear {
    didSet {
        self.wantsLayer = true
        self.layer?.backgroundColor = self.backgroundColor.cgColor
    }
}
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬ä¸ºä½•ä¸é€šè¿‡åˆ†ç±»è®¾ç½®åŸºäº <code>NSView</code>çš„èƒŒæ™¯é¢œè‰²ã€‚</p>
<pre><code class="language-swift">import AppKit

extension NSView {
    @IBInspectable var backgroundColor:NSColor! {
        get {
            guard let backgroundColor = NSColor(cgColor: (self.layer?.backgroundColor)!) else {
                return NSColor.clear
            }
            return backgroundColor
        }
        set {
            self.wantsLayer = true
            self.layer?.backgroundColor = newValue.cgColor
        }
    }
}
</code></pre>
<h3 id="è®¾ç½®-contentheaderå³ä¾§è¯•å›¾">è®¾ç½® <code>ContentHeader</code>å³ä¾§è¯•å›¾</h3>
<p>å› ä¸ºæˆ‘ä»¬åªæœ‰ä¸¤ç§æ˜¾ç¤ºæƒ…å†µï¼Œæˆ‘ä»¬ç”¨ <code>enum</code>åˆ›å»ºä¸€ä¸ªæšä¸¾ç”¨äºåŒºåˆ†ç±»å‹ã€‚</p>
<pre><code class="language-swift">enum ContentHeaderStyle {
    case value1
    case value2
}
</code></pre>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯ä»¥ <code>Xib</code>è®¾ç½®æ ·å¼çš„å±æ€§ã€‚</p>
<pre><code class="language-swift">@IBInspectable var style:ContentHeaderStyle = ContentHeaderStyle.value1 {
    didSet {
    }
}
</code></pre>
<p>æˆ‘ä»¬æ¯æ¬¡è®¾ç½®éœ€è¦é‡æ–°ç§»é™¤å³ä¾§è¯•å›¾ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…³è”ä¸€ä¸‹å³ä¾§çš„çˆ¶è¯•å›¾ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var rightContentView: NSView!
</code></pre>
<p>æˆ‘ä»¬å†™ä¸€ä¸ªæ–¹æ³•ç”¨äºåŠ è½½ <code>ContentHeaderValue1</code>ã€‚</p>
<p>æˆ‘ä»¬é‡å†™ <code>ContentHeaderValue1</code>çš„ <code>override init(frame frameRect: NSRect)</code>æ–¹æ³•å¯ä»¥è®©å¤–éƒ¨é€šè¿‡ <code>frame</code>åˆå§‹åŒ–ã€‚</p>
<pre><code class="language-swift">override init(frame frameRect: NSRect) {
    super.init(frame: frameRect)
    self.loadXibView()
}
</code></pre>
<pre><code class="language-swift">func loadStyle1() {
    let style1View = ContentHeaderValue1(frame: self.rightContentView.bounds)
    style1View.autoresizingMask = [.viewWidthSizable,.viewHeightSizable]
    self.rightContentView.addSubview(style1View)
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>ContentHeader</code>çš„å±æ€§ <code>style</code>ç”¨äºåŠ è½½æˆ‘ä»¬åˆšæ‰å†™çš„æ–¹æ³•</p>
<pre><code class="language-swift">@IBInspectable var style:ContentHeaderStyle = ContentHeaderStyle.value1 {
    didSet {
        switch style {
        case .value1:
            self.loadStyle1()
        case .value2:
            break
        }
    }
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>ViewController</code>æ‹–æ‹½ä¸€ä¸ª <code>NSView</code>ç»§æ‰¿ä¸ <code>ContentHeader</code>ã€‚å¸ƒå±€è®¾ç½®å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-b052012df3b3479a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="7BFCA732-CD1F-416F-BFF7-C4AAF3BB2FE4"></p>
<p>æˆ‘ä»¬å‘ç°å³ä¾§æ ·å¼ <code>1</code>å¹¶æ²¡æœ‰å‡ºç°ï¼Œé‚£æ˜¯å› ä¸º <code>@IBInspectable</code>å¯ä»¥è®¾ç½®çš„ç±»å‹å—é™ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š <a href="http://rdd7.com/2015/11/%E4%BD%BF%E7%94%A8IBDesignable%E5%92%8CIBInspectable%E6%9E%84%E5%BB%BA%E8%87%AA%E5%AE%9A%E4%B9%89UI%E6%8E%A7%E4%BB%B6/">ä½¿ç”¨IBDesignableå’ŒIBInspectableæ„å»ºè‡ªå®šä¹‰UIæ§ä»¶</a>ã€‚</p>
<blockquote>
<p>âš ï¸ <code>Xib</code>æ˜¯èµ°çš„ <code>init(frame:NSFrame)</code>æ–¹æ³•çš„</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-3f6168519816dac5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="56052464-EEF9-406E-803E-69F4127D3EC3"></p>
<p><code>@IBInspectable</code>å¹¶ä¸æ”¯æŒæˆ‘ä»¬ <code>enum</code>çš„ç±»å‹ï¼Œæˆ‘ä»¬åªèƒ½è®¾ç½® <code>Int</code>ç±»å‹è¿›è¡Œè®¾ç½®äº†ã€‚</p>
<p>ä¿®æ”¹ <code>style</code>ä¸º <code>Int</code>ç±»å‹ã€‚</p>
<pre><code class="language-swift">@IBInspectable var style:Int = 0 {
    didSet {
        guard let headerStyle = ContentHeaderStyle(rawValue: self.style) else {
            return
        }
        switch headerStyle {
        case .value1:
            self.loadStyle1()
        case .value2:
            break
        }
    }
}
</code></pre>
<blockquote>
<p>âš ï¸æˆ‘ä»¬éœ€è¦è®¾ç½®<code>ContentHeaderStyle</code>ç»§æ‰¿ä¸ <code>Int</code>ç±»å‹ä¸ç„¶æ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•ã€‚</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-92f85111ec53cc34.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5893978C-0384-4AA7-9CC5-FB8B8FA39733"></p>
<p>æ­¤æ—¶æˆ‘ä»¬çš„ <code>Xib</code>å·²ç»å¯ä»¥çœ‹å‡ºæ¥æ•ˆæœäº†ã€‚</p>
<p>æˆ‘ä»¬è¿è¡Œå‘ç°ï¼Œç¨‹åºå·²ç»å´©æºƒäº†ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-be982fd268d95f85.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="D9D4E892-7584-4328-82C5-C7391A2349A1"></p>
<p>çœ‹æ¥æ˜¯å› ä¸ºä»€ä¹ˆå€¼ä¸º <code>nil</code>å¯¼è‡´çš„ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-9e8cb65e74eea026.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="185EB7F6-2A31-4A8E-8D36-B65BA0F4C16D"></p>
<p>æˆ‘ä»¬å‘ç°æ˜¯å› ä¸ºæˆ‘ä»¬å†™çš„æ–¹æ³• <code>loadStyle1()</code>åˆå§‹åŒ– <code>ContentHeaderValue1</code>ä¼ å…¥ <code>nil</code>å€¼å¯¼è‡´çš„ã€‚</p>
<blockquote>
<p>âš ï¸ ä¸æ¸…æ¥šä¸ºä»€ä¹ˆç»å¸¸ <code>Xib</code>æ˜¾ç¤ºå¤±è´¥ï¼Œæš‚æ—¶æ²¡æ‰¾åˆ°è§£å†³çš„åŸå› ã€‚</p>
<p>æš‚æ—¶å¯èƒ½æ˜¯ <code>Cocoapods</code>åº“å¯¼è‡´ï¼Œå¯¼å…¥ <code>Cocoapods</code>åº“ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-7112b7d1ec0b4d2a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="D8D16786-5657-464C-A993-F87DBA95C693"></p>
</blockquote>
<p>å› ä¸ºæˆ‘ä»¬ <code>æ–‡ç« </code> <code>é¡µé¢</code> <code>æ•°æ®</code>çš„é¡µé¢æ¯”è¾ƒç›¸ä¼¼æˆ‘ä»¬å°± å†™ä¸€ä¸ªç±»åšä¸€ä¸ªæ¨¡æ¿ã€‚</p>
<h3 id="åˆ¶ä½œ-æ–‡ç« -é¡µé¢-æ•°æ®çš„æ¨¡æ¿">åˆ¶ä½œ <code>æ–‡ç« </code> <code>é¡µé¢</code> <code>æ•°æ®</code>çš„æ¨¡æ¿</h3>
<p>æ–°å»ºä¸€ä¸ªç±» <code>BaseListView</code>ç»§æ‰¿äº <code>NSView</code>ã€‚</p>
<pre><code class="language-swift">class BaseListView: NSView {
override init(frame frameRect: NSRect) {
    super.init(frame: frameRect)
    self.loadXibView()
}

required init?(coder: NSCoder) {
    super.init(coder: coder)
    self.loadXibView()
}
</code></pre>
<h3 id="prepareforinterfacebuilderåªèƒ½è®¾ç½®å±æ€§åœ¨æ‰€å±çš„ç±»é‡Œé¢"><code>prepareForInterfaceBuilder()</code>åªèƒ½è®¾ç½®å±æ€§åœ¨æ‰€å±çš„ç±»é‡Œé¢ã€‚</h3>
<p>æˆ‘ä»¬è®¾ç½® <code>SideMenuView</code>ç±»é‡Œé¢ã€‚</p>
<pre><code class="language-swift">override func prepareForInterfaceBuilder() {
    self.menuItems = [
        SideMenuItemConfiguration(title: &quot;æ–‡ç« &quot;, iconHex: &quot;F02D&quot;, hidden: true, selected: false),
        SideMenuItemConfiguration(title: &quot;é¡µé¢&quot;, iconHex: &quot;F15C&quot;, hidden: false, selected: false),
        SideMenuItemConfiguration(title: &quot;æ•°æ®&quot;, iconHex: &quot;F1C0&quot;, hidden: true, selected: false),
        SideMenuItemConfiguration(title: &quot;æ–‡ä»¶&quot;, iconHex: &quot;F15B&quot;, hidden: false, selected: false),
        SideMenuItemConfiguration(title: &quot;é…ç½®&quot;, iconHex: &quot;F013&quot;, hidden: true, selected: false),
        ]
}
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-66fc767bbe0be226.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="17195911-89F8-4653-A385-D51DD45B6089"></p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ <code>Xib</code>å®æ—¶çš„çœ‹åˆ°æ•ˆæœäº†ã€‚</p>
<p>æˆ‘ä»¬ä¹‹å‰å°è£…çš„ <code>SideMenuItemView</code>ä¼¼ä¹ä¸å¤ªé€‚åˆæˆ‘ä»¬è¿™é‡Œçš„æŒ‰é’®ï¼Œå¦‚æœåªæ˜¯æ˜¾ç¤ºæ–‡å­—æˆ‘ä»¬è¿˜éœ€è¦è¿˜éœ€è¦éšè—å‰é¢çš„ <code>NSImageView</code>ï¼Œæˆ‘ä»¬æŒ‰é’®ç›´æ¥ç”¨ç³»ç»Ÿçš„ <code>NSButton</code>ã€‚</p>
<p>æˆ‘ä»¬æ›¿æ¢æˆ <code>NSButton</code>ä¹‹åä¼¼ä¹åˆé‡åˆ°äº†å¦å¤–çš„æ£˜æ‰‹çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯ <code>NSButton</code>ç«Ÿç„¶æ²¡æœ‰åœ°æ–¹å¯ä»¥è®¾ç½® <code>title</code>çš„é¢œè‰²ã€‚</p>
<h3 id="å¦‚ä½•è®¾ç½®-nsbuttonæ ‡é¢˜çš„é¢œè‰²">å¦‚ä½•è®¾ç½® <code>NSButton</code>æ ‡é¢˜çš„é¢œè‰²</h3>
<p><a href="https://stackoverflow.com/questions/13109964/nsbutton-how-to-color-the-text">NSButton how to color the text</a>ã€‚</p>
<p>çºµè§‚ç½‘ä¸Šçš„æ•™ç¨‹å¤§éƒ½æ˜¯è®¾ç½®æŒ‰é’®çš„å¯Œæ–‡æœ¬æˆ–è€…æ˜¯ <a href="http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMutableParagraphStyle_Class/">NSMutableParagraphStyle</a>ã€‚ä½†æ˜¯ <a href="http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSMutableParagraphStyle_Class/">NSMutableParagraphStyle</a>è¿™ä¸ªä¸å¤ªé è°±ï¼Œæˆ‘è§‰å¾—æˆ‘ä»¬è®¾ç½®å¯Œæ–‡æœ¬æ¯”è¾ƒå¥½ä¸€äº›ã€‚</p>
<p>è®¾ç½® <code>NSButton</code>çš„åˆ†ç±»ç”¨äºè®¾ç½®åˆ†æ–‡æœ¬å­—ä½“çš„é¢œè‰²ã€‚</p>
<pre><code class="language-swift">extension NSButton {
    @IBInspectable var titleColor:NSColor? {
        get {
            return self.attributedTitle.attribute(NSForegroundColorAttributeName, at: 0, longestEffectiveRange: nil, in: NSMakeRange(0, self.title.characters.count)) as? NSColor
        }
        set {
            guard let color = newValue else {
                return
            }
            let mutableAttributeString = NSMutableAttributedString(string: self.title)
            mutableAttributeString.addAttribute(NSForegroundColorAttributeName, value: color, range: NSMakeRange(0, self.title.characters.count))
            self.attributedTitle = mutableAttributeString
        }
    }
}
</code></pre>
<h3 id="ä½¿ç”¨-moduleåç§°è§£å†³åå­—å†²çªé—®é¢˜">ä½¿ç”¨ <code>Module</code>åç§°è§£å†³åå­—å†²çªé—®é¢˜</h3>
<p>åœ¨<code>set</code>æ–¹æ³•é‡Œé¢æˆ‘ä»¬ä¸ºäº†æˆ‘ä»¬<code>get</code>æ–¹æ³•è·å–æ˜¯æ­£ç¡®çš„ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>print</code>å‡½æ•°è¾“å‡ºã€‚å‘ç°ç«Ÿç„¶å¼¹å‡ºæ‰“å°ç•Œé¢ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-3b14faa1bd0e00ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="458CB6F0-458D-4BA4-BF45-E32642105894"></p>
<p>æˆ‘æŸ¥çœ‹ä¸€ä¸‹åŸæ¥æ˜¯ <code>NSView</code>é‡å†™äº† <code>print</code>å¯¼è‡´æˆ‘ä»¬è°ƒç”¨ç›´æ¥èµ° <code>NSView</code>çš„æ–¹æ³•ã€‚</p>
<p>æ„Ÿè°¢ <code>@2017Swift</code>ç¾¤é‡Œé¢çš„ <code>Sin</code>å¤§ç¥å¸®å¿™è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚é‡åˆ°å‘½åå†²çªçš„å¯ä»¥åœ¨å‰é¢æ·»åŠ  <code>Module</code>åå­—ã€‚</p>
<pre><code class="language-swift">Swift.Print(self.titleColor)
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥æ­£å¸¸çš„æ‰“å°äº†ã€‚</p>
<h3 id="nsbuttonè®¾ç½®-attributedtitleä¹‹å‰çš„å¯¹é½æ–¹å¼å¤±æ•ˆ"><code>NSButton</code>è®¾ç½® <code>attributedTitle</code>ä¹‹å‰çš„å¯¹é½æ–¹å¼å¤±æ•ˆ</h3>
<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å‡ºç°äº†ï¼Œé‚£å°±æ˜¯ <code>Xib</code>è®¾ç½®æ–‡å­—å±…ä¸­ï¼Œç«Ÿç„¶è¿è¡Œåœ¨å·¦è¾¹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-ff9502b40d3b920a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="304B23CD-056C-4D8C-A4AA-62BB60E75B22"></p>
<p>ç»è¿‡æŸ¥è¯æ˜¯ä¸‹é¢ä»£ç å¯¼è‡´çš„ã€‚</p>
<pre><code class="language-swift">self.attributedTitle = mutableAttributeString
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-a1e06c7499d00968.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FD25269A-1E28-4AE6-A6D1-59BE41C72062"></p>
<p>è¿™ä¸ªæ˜¯åœ¨ <a href="https://stackoverflow.com/questions/7514157/nsbutton-setalignment-does-not-work">NSButton setAlignmentä¸èµ·ä½œç”¨</a>æœåˆ°çš„è§£é‡Šã€‚æ„æ€æ˜¯æˆ‘ä»¬ç”¨ <code>NSAttributedString</code>ä¹‹å‰è®¾ç½®å¯¹é½æ–¹å¼å·²ç»å¤±æ•ˆäº†ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-6212343f3c7b8292.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="0BF19AD0-F5EC-4B8E-A6D7-057AD5F7D83B"></p>
<p>æˆ‘ä»¬åœ¨ <code>NSMutableAttributedString</code>ä¹Ÿçœ‹åˆ°äº†è¯´æ˜ã€‚æˆ‘ä»¬éœ€è¦é‡‡ç”¨ <code>NSMutableParagraphStyle</code>è¿›è¡Œè®¾ç½®å­—ä½“å¯¹é½æ–¹å¼äº†ã€‚</p>
<h3 id="å…³äº-nsmutableparagraphstyle">å…³äº <code>NSMutableParagraphStyle</code></h3>
<pre><code class="language-swift">let style = NSMutableParagraphStyle()
style.alignment = self.alignment
let dict = [
    NSForegroundColorAttributeName:color,
    NSParagraphStyleAttributeName:style
]
let mutableAttributeString = NSMutableAttributedString(string: self.title, attributes: dict)
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¯¹å…¶æŒ‰ç…§æˆ‘ä»¬ <code>Xib</code>è®¾ç½®çš„äº†ã€‚</p>
<blockquote>
<p>âš ï¸ æˆ‘ä»¬è®¾ç½®å­—ä½“çš„é¢œè‰²ä¹Ÿéœ€è¦åœ¨ <code>dict</code>è¿›è¡Œå¯Œæ–‡æœ¬è®¾ç½®ã€‚</p>
<p><code>NSFontAttributeName</code>è®¾ç½®å­—ä½“å¤§å°ã€‚</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-b06951aa46db03c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="63D1CFAC-56B9-4C9E-9290-2ED27F4D7496"></p>
<p>æˆ‘ä»¬ <code>Header</code>çš„æ¡†æ¶å¤§ä½“å·²ç»åšå‡ºæ¥äº†ã€‚ä½†æ˜¯è¿˜éœ€è¦è¿›ä¸€æ­¥çš„å°è£…ä¸€ä¸‹ã€‚</p>
<ul>
<li><code>æ–‡ç« </code>è¿™ä¸¤ä¸ªå­—å¯ä»¥è‡ªå®šä¹‰ã€‚</li>
<li><code>æ–°å»ºæ–‡ç« </code>çš„æ ‡é¢˜å¯ä»¥è‡ªå®šä¹‰</li>
<li><code>æœç´¢æ ‡é¢˜</code>å¯ä»¥è‡ªå®šä¹‰</li>
<li>æŒ‰é’®çš„äº‹ä»¶å¯ä»¥è‡ªå®šä¹‰</li>
<li>æœç´¢äº‹ä»¶å¯ä»¥è‡ªå®šä¹‰</li>
</ul>
<p>æˆ‘ä»¬åœ¨ <code>ContentHeaderValue1</code>å…³è”ä¸€ä¸‹ <code>Label</code>å¯ä»¥è®©å¤–æ¥è®¾ç½® <code>Label</code>çš„æ–‡å­—ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var titleLabel: NSTextField!
</code></pre>
<p>ä¸ºäº†å¯ä»¥è·å–åˆ°æˆ‘ä»¬ <code>Header</code>çš„å…ƒç´ ï¼Œæˆ‘ä»¬éœ€è¦æ–°å¢ä¸€ä¸ªæ–¹æ³•ç”¨äºè·å– <code>ContentHeader</code>ä¸Šé¢è‡ªå®šä¹‰æ§ä»¶ã€‚</p>
<pre><code class="language-swift">var headerContent:NSView? {
    get {
        let views = self.rightContentView.subviews
        guard views.count &gt; 0 else {
            return nil
        }
        return views.first
    }
}
</code></pre>
<p>æˆ‘ä»¬ç»™ <code>BaseListView</code>æ–°å¢ä¸€ä¸ªå±æ€§ç”¨äºè®¾ç½® <code>Label</code>çš„æ–‡å­—ã€‚</p>
<pre><code class="language-swift">var title:String? {
    get {
        return self.header.titleLabel.stringValue
    }
    set {
        guard let title = newValue else {
            return
        }
        self.header.titleLabel.stringValue = title
    }
}
</code></pre>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç±» <code>PostsView</code>ç”¨æˆ·å±•ç¤º <code>æ–‡ç« åˆ—è¡¨ç•Œé¢</code>ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>PostsView</code>æ–°å¢ä¸€ä¸ª <code>BaseListView</code>å¸ƒå±€å¦‚ä¸‹ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-d187ee3cdd86aaab.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DEC6484F-944D-4D00-B81E-B9A624D8A0A4"></p>
<p>ä¸ºäº†è®© <code>ViewController</code>åœ¨å³ä¾§å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç•Œé¢ï¼Œæˆ‘ä»¬åœ¨ <code>ViewController</code>çš„å³ä¾§æ–°å¢ä¸€ä¸ª <code>NSView</code>ä½œä¸ºçˆ¶è¯•å›¾ï¼Œå¸ƒå±€å¦‚ä¸‹ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var rightContentView: NSView!
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-0d28b40fdeb8d529.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="37E8D7A5-DA7D-4A92-86EA-E3C39AB36E8A"></p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ•°ç»„å­˜æ”¾æˆ‘ä»¬å³ä¾§é¡µé¢ã€‚</p>
<pre><code class="language-swift">var views:[NSView] = []
</code></pre>
<p>æˆ‘ä»¬æ–°å¢ä¸€ä¸ªæ–¹æ³•æŠŠéœ€è¦å±•ç¤ºçš„è¯•å›¾æ·»åŠ è¿›å»ã€‚</p>
<pre><code class="language-swift">func addViews(viewType:NSView.Type) {
    let posts = viewType.init(frame: self.rightContentView.bounds)
    posts.autoresizingMask = [.viewWidthSizable,.viewHeightSizable]
    self.views.append(posts)
}
</code></pre>
<p>æˆ‘ä»¬éœ€è¦è·å–å·¦ä¾§åŠŸèƒ½æŒ‰é’®çš„ç‚¹å‡»å›è°ƒæ¥å±•ç¤ºå¯¹åº”çš„ç•Œé¢ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>SideMenuView.swift</code>æ–°å¢ä¸€ä¸ªé—­åŒ…å›è°ƒç”¨äºå‘Šè¯‰å¤–éƒ¨å½“å‰ç‚¹å‡»çš„ç´¢å¼•ã€‚</p>
<pre><code class="language-swift">typealias SideMenuViewSelectMenuIndexCompletionHandle = (_ index:Int) -&gt; Void
</code></pre>
<p>æˆ‘ä»¬æ–°å¢ä¸€ä¸ª <code>SideMenuViewSelectMenuIndexCompletionHandle</code>çš„å±æ€§ç”¨æ¥å›è°ƒæˆ‘ä»¬ç‚¹å‡»çš„ç´¢å¼•ã€‚</p>
<pre><code class="language-swift">    var selectMenuCompletionHandle:SideMenuViewSelectMenuIndexCompletionHandle?
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>didClickRow</code>æ–¹æ³•æŠŠå½“å‰çš„ç´¢å¼•å›è°ƒå›å»ã€‚</p>
<pre><code class="language-swift">if let completionHandle = self.selectMenuCompletionHandle {
    completionHandle(row)
}
</code></pre>
<p>æˆ‘ä»¬å…³è”ä¸€ä¸‹ <code>ViewController</code>ç•Œé¢ä¸Šé¢çš„ <code>SideMenuView</code>ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var sideMenu: SideMenuView! {
    didSet {
        self.sideMenu.selectMenuCompletionHandle = { [weak self] index in
            self?.changeContentView(index: index)
        }
    }
}
</code></pre>
<pre><code class="language-swift">func changeContentView(index:Int) {
    for view in self.rightContentView.subviews {
        view.removeFromSuperview()
    }
    guard self.views.count &gt; index else {
        return
    }
    let addView = self.views[index]
    self.rightContentView.addSubview(addView)
}
</code></pre>
<p>æˆ‘ä»¬åœ¨ <code>viewDidLoad</code>æ–¹æ³•é‡Œé¢æ³¨å†Œæˆ‘ä»¬çš„ç±»ã€‚</p>
<pre><code class="language-swift">self.addViews(viewType: PostsView.self)
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-a810e4feae784a6c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5881C5F2-BE46-442E-8EAE-F27E9C0467FC"></p>
<p>æˆ‘ä»¬å‘ç°æˆ‘ä»¬å¹¶æ²¡æœ‰å‡ºç°æˆ‘ä»¬çš„æ–‡ç« é¡µé¢ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å›è°ƒçš„å±æ€§è¿˜æ²¡æœ‰åˆå§‹åŒ–ï¼Œç´¢å¼•æˆ‘ä»¬è¦åœ¨å±æ€§ <code>set</code>æ–¹æ³•è¿›è¡Œä¸€æ¬¡å›è°ƒã€‚</p>
<pre><code class="language-swift">var selectMenuCompletionHandle:SideMenuViewSelectMenuIndexCompletionHandle? {
    didSet {
        guard let selectMenuCompletionHandle = self.selectMenuCompletionHandle else {
            return
        }
        selectMenuCompletionHandle(currentMenuIndex)
    }
}
</code></pre>
<pre><code class="language-swift">private var currentMenuIndex:Int = 0
</code></pre>
<pre><code class="language-swift">func changeTabeleViewState(row:Int, tableView:NSTableView) {
  currentMenuIndex = row
  ....
 }
</code></pre>
<p>ä½†æ˜¯å¥‡æ€ªçš„æ˜¯æˆ‘ä»¬çš„ç•Œé¢è¿˜æ˜¯æ²¡æœ‰å‡ºç°ï¼Œæ˜¯å› ä¸ºå½“é»˜è®¤å›è°ƒä¹‹åæˆ‘ä»¬çš„è¯•å›¾æ•°ç»„è¿˜æ²¡æœ‰åˆå§‹åŒ–ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å›è°ƒçš„æ—¶å€™ä¿ç•™ä¸€ä¸‹æˆ‘ä»¬çš„ç´¢å¼•ï¼Œåœ¨ <code>ViewDidLoad</code>å¯ä»¥åˆ·æ–°å¯¹åº”çš„ç´¢å¼•ã€‚</p>
<pre><code class="language-swift">var sideMenuIndex:Int = -1
</code></pre>
<pre><code class="language-swift">self?.sideMenuIndex = index
</code></pre>
<pre><code class="language-swift">self.changeContentView(index: self.sideMenuIndex)
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-8f73a13fec6e0225.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="B2E036CF-433D-42AE-8D63-91ACC6527355"></p>
<p>è²Œä¼¼åªæ˜¯æ–‡ç« æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œæˆ‘ä»¬çš„æŒ‰é’®å’Œæœç´¢æ¡†å¹¶æ²¡æœ‰å‡ºç°ã€‚</p>
<p>åŸæ¥æ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰è®¾ç½®å³ä¾§ <code>Header</code>çš„æ ·å¼ï¼Œæˆ‘ä»¬åœ¨ <code>PostsView</code>å£°æ˜ä¸€ä¸‹å˜é‡ã€‚</p>
<pre><code class="language-swift">@IBOutlet weak var listView: BaseListView! {
    didSet {
        self.listView.header.style = 0
    }
}
</code></pre>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-49d257b051b29745.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="B4496E6F-C9BD-469F-B888-BCB02B182993"></p>
<p>æ­¤æ—¶æˆ‘ä»¬å³ä¾§çš„ç•Œé¢å·²ç»å‡ºç°äº†ã€‚</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-009b65ed3ece524e.gif?imageMogr2/auto-orient/strip" alt="12"></p>
<p>æˆ‘ä»¬çš„ç•Œé¢æœ€å°å®½åº¦æœ‰äº›ä¸å¤Ÿï¼Œæˆ‘ä»¬è®¾ç½®æœ€å°ä¸º <code>900x600</code>ã€‚</p>
<p>ç¬¬äºŒéƒ¨æ•™ç¨‹åˆ°æ­¤ç»“æŸã€‚</p>
 </p>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              <div class="next-post">
                                  <div class="next">ä¸‹ä¸€ç¯‡</div>
                                  <a href="https://joserccblog.github.io/post/2017-11-25-object-cä¸­çš„é»‘é­”æ³•">
                                      <h3 class="post-title">
                                          Object-Cä¸­çš„é»‘é­”æ³•
                                      </h3>
                                  </a>
                              </div>
                          
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              

                              
                                  <div id="disqus_thread"></div>
                              
                          
                      </div>
                  </div>
              </div>

          </article>
      </div>
  </div>

    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
</footer>


    <!-- jQuery -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/md5.min.js"></script>

<script type="application/javascript">
    hljs.initHighlightingOnLoad();
</script>



    

    
        <script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>
        <script>

            var options = {
                shortname: 'josercc',
                apikey: 'DBJHHPsqZBT5EUYFyQmorAozkwxTDoySOnd4bmdt9G29YFySUFhFE6SLZrSCHee4',
            }
            if ('') {
                options.api = ''
            }
            var dsqjs = new DisqusJS(options)

        </script>
    




  </body>
</html>
