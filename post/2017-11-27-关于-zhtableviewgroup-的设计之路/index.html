<!DOCTYPE html>
<html>
  <head>
      
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- ç™¾åº¦éªŒè¯ -->
<meta name="baidu-site-verification" content="1IkquSGR9Z"/>

<title>å›èµåšå®¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡"/>
<meta name="keywords" content="2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://joserccblog.github.io/favicon.ico">

<link rel="stylesheet" href="https://joserccblog.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://joserccblog.github.io/media/scripts/_vendors/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->

    

    
        <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css" />
    


<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>

<link crossorigin="anonymous" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" href="https://lib.baomitu.com/font-awesome/5.8.1/css/all.min.css" rel="stylesheet">

  </head>
  <body>
  
<div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://joserccblog.github.io/media/images/avatar.png" alt="å›èµåšå®¢" class="img-responsive">
        </figure>
        <h3 class="heading">ABOUT ME</h3>
        <h2>å›èµåšå®¢</h2>
        <p>2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡</p>
        <ul class="fh5co-social">
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">
        <div class="fh5co-box">
            <h3 class="heading">æœç´¢</h3>
            <form action="#">
                <div class="form-group">
                    <input type="text" id="bdcsMain" class="form-control" placeholder="è¾“å…¥å…³é”®å­—">
<!--                    <button type="submit" class="btn btn-sm btn-warning" style="margin-top: 6px; width: 100%">ç‚¹å‡»æœç´¢</button>-->
                </div>
            </form>
        </div>
        <div class="fh5co-box">
            <h3 class="heading">æ ‡ç­¾</h3>
            <ul>
                
                    <li><a href="https://joserccblog.github.io/tag/ilTRbUeIh">OCUI</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/qFaqD3-EnQ">é“¾å¼è¯­æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/swift">Swift</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ios">iOS</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/framework">Framework</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/carthage">Carthage</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/cocoapods">Cocoapods</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/masonry">Masonry</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/yue-shu-chong-tu">çº¦æŸå†²çª</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uistackview">UIStackView</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ios11">iOS11</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/sheng-huo">ç”Ÿæ´»</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zhi-shi-dian">çŸ¥è¯†ç‚¹</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/testflight">TestFlight</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/guo-ji-hua">å›½é™…åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xcode9">Xcode9</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zi-dong-hua">è‡ªåŠ¨åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/hei-mo-fa">é»‘é­”æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ota">OTA</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xctest">XCTest</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/appstore">AppStore</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/mac">Mac</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/gan-xiang">æ„Ÿæƒ³</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xcode">Xcode</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/svn">SVN</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xiang-fa">æƒ³æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/di-san-fang-ku">ç¬¬ä¸‰æ–¹åº“</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/mo-kuai-hua">æ¨¡å—åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/c">C</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/autolayout">AutoLayout</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xib">Xib</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/clang-format">Clang Format</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/objetive-c">Objetive-C</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zhou-bao">å‘¨æŠ¥</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/jekyll">Jekyll</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/server">Server</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uibarbuttonitem">UIBarButtonItem</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uitextfiled">UITextFiled</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                         >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                         >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                         >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                         >
                            å…³äº
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/contact/"
                         >
                            è”ç³»ä½œè€…
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://joserccblog.github.io">å›èµåšå®¢ </a>
                </h1>
            </div>
        </div>
    </div>
</header>


<!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
<!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

  <div class="container-fluid">
      <div class="row fh5co-post-entry single-entry">
          <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
              <figure class="animate-box">
                  
                      <img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-27-053551.jpg" alt="å…³äº ZHTableViewGroup çš„è®¾è®¡ä¹‹è·¯" class="img-responsive">
                  
              </figure>
              <span class="fh5co-meta animate-box">
                  
                      <div class="tag-container">
                          
                              <a href="https://joserccblog.github.io/tag/ios" class="tag">iOS, </a>
                          
                              <a href="https://joserccblog.github.io/tag/di-san-fang-ku" class="tag">ç¬¬ä¸‰æ–¹åº“, </a>
                          
                      </div>
                  
              </span>
              <h2 class="fh5co-article-title animate-box">å…³äº ZHTableViewGroup çš„è®¾è®¡ä¹‹è·¯</h2>
              <span class="fh5co-meta fh5co-date animate-box">2017-11-27</span>

              <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                  <div class="row">
                      <div class="col-md-12 animate-box post-content">
                          <p> <p>å…³äº ZHTableViewGroup çš„è®¾è®¡ä¹‹è·¯</p>
<h3 id="å…³äºzhtableviewgroupæ€æƒ³å¦‚ä½•äº§ç”Ÿ">å…³äºZHTableViewGroupæ€æƒ³å¦‚ä½•äº§ç”Ÿ</h3>
<ul>
<li>ä¹‹å‰å¤æ‚çš„é¡µé¢ä¸ç”¨è¡¨æ ¼è¦å¯¹äºå°å±å¹•åšé€‚é…æ·»åŠ æ»šåŠ¨ éœ€è¦å¯ä»¥æ»šåŠ¨çš„è¯•å›¾æ— éå°±æ˜¯ UIScrollView æˆ–è€… UIScrollView çš„å­ç±»</li>
<li>åˆ é™¤é¡µé¢æŸäº›è¯•å›¾æˆ–è€…å¢åŠ æ²¡é‚£ä¹ˆå®¹æ˜“</li>
<li>åšå¤æ‚çš„è¡¨å•ååˆ†å¤æ‚è¦å†™ä¸€äº›åˆ¤æ–­é€»è¾‘ ååˆ†çš„å¤æ‚</li>
<li>å¯¹äºè¡¨æ ¼çš„å…ƒç´ èµ‹å€¼è¦ç²¾ç¡®ä¸è®¤ä¼š crash</li>
<li>ç­‰ç­‰å…¶ä»–åæ§½çš„åŸå› </li>
</ul>
<h3 id="æˆ‘å¯¹äºé’ˆå¯¹-uitableview-å¹³æ—¶ç»å¸¸ç”¨åˆ°çš„æ–¹æ³•å’Œåˆ¤æ–­åšä¸€äº›åˆ†ç¦»-è¿™æ ·å²‚ä¸æ˜¯å°±å¯ä»¥åˆ†å¼€é€»è¾‘-å•ç‹¬å¤„ç†">æˆ‘å¯¹äºé’ˆå¯¹ UITableView å¹³æ—¶ç»å¸¸ç”¨åˆ°çš„æ–¹æ³•å’Œåˆ¤æ–­åšä¸€äº›åˆ†ç¦» è¿™æ ·å²‚ä¸æ˜¯å°±å¯ä»¥åˆ†å¼€é€»è¾‘ å•ç‹¬å¤„ç†ï¼Ÿ</h3>
<p>ç»è¿‡è¿™æ ·çš„æ€è€ƒï¼Œè§‰å¾—è¿™ä¸ªåŠæ³•è¿˜æ˜¯å¯ä»¥çš„ï¼ŒZHTableViewGroupåº”è¿è€Œç”Ÿ</p>
<h3 id="å…³äºzhtableviewgroupçš„æ¶æ„">å…³äºZHTableViewGroupçš„æ¶æ„</h3>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-418c12c581de2e52.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>ç”¨æˆ·åªè¦è´Ÿè´£åˆ›å»º ZHTableViewDataSource å¯¹è±¡</p>
<p>æ·»åŠ ZHTableViewGroup åˆ†ç»„-&gt;æ·»åŠ ZHTableViewCell æ¨¡å—</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ç•Œé¢æ€ä¹ˆåšå‘¢</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-1708ee1282075f4b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>è¿™ä¸ªç•Œé¢å¯ä»¥åˆ†æˆä¸‹é¢çš„æ¨¡å—</p>
<p><img src="http://upload-images.jianshu.io/upload_images/545662-c7d3f165d4003490.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>åˆ†ä¸ºä¸‰ç§ä¸åŒçš„æ¨¡å—</p>
<p>ä¸­é—´çš„ç©ºæ ¼ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—</p>
<p>æˆ‘ä»¬å¯¹äº UITableViewDataSourceå’Œ UITableViewDelegate çš„æ–¹æ³•è¿›è¡Œåˆ†ç¦»</p>
<h3 id="è¿”å›ç»„çš„ä¸ªæ•°">è¿”å›ç»„çš„ä¸ªæ•°</h3>
<pre><code class="language-swift">public func numberOfSections(in tableView: UITableView) -&gt; Int //è¿”å›ç»„çš„ä¸ªæ•°
</code></pre>
<p>è¿™ä¸ªä»£ç†æ–¹æ³•æ˜¯è®¾ç½®è¡¨æ ¼çš„åˆ†ç»„ä¸ªæ•° æˆ‘ä»¬ç”¨ ZHTableViewGroup åˆ†åˆ«ä»£è¡¨è¡¨æ ¼çš„ç»„</p>
<p>å¯¹äºç”¨æˆ·é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªZHTableViewGroup çš„æ•°æ®æºå¯¹è±¡ ZHTableViewDataSource</p>
<p>å› ä¸ºæˆ‘ä»¬éœ€è¦çŸ¥é“è¡¨æ ¼çš„å¯¹è±¡åœ°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥ UITableView çš„å¯¹è±¡</p>
<pre><code class="language-swift">    /// åˆå§‹åŒ–ZHTableViewDataSourceæ•°æ®æº
    ///
    /// - Parameter tableView: è¡¨æ ¼å¯¹è±¡
    public init(tableView:UITableView) {
        self.tableView = tableView
        super.init()
    }
</code></pre>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª UITableView çš„å˜é‡æ¥æŒ‡å‘è¿™ä¸ªå†…å­˜åœ°å€</p>
<pre><code class="language-swift">    /// æ‰˜ç®¡ UITableView çš„å¯¹è±¡
    var tableView:UITableView
</code></pre>
<p>ä¹‹å‰å‡†å¤‡æƒ³è®©ç”¨æˆ·ä¸ç”¨å®ç° UITableViewDataSource çš„ä»£ç†æ–¹æ³• ç”¨è¿è¡Œæ—¶æˆ–è€…ä»£ç†å¸è½½è¿™ä¸ªåº“é‡Œé¢ ç”¨æœ€ç®€å•çš„ä»£ç æ¥å®Œæˆ</p>
<p>æœ€ååˆ†æäº†è¿™æ ·å¦¨ç¢ç”¨æˆ·ä¸€äº›è‡ªå®šä¹‰çš„äº‹æƒ… å†³å®šè¿˜æ˜¯è®©ç”¨æˆ·è°ƒç”¨åº“çš„æ–¹æ³•</p>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ•°ç»„ç”¨äºå­˜æ”¾ ZHTableViewGroup</p>
<pre><code class="language-swift">    /// ZHTableViewGroupçš„æ•°ç»„
    public var groups:[ZHTableViewGroup] = []
</code></pre>
<p>å› ä¸º UITableView æ‰§è¡Œä»£ç†çš„æ—¶å€™ å¯èƒ½ç”¨æˆ·çš„ ZHTableViewDataSource å¯¹è±¡è¿˜æ²¡æœ‰åˆ›å»º æ‰€ä»¥æˆ‘ä»¬è¦åˆ›å»ºç±»æ–¹æ³•å»è¿”å›ç»„çš„ä¸ªæ•°</p>
<pre><code class="language-swift">    /// è¿”å›åˆ†ç»„çš„ä¸ªæ•°
    ///
    /// - Parameter dataSource: ZHTableViewDataSourceæ•°æ®æºå¯ä»¥ä¸º nil
    /// - Returns: Intåˆ†ç»„çš„ä¸ªæ•°
    public class func numberOfSections(dataSource:ZHTableViewDataSource?) -&gt; Int {
        guard let dataSource = dataSource else {
            // å½“ZHTableViewDataSourceç”¨æˆ·å¯¹è±¡è¿˜æ²¡æœ‰åˆ›å»ºçš„æ—¶å€™è¿”å›0
            return 0
        }
        return dataSource.groups.count // è¿”å› ZHTableViewGroup æ•°ç»„çš„ä¸ªæ•°
    }
</code></pre>
<p>å…³äºgroupsæ•°ç»„çš„å…ƒç´ æ€ä¹ˆæ¥å‘¢ ? æˆ‘ä»¬å†™ä¸€ä¸ªæ–¹æ³•æ¥æ·»åŠ å…ƒç´ </p>
<pre><code class="language-swift">    /// æ·»åŠ åˆ†ç»„
    ///
    /// - Parameter completionHandle: æ·»åŠ åˆ†ç»„é…ç½®çš„å›è°ƒ
    public func addGroup(completionHandle:ZHTableViewAddGroupCompletionHandle) {
        let group = ZHTableViewGroup()
        completionHandle(group)
        groups.append(group)
    }
</code></pre>
<p>ä¸ºä»€ä¹ˆç”¨å›è°ƒå‘¢ å› ä¸ºå¯ä»¥è®©ç”¨æˆ·å¯ä»¥åœ¨å¤–éƒ¨è‡ªå®šä¹‰é…ç½® æ€æƒ³æ¥æºäº Masonry</p>
<pre><code class="language-swift">/// æ·»åŠ åˆ†ç»„çš„å›è°ƒ group:å›è°ƒçš„ZHTableViewGroup
public typealias ZHTableViewAddGroupCompletionHandle = (_ group:ZHTableViewGroup) -&gt; Void
</code></pre>
<h3 id="è¿”å›æ¯ç»„-cell-çš„æ€»æ•°">è¿”å›æ¯ç»„ Cell çš„æ€»æ•°</h3>
<pre><code class="language-swift">public func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int // è¿”å›æ¯ç»„ cell çš„æ€»æ•°
</code></pre>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»æ–¹æ³•è¿”å› cellçš„æ€»æ•°</p>
<pre><code class="language-swift">    /// è¿”å›æ¯ç»„ Cell çš„æ€»æ•°
    ///
    /// - Parameters:
    ///   - dataSource: ZHTableViewDataSourceæ•°æ®æºå¯¹è±¡å¯ä»¥ä¸º nil
    ///   - section: ç»„çš„ç´¢å¼•
    /// - Returns:  cellçš„æ€»æ•°
    public class func numberOfRowsInSection(dataSource:ZHTableViewDataSource?, section:Int) -&gt; Int {
        guard let group = groupForSection(dataSource: dataSource, section: section) else {
            // å¦‚æœè·å–ä¸åˆ°å¯¹åº”çš„ ZHTableViewGroup å¯¹è±¡å°±è¿”å›0
            return 0
        }
        return group.cellCount
    }
</code></pre>
<p>è·å– ZHTableViewGroup çš„æ–¹æ³•</p>
<pre><code class="language-swift">    ///  è·å–å¯¹åº”çš„åˆ†ç»„
    ///
    /// - Parameters:
    ///   - dataSource: ZHTableViewDataSourceçš„æ•°æ®æºå¯ä»¥ä¸º nil
    ///   - section: åˆ†ç»„çš„ç´¢å¼•
    /// - Returns: å¯¹åº”åˆ†ç»„å¯¹è±¡å¯èƒ½ä¸º nil
    private class func groupForSection(dataSource:ZHTableViewDataSource?, section:Int) -&gt; ZHTableViewGroup? {
        guard let dataSource = dataSource else {
            // å½“ç”¨æˆ·è¿˜æ²¡æœ‰åˆ›å»ºZHTableViewDataSourceå¯¹è±¡è¿”å› nil
            return nil
        }
        guard dataSource.groups.count &gt; section else {
            // å½“å–å€¼çš„ç´¢å¼•è¶…å‡ºäº†è¾¹ç•Œè¿”å› nil
            return nil
        }
        return dataSource.groups[section]
    }
</code></pre>
<p>å¯¹äº ZHTableViewGroupçš„å±æ€§cellCount</p>
<pre><code class="language-swift">var cellCount:Int {
        get {
            var count:Int = 0 // åˆå§‹åŒ–é»˜è®¤ Cell çš„æ•°é‡ä¸º0
            for cell in self.cells {
                // ä¾¿åˆ© cells æ•°ç»„çš„ ZHTableViewCell çš„å¯¹è±¡
                count += cell.cellNumber // å¯¹ZHTableViewCellçš„ cell æ•°é‡è¿›è¡Œç´¯åŠ 
            }
            return count
        }
    }
</code></pre>
<h3 id="è¿”å›-uitableviewcell-çš„å¯¹è±¡">è¿”å› UITableViewCell çš„å¯¹è±¡</h3>
<pre><code class="language-swift">public func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell // è¿”å› UITableViewCell çš„å¯¹è±¡
</code></pre>
<p>æˆ‘ä»¬åˆ›å»ºç±»æ–¹æ³•è¿”å› UITableViewCell</p>
<pre><code class="language-swift">    /// è¿”å›å¯¹åº”çš„UITableViewCell
    ///
    /// - Parameters:
    ///   - dataSource: ZHTableViewDataSourceæ•°æ®æºå¯ä»¥ä¸ºç©º
    ///   - indexPath: è·å–æ‰€åœ¨çš„ IndexPath
    /// - Returns: UITableViewCell
    public class func cellForRowAt(dataSource:ZHTableViewDataSource?, indexPath:IndexPath) -&gt; UITableViewCell {
        guard let group = groupForSection(dataSource: dataSource, section: indexPath.section) else {
            // å½“åˆ†ç»„ä¸å­˜åœ¨è¿”å›é»˜è®¤çš„UITableViewCell
            return UITableViewCell()
        }
        guard let cell = group.cellForTableView(tableView: dataSource?.tableView, atIndexPath: indexPath) else {
            // å½“è·å–UITableViewCell è·å–ä¸åˆ°è¿”å›é»˜è®¤çš„UITableViewCell
            return UITableViewCell()
        }
        return cell
    }
</code></pre>
<p>æˆ‘ä»¬åœ¨ ZHTableViewGroup é‡Œé¢æ¥è·å–å¯¹åº”çš„ UITableViewCell</p>
<pre><code class="language-swift">    /// è·å–å¯¹åº”çš„ UITableViewCell
    ///
    /// - Parameters:
    ///   - tableView: å¯¹åº”çš„è¡¨æ ¼ å¯èƒ½ä¸º nil
    ///   - indexPath: å¯¹åº”çš„ IndexPath ç´¢å¼•
    /// - Returns: UITableViewCellå¯èƒ½ä¸º nil
    func cellForTableView(tableView:UITableView?, atIndexPath indexPath:IndexPath) -&gt; UITableViewCell? {
        guard let tableView = tableView else {
            // å½“è¡¨æ ¼ä¸å­˜åœ¨è¿”å› nil
            return nil
        }
        guard let tableViewCell = tableViewCellForIndexPath(indexPath: indexPath) else {
            // å¦‚æœç´¢å¼•è·å–ä¸åˆ°å¯¹åº”çš„ ZHTableViewCell å°±è¿”å› nil
            return nil
        }
        guard let identifier = tableViewCell.identifier else {
            // å¦‚æœç”¨æˆ·æ²¡æœ‰è®¾ç½® Identifier å°±è¿”å› nil
            return nil
        }
        let cell = tableView.dequeueReusableCell(withIdentifier: identifier, for: indexPath) // è·å–é‡ç”¨çš„ Cell
        tableViewCell.configCell(cell: cell, indexPath: indexPath) // é…ç½® cell
        return cell
    }
</code></pre>
<p>è·å–ç´¢å¼•å¯¹åº”çš„ ZHTableViewCell</p>
<pre><code class="language-swift">    /// æ ¹æœ¬ç´¢å¼•è·å–å¯¹åº”çš„ZHTableViewCell
    ///
    /// - Parameter indexPath:  IndexPath çš„ç´¢å¼•
    /// - Returns: ZHTableViewCellå¯èƒ½ä¸º nil
    func tableViewCellForIndexPath(indexPath:IndexPath) -&gt; ZHTableViewCell? {
        guard indexPath.row &lt; self.cellCount else {
            // å¦‚æœç´¢å¼•è¶…å‡ºäº†æ€»ä¸ªæ•°å°±è¿”å› nil
            return nil
        }
        var count:Int = 0 // è®¾ç½® cell æ€»æ•°åˆå§‹å€¼
        var tableViewCell:ZHTableViewCell? // ä¿å­˜ZHTableViewCellå˜é‡
        for cell in self.cells {
            // ä¾¿åˆ© cells æ•°ç»„é‡Œé¢çš„ZHTableViewCell
            count += cell.cellNumber // ç´¯åŠ  cell çš„æ•°é‡
            if indexPath.row &lt; count {
                // å½“ç´¢å¼•åœ¨å½“å‰ZHTableViewCellèŒƒå›´å†… å°±è¿”å›ZHTableViewCellå¯¹è±¡
                tableViewCell = cell
                break
            }
        }
        return tableViewCell
    }
</code></pre>
<h2 id="è®¾ç½®-cell-çš„é«˜åº¦">è®¾ç½® Cell çš„é«˜åº¦</h2>
<pre><code class="language-swift">public func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat // è®¾ç½® Cell çš„é«˜åº¦
</code></pre>
<pre><code class="language-swift">    /// è·å– cell çš„é«˜åº¦
    ///
    /// - Parameters:
    ///   - dataSource: ZHTableViewDataSourceæ•°ç»„æº
    ///   - indexPath: ç´¢å¼•ä½ç½®
    ///   - customHeightCompletionHandle: è‡ªå®šä¹‰é«˜åº¦æ–¹æ³•å›è°ƒ
    /// - Returns:  cell çš„é«˜åº¦
    public class func heightForRowAt(dataSource:ZHTableViewDataSource?, indexPath:IndexPath, customHeightCompletionHandle:ZHTableViewDataSourceCustomHeightCompletionHandle?) -&gt; CGFloat {
        guard let cell = cellForIndexPath(dataSource: dataSource, atIndexPath: indexPath) else {
            // å¦‚æœ ZHTableViewCell ä¸å­˜åœ¨å°±ç›´æ¥è¿”å›0
            return 0
        }
        return heightWithCustomHandle(height: cell.height, customCompletionHandle: customHeightCompletionHandle)
    }
</code></pre>
<p>è·å–é«˜åº¦åˆ¤æ–­çš„æ–¹æ³•</p>
<pre><code class="language-swift">    ///  è¿”å›é«˜åº¦
    ///
    /// - Parameters:
    ///   - height: å›ºå®šçš„é«˜åº¦
    ///   - customCompletionHandle: è‡ªå®šä¹‰é«˜åº¦å›è°ƒ
    /// - Returns: é«˜åº¦
    private class func heightWithCustomHandle(height:CGFloat, customCompletionHandle:ZHTableViewDataSourceCustomHeightCompletionHandle?) -&gt; CGFloat {
        if height == CGFloat(NSNotFound) {
            // å¦‚æœç”¨æˆ·æ²¡æœ‰è®¾ç½®é«˜åº¦ å°±æŸ¥çœ‹ç”¨æˆ·æ˜¯å¦è‡ªå®šä¹‰é«˜åº¦æ–¹æ³•
            guard let customCompletionHandle = customCompletionHandle else {
                // å¦‚æœç”¨æˆ·è‡ªå®šä¹‰é«˜åº¦æ–¹æ³•ä¸å­˜åœ¨ å°±è¿”å›0
                return 0
            }
            return customCompletionHandle() // è¿”å›ç”¨æˆ·çš„è‡ªå®šä¹‰é«˜åº¦
        } else {
            return height // è¿”å›ç”¨æˆ·æå‰è®¾å®šçš„å›ºå®šé«˜åº¦
        }
    }
</code></pre>
<h2 id="ç‚¹å‡»-cell">ç‚¹å‡» Cell</h2>
<pre><code class="language-swift">public func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) //ç‚¹å‡» Cell
</code></pre>
<pre><code class="language-swift">    /// ç‚¹å‡» cell
    ///
    /// - Parameters:
    ///   - dataSource: ZHTableViewDataSourceæ•°æ®æº
    ///   - indexPath: ç´¢å¼•ä½ç½®
    public class func didSelectRowAt(dataSource:ZHTableViewDataSource?, indexPath:IndexPath) {
        guard let tableViewCell = cellForIndexPath(dataSource: dataSource, atIndexPath: indexPath) else {
            // å½“æ‰¾ä¸åˆ° ZHTableViewCell ä¸å­˜åœ¨å°±ç›´æ¥è¿”å›
            return
        }
        let cell = cellForRowAt(dataSource: dataSource, indexPath: indexPath) // è·å–ç‚¹å‡»çš„ cell
        tableViewCell.didSelectRowAt(cell: cell, indexPath: indexPath) // å‘Šè¯‰ZHTableViewCell ç‚¹å‡»äº† cell
    }
</code></pre>
<p>æ›´å¯¹çš„ä¿¡æ¯è¯·æŸ¥çœ‹ <a href="https://github.com/josercc/ZHTableViewGroupSwift/blob/master/README.md">ReadMe</a></p>
 </p>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              <div class="next-post">
                                  <div class="next">ä¸‹ä¸€ç¯‡</div>
                                  <a href="https://joserccblog.github.io/post/2017-11-27-å…³äºé¦–é¡µè®¾è®¡æ¡†æ¶å’Œä¸€äº›ç»†èŠ‚å¤„ç†åˆ†æ">
                                      <h3 class="post-title">
                                          å…³äºé¦–é¡µè®¾è®¡æ¡†æ¶å’Œä¸€äº›ç»†èŠ‚å¤„ç†åˆ†æ
                                      </h3>
                                  </a>
                              </div>
                          
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              

                              
                                  <div id="disqus_thread"></div>
                              
                          
                      </div>
                  </div>
              </div>

          </article>
      </div>
  </div>

    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
</footer>


    <!-- jQuery -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/md5.min.js"></script>

<script type="application/javascript">
    hljs.initHighlightingOnLoad();
</script>



    

    
        <script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>
        <script>

            var options = {
                shortname: 'josercc',
                apikey: 'DBJHHPsqZBT5EUYFyQmorAozkwxTDoySOnd4bmdt9G29YFySUFhFE6SLZrSCHee4',
            }
            if ('') {
                options.api = ''
            }
            var dsqjs = new DisqusJS(options)

        </script>
    




  </body>
</html>
