<!DOCTYPE html>
<html>
  <head>
      
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- ç™¾åº¦éªŒè¯ -->
<meta name="baidu-site-verification" content="1IkquSGR9Z"/>

<title>å›èµåšå®¢</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡"/>
<meta name="keywords" content="2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://joserccblog.github.io/favicon.ico">

<link rel="stylesheet" href="https://joserccblog.github.io/styles/main.css">

<!-- Modernizr JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://joserccblog.github.io/media/scripts/_vendors/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->

    

    
        <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css" />
    


<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>

<link crossorigin="anonymous" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" href="https://lib.baomitu.com/font-awesome/5.8.1/css/all.min.css" rel="stylesheet">

  </head>
  <body>
  
<div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://joserccblog.github.io/media/images/avatar.png" alt="å›èµåšå®¢" class="img-responsive">
        </figure>
        <h3 class="heading">ABOUT ME</h3>
        <h2>å›èµåšå®¢</h2>
        <p>2012å¹´ä»äº‹iOSå¼€å‘ï¼Œèµ„æ·±iOSå¼€å‘èœé¸Ÿï¼Œç›®å‰åœ¨ç¯çƒæ˜“è´­å å‘ã€‚å–œæ¬¢ç ”ç©¶åé—¨æŠ€æœ¯ï¼Œå–œæ¬¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ï¼Œå–œæ¬¢ç ”ç©¶å°è½¯ä»¶æé«˜ç¼–ç¨‹æ•ˆç‡</p>
        <ul class="fh5co-social">
            
                <li>
                    
                        <a href="https://github.com/josercc" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                        <a href="https://weibo.com/kuaiqiantong" target="_blank">
                            <i class="fab fa-weibo"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">
        <div class="fh5co-box">
            <h3 class="heading">æœç´¢</h3>
            <form action="#">
                <div class="form-group">
                    <input type="text" id="bdcsMain" class="form-control" placeholder="è¾“å…¥å…³é”®å­—">
<!--                    <button type="submit" class="btn btn-sm btn-warning" style="margin-top: 6px; width: 100%">ç‚¹å‡»æœç´¢</button>-->
                </div>
            </form>
        </div>
        <div class="fh5co-box">
            <h3 class="heading">æ ‡ç­¾</h3>
            <ul>
                
                    <li><a href="https://joserccblog.github.io/tag/swift">Swift</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ios">iOS</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/framework">Framework</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/carthage">Carthage</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/cocoapods">Cocoapods</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/masonry">Masonry</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/yue-shu-chong-tu">çº¦æŸå†²çª</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uistackview">UIStackView</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ios11">iOS11</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/sheng-huo">ç”Ÿæ´»</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zhi-shi-dian">çŸ¥è¯†ç‚¹</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/testflight">TestFlight</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/guo-ji-hua">å›½é™…åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xcode9">Xcode9</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zi-dong-hua">è‡ªåŠ¨åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/hei-mo-fa">é»‘é­”æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/ota">OTA</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xctest">XCTest</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/appstore">AppStore</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/mac">Mac</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/gan-xiang">æ„Ÿæƒ³</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xcode">Xcode</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/svn">SVN</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xiang-fa">æƒ³æ³•</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/di-san-fang-ku">ç¬¬ä¸‰æ–¹åº“</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/mo-kuai-hua">æ¨¡å—åŒ–</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/c">C</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/autolayout">AutoLayout</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/xib">Xib</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/clang-format">Clang Format</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/objetive-c">Objetive-C</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/zhou-bao">å‘¨æŠ¥</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/jekyll">Jekyll</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/server">Server</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uibarbuttonitem">UIBarButtonItem</a></li>
                
                    <li><a href="https://joserccblog.github.io/tag/uitextfiled">UITextFiled</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                         >
                            é¦–é¡µ
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                         >
                            å½’æ¡£
                        </a>
                    </li>
                
                    <li>
                        <a href="/tags"
                         >
                            æ ‡ç­¾
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/about"
                         >
                            å…³äº
                        </a>
                    </li>
                
                    <li>
                        <a href="/post/contact/"
                         >
                            è”ç³»ä½œè€…
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://joserccblog.github.io">å›èµåšå®¢ </a>
                </h1>
            </div>
        </div>
    </div>
</header>


<!--  <a href="#" class="fh5co-post-prev"><span>ğŸ‘ˆ Prev</span></a>-->
<!--  <a href="#" class="fh5co-post-next"><span>Next ğŸ‘‰</span></a>-->

  <div class="container-fluid">
      <div class="row fh5co-post-entry single-entry">
          <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
              <figure class="animate-box">
                  
                      <img src="http://ipicimage-1251019290.coscd.myqcloud.com/2017-11-27-023346.jpg" alt="å…³äºæœç´¢å‡ºæ¥çš„å†…å®¹æ ¹æ®æƒé‡è¿›è¡Œæ’åº" class="img-responsive">
                  
              </figure>
              <span class="fh5co-meta animate-box">
                  
                      <div class="tag-container">
                          
                              <a href="https://joserccblog.github.io/tag/ios" class="tag">iOS, </a>
                          
                      </div>
                  
              </span>
              <h2 class="fh5co-article-title animate-box">å…³äºæœç´¢å‡ºæ¥çš„å†…å®¹æ ¹æ®æƒé‡è¿›è¡Œæ’åº</h2>
              <span class="fh5co-meta fh5co-date animate-box">2017-11-27</span>

              <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                  <div class="row">
                      <div class="col-md-12 animate-box post-content">
                          <p> <p><img src="http://upload-images.jianshu.io/upload_images/545662-0d26d729ac9bb914.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>è¿™æ˜¯æ•´ä¸ªåŠŸèƒ½çš„æµç¨‹ã€‚</p>
<p>å¯¹äºè¿™éœ€æ±‚è¦åšåˆ°ç™¾åº¦æœç´¢æˆ‘å‘¸ï¼Œè°·æ­Œæœç´¢çš„æƒé‡æ’åºï¼Œæˆ‘æ¥åˆ°è¿™ä¸ªéœ€æ±‚æ˜¯æ‹’ç»çš„ã€‚åæ¥ç»è¿‡å’Œå°ä¼™ä¼´çš„ç ”ç©¶ï¼Œè§‰å¾—è¿™ä¸ªæŒ‰ç…§æƒé‡æ’åºæ˜¯å¯ä»¥å®ç°çš„ã€‚</p>
<p>ä¸‹é¢è¯´ä¸€ä¸‹å…·ä½“æ€è·¯ã€‚</p>
<pre><code class="language-objective-c">@[@&quot;abcd&quot;,@&quot;1abcd&quot;,@&quot;abcd1&quot;,@&quot;ab1cd&quot;,@&quot;1ab2cd&quot;,@&quot;abdc&quot;]
</code></pre>
<p>ä¸Šé¢æ˜¯ä¸€ä¸ªæ•°ç»„çš„å­—ç¬¦ä¸²ï¼Œå°±å½“æ˜¯æˆ‘ä»¬æŸ¥æ‰¾å‡ºæ¥çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†æ˜¯æˆ‘ä»¬è¦æŒ‰ç…§æˆ‘ä»¬æœç´¢å‡ºæ¥çš„å…³é”®è¯çš„ç›¸ä¼¼åº¦è¿›è¡Œæ’åºã€‚</p>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦æœç´¢çš„å­—ç¬¦ä¸²æ˜¯<strong>abcd</strong>ï¼Œå¯¹äºäººçœ¼æ¥è¯´ç›´æ¥åŒ…å«<strong>abcd</strong>çš„æ˜¯æ’åœ¨æœ€å‰é¢çš„ã€‚</p>
<p>ä½†æ˜¯åŒ…å«<strong>abcd</strong>çš„æœ‰<strong>abcd</strong>,<strong>1abcd</strong>,<strong>abcd1</strong>ã€‚å¾ˆæ˜æ˜¾è¿™ä¸‰ä¸ªé¡ºåº<strong>abcd</strong>,<strong>abcd1,1abcd</strong>.</p>
<p>æˆ‘ä»¬è‚‰çœ¼æ˜¯å¯ä»¥çœ‹å‡ºæ¥çš„ä½†æ˜¯ç¨‹åºä¸çŸ¥é“ï¼Œè¿™å°±æ¶‰åŠåˆ°æƒé‡çš„é—®é¢˜äº†ã€‚</p>
<p>æˆ‘ä»¬æŒ‰ç…§å­—æ¯æ‰€åœ¨çš„ä½ç½®è¿›è¡Œæƒé‡çš„è®¡ç®—ï¼Œæƒé‡è¶Šä½çš„æ’åœ¨æœ€å‰é¢ã€‚</p>
<p><strong>abcd</strong>æƒé‡æ˜¯<strong>0+1+2+3 = 6</strong></p>
<p><strong>abcd1</strong>æƒé‡æ˜¯<strong>0+1+2+3 = 6</strong></p>
<p><strong>1abcd</strong>çš„æƒé‡æ˜¯<strong>1+2+3+4 = 10</strong></p>
<p>ç°åœ¨å‡ºç°äº†ä¸¤ä¸ªæƒé‡ä¸º<strong>6</strong>çš„ï¼Œä½†æ˜¯<strong>abcd</strong>è¿™ä¸ªå®Œå…¨å’Œæˆ‘ä»¬è¾“å…¥çš„ä¸€æ ·ã€‚<strong>abcd1</strong>å¤šäº†ä¸€ä¸ª<strong>1</strong>,æˆ‘ä»¬æŒ‰ç…§åŒæ ·çš„æƒé‡ï¼Œå­—ç¬¦ä¸²é•¿åº¦è¶ŠçŸ­è¶Šæ’åœ¨å‰é¢ã€‚</p>
<p>é‚£ä¹ˆè¿™ä¸‰ä¸ªå­—ç¬¦ä¸²æ’åºå˜æˆäº†<strong>abcd</strong> <strong>abcd1</strong> <strong>1abcd</strong></p>
<p>å‰©ä¸‹çš„å­—ç¬¦ä¸²<strong>ab1cd</strong> <strong>1ab2cd</strong> <strong>abdc</strong>äº†ã€‚</p>
<p>æˆ‘ä»¬è¿›è¡Œæ¨¡ç³Šæœç´¢ï¼Œä½†æ˜¯æ€ä¹ˆè¿›è¡Œæ¨¡ç³Šæœç´¢å‘¢?å°ä¼™ä¼´è¯´è¿›è¡Œè¾“å…¥çš„æ–‡å­—ä¸€ä¸ªä¸€ä¸ªçš„è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ‰¾åˆ°å°±è¶…æ‰¾å‰©ä¸‹çš„ã€‚</p>
<p>æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ–¹æ³•æŸ¥æ‰¾<strong>ab1cd</strong> <strong>1ab2cd</strong>ä¸¤ä¸ªã€‚</p>
<p>ä½†æ˜¯è¿™ä¸¤ä¸ªæ€ä¹ˆæ’åºå‘¢ è¿˜æ˜¯è¿›è¡Œæƒé‡æ’åºã€‚</p>
<p><strong>ab1cd</strong>çš„æƒé‡ <strong>0+1+3+4 = 8</strong></p>
<p><strong>1ab2cd</strong>çš„æƒé‡æ˜¯ <strong>1+2+4+5 = 12</strong></p>
<p>é‚£ä¹ˆè¿™ä¸¤ä¸ªè¿›è¡Œæƒé‡æ’åºæ˜¯<strong>ab1cd</strong> <strong>1ab2cd</strong></p>
<p>å‰©ä¸‹çš„ä¸æ»¡è¶³ç²¾ç¡®æœç´¢å’Œæ¨¡ç³Šæœç´¢ï¼Œåº”è¯¥ç›´æ¥è¿‡æ»¤æ‰çš„ä½†æ˜¯è€ƒè™‘åˆ°å¯èƒ½è¿™ä¸ªç®—æ³•æœ‰é—®é¢˜å°±æš‚æ—¶æŒ‰ç…§å­—ç¬¦ä¸²çš„é•¿åº¦è¿›è¡Œæ’åº å…¨éƒ¨æ”¾åœ¨æœ€åã€‚</p>
<p>ä¸‹é¢æ˜¯å®ç°çš„ä»£ç ã€‚</p>
<pre><code class="language-objective-c">GBSortSearchCountryManger
</code></pre>
<p>å¯¹æœç´¢å‡ºæ¥çš„ç»“æœè¿›è¡Œæ’åºçš„ç®¡ç†ç±»ã€‚</p>
<pre><code class="language-objective-c">/**
 éœ€è¦è¿›è¡Œæ’åºçš„æ•°ç»„å­—ç¬¦ä¸²
 */
@property (nonatomic, strong) NSArray&lt;NSString *&gt; *searchResult;
</code></pre>
<p>è¿›è¡Œè¿‡æ»¤çš„æ•°æ®æº</p>
<pre><code class="language-objective-c">/**
 å¯¹æ•°æ®æºè¿›è¡ŒæŒ‰ç…§æƒé‡æ’åºä¹‹åçš„æ•°ç»„

 @param searchText æœç´¢çš„å­—ç¬¦ä¸²
 @return æŒ‰ç…§æƒé‡æ’åºæ•°ç»„
 */
- (NSArray&lt;NSString *&gt; *)sortSearchResultWithSearchText:(NSString *)searchText;
</code></pre>
<p>è¿›è¡Œè¿‡æ»¤çš„æ–¹æ³•</p>
<pre><code class="language-objective-c">- (NSArray&lt;NSString *&gt; *)sortSearchResultWithSearchText:(NSString *)searchText {
    _currentSortLevelType = SSCSortLevelTypeExactMatch; // å¼€å§‹è®¾ç½®ç²¾ç¡®çš„æœç´¢
    _currentSearchText = searchText;
    NSMutableArray&lt;GBSortSearchCountryItem *&gt; *sortItems = [NSMutableArray array];
    NSMutableArray&lt;NSString *&gt; *sortTempList = [NSMutableArray array];
    [self.searchResult enumerateObjectsUsingBlock:^(NSString * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        // ç»„è£…æ•°æ®æº
        GBSortSearchCountryItem *item = [[GBSortSearchCountryItem alloc] init];
        item.text = obj;
        [sortItems addObject:item];
    }];
    while (_currentSortLevelType &lt;= SSCSortLevelTypeOther) {
        // å½“æŸ¥è¯¢çš„çŠ¶æ€å¤§äºå…¶ä»–æŸ¥è¯¢å°±é€€å‡º
        NSArray *sortItemList = [self sortItemWithLevelType:_currentSortLevelType sortResultItems:sortItems];
        [sortItemList enumerateObjectsUsingBlock:^(GBSortSearchCountryItem *  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
            [sortTempList addObject:obj.text];
        }];
        [sortItems removeObjectsInArray:sortItemList];
        _currentSortLevelType ++;
    }
    return sortTempList;
}

</code></pre>
<p>å®ç°æ–¹æ³•</p>
<pre><code class="language-objective-c">/**
 æŸ¥è¯¢å½“å‰æŸ¥è¯¢çš„æ•°æ®

 @param levelType æŸ¥è¯¢çš„ç±»å‹
 @param items å‰©ä½™çš„æ•°æ®æº
 @return è¿”å›æŸ¥è¯¢å‡ºæ¥çš„å¯¹è±¡
 */
- (NSArray&lt;GBSortSearchCountryItem *&gt; *)sortItemWithLevelType:(SSCSortLevelType)levelType
                                              sortResultItems:(NSArray&lt;GBSortSearchCountryItem *&gt; *)items {
    NSMutableArray&lt;GBSortSearchCountryItem *&gt; *sortItems = [NSMutableArray array]; // ä¿å­˜æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®æº
    switch (levelType) {
        case SSCSortLevelTypeExactMatch: {
            // ç²¾ç¡®æœç´¢
            [items enumerateObjectsUsingBlock:^(GBSortSearchCountryItem * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
                NSRange range = [obj.text rangeOfString:_currentSearchText]; // æŸ¥è¯¢æŸ¥è¯¢çš„å­—ç¬¦ä¸²æ˜¯å¦åœ¨æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å­˜åœ¨
                if (range.location != NSNotFound) {
                    // å¦‚æœå­˜åœ¨å°±ç¬¦åˆç²¾ç¡®æŸ¥æ‰¾çš„ç»“æœ
                    obj.levelTag = [self exactMatchCountWithRange:range]; // æŸ¥æ‰¾æƒé‡
                    [sortItems addObject:obj];
                }
            }];
            sortItems = [NSMutableArray arrayWithArray:[self sortWithList:sortItems]]; // æ ¹æ®æƒé‡è¿›è¡Œæ’åº
        }
            break;
        case SSCSortLevelTypeFuzzySearch: {
            // æŒ‰ç…§é¡ºåºæ¨¡ç³Šæœç´¢
            [items enumerateObjectsUsingBlock:^(GBSortSearchCountryItem * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
                NSInteger count = [self fuzzySearchLevelTagWithItem:obj]; // æŸ¥è¯¢æ¨¡ç³Šæœç´¢çš„æƒé‡ å¦‚æœæ˜¯0ä»£è¡¨æ²¡æ‰¾åˆ°
                if (count != NSNotFound) {
                    obj.levelTag = count;
                    [sortItems addObject:obj];
                }
            }];
            sortItems = [NSMutableArray arrayWithArray:[self sortWithList:sortItems]];
        }
            break;
        case SSCSortLevelTypeOther: {
            [items sortedArrayUsingComparator:^NSComparisonResult(GBSortSearchCountryItem *  _Nonnull obj1, GBSortSearchCountryItem *  _Nonnull obj2) {
                if (obj1.text.length &gt; obj2.text.length) {
                    return NSOrderedDescending;
                }else if(obj1.text.length &lt; obj2.text.length) {
                    return NSOrderedAscending;
                }else {
                    return NSOrderedSame;
                }
            }];
            // å‰©ä½™çš„ç»“æœ é˜²æ­¢ç®—æ³•æœ‰é—®é¢˜ é€ æˆæ•°æ®å¸…é€‰çš„bug
            [sortItems  addObjectsFromArray:items];
        }
            break;
        default:
            break;
    }
    return sortItems;
}
</code></pre>
<p>æ ¹æ®éœ€è¦è¿‡æ»¤çš„ç±»å‹è¿›è¡Œè¿‡æ»¤</p>
<pre><code class="language-objective-c">/**
 è®¡ç®—ç²¾ç¡®æœç´¢å‡ºæ¥çš„æƒé‡

 @param range æœç´¢å­—ç¬¦ä¸²çš„ä½ç½®
 @return æƒé‡
 */
- (NSUInteger)exactMatchCountWithRange:(NSRange)range {
    NSUInteger currentIndex = range.location;
    NSUInteger count = 0;
    while (currentIndex &lt; range.location + range.length) {
        count += currentIndex;
        currentIndex ++;
    }
    return count;
}
</code></pre>
<p>è®¡ç®—ç²¾ç¡®æœç´¢çš„æƒé‡</p>
<pre><code class="language-objective-c">/**
 æŸ¥è¯¢æ¨¡ç³Šæœç´¢çš„æƒé‡

 @param item æ¨¡ç³Šæœç´¢çš„å­—ç¬¦ä¸²
 @return æƒé‡
 */
- (NSUInteger)fuzzySearchLevelTagWithItem:(GBSortSearchCountryItem *)item {
    NSUInteger count = 0; // æƒé‡
    NSUInteger quertCharactersLocation = 0; // æŸ¥è¯¢å­—ç¬¦ä¸²æ‰€åœ¨çš„ä½ç½®
    NSString *itemText = item.text; // éœ€è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²
    while (quertCharactersLocation &lt; item.text.length) {
        // å½“å­—ç¬¦ä¸²æŸ¥æ‰¾å®Œæ¯•è·³å‡ºå¾ªç¯
        NSString *character = [item.text substringWithRange:NSMakeRange(quertCharactersLocation, 1)]; // æˆªå–æŸ¥æ‰¾çš„å­—ç¬¦
        NSRange range = [itemText rangeOfString:character]; // æŸ¥æ‰¾å­—ç¬¦æ‰€åœ¨å­—ç¬¦ä¸²çš„ä½ç½®
        if (range.location == NSNotFound) {
            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°è·³å‡ºæ–¹æ³•
            return NSNotFound;
        }
        count += range.location; // è®¡ç®—æƒé‡
        quertCharactersLocation ++; // è¿›è¡Œä¸‹ä¸€ä¸ªå­—ç¬¦æŸ¥æ‰¾
        itemText = [itemText substringFromIndex:quertCharactersLocation]; // è¿‡æ»¤å‰©ä¸‹çš„å­—ç¬¦ä¸² å¯ä»¥æ ¹æ®è¾“å…¥é¡ºåºæŸ¥æ‰¾
    }
    return count;
}
</code></pre>
<p>æ¨¡ç³Šæœç´¢çš„æƒé‡</p>
<pre><code class="language-objective-c">/**
 å¯¹æœç´¢å‡ºæ¥çš„ç»“æœè¿›è¡Œæ’åº

 @param list åˆ—è¡¨
 @return æ ¹æ®æƒé‡æ’åºä¹‹åçš„åˆ—è¡¨
 */
- (NSArray&lt;GBSortSearchCountryItem *&gt; *)sortWithList:(NSArray&lt;GBSortSearchCountryItem *&gt; *)list {
    NSMutableArray *sortList = [NSMutableArray arrayWithArray:list];
    [sortList sortUsingComparator:^NSComparisonResult(GBSortSearchCountryItem *  _Nonnull obj1, GBSortSearchCountryItem * _Nonnull obj2) {
        if (obj1.levelTag &gt; obj2.levelTag) {
            // å¦‚æœæƒé‡é«˜å°±æ’åœ¨æœ€å
            return NSOrderedDescending;
        }else if (obj1.levelTag &lt; obj2.levelTag) {
            // æƒé‡ä½å°±æ’åœ¨æœ€å‰é¢
            return NSOrderedAscending;
        }else {
            // æƒé‡ä¸€æ ·
            if (obj1.text.length &gt; obj2.text.length) {
                // å­—ç¬¦ä¸²é•¿çš„æ’åœ¨åé¢
                return NSOrderedDescending;
            }else if (obj1.text.length &lt; obj2.text.length) {
                // å­—ç¬¦ä¸²çŸ­çš„æ’åœ¨å‰é¢
                return NSOrderedAscending;
            }else {
                // ä¸€æ ·å°±ç›¸ç­‰
                return NSOrderedSame;
            }
        }
    }];
    return sortList;
}

</code></pre>
<p>æ ¹æ®æƒé‡è¿›è¡Œæ’åº</p>
<p>æˆ‘ä»¬è¿›è¡Œæµ‹è¯•ã€‚</p>
<pre><code class="language-objective-c">    NSArray *array = @[@&quot;abcd&quot;,@&quot;1abcd&quot;,@&quot;abcd1&quot;,@&quot;ab1cd&quot;,@&quot;1ab2cd&quot;,@&quot;abdc&quot;];
    GBSortSearchCountryManger *manger = [[GBSortSearchCountryManger alloc] init];
    manger.searchResult = array;
    NSArray *sortList =  [manger sortSearchResultWithSearchText:@&quot;abcd&quot;];
    [sortList enumerateObjectsUsingBlock:^(NSString * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        NSLog(@&quot;-&gt;&gt;&gt;%@&quot;,obj);
    }];
</code></pre>
<pre><code class="language-c">2016-12-19 13:44:11.578 GearBest[5812:189459] -&gt;&gt;&gt;abcd
2016-12-19 13:44:11.579 GearBest[5812:189459] -&gt;&gt;&gt;abcd1
2016-12-19 13:44:11.579 GearBest[5812:189459] -&gt;&gt;&gt;1abcd
2016-12-19 13:44:11.579 GearBest[5812:189459] -&gt;&gt;&gt;ab1cd
2016-12-19 13:44:11.580 GearBest[5812:189459] -&gt;&gt;&gt;1ab2cd
2016-12-19 13:44:11.580 GearBest[5812:189459] -&gt;&gt;&gt;abdc
</code></pre>
<p>ä¸Šé¢å°±æ˜¯æƒé‡æ’åºç®—æ³•çš„å®ç°ã€‚è¿™ä¸ªç®—æ³•æœ‰ç‚¹ç¬¨æ‹™ï¼Œå¦‚æœæœç´¢èŒƒå›´å¤§ä¸€å®šå¡çš„è¦å‘½ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬éœ€æ±‚åªæœ‰ä¸¤ç™¾ä¸ªå›½å®¶è¿˜å¯ä»¥ã€‚</p>
 </p>
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              <div class="next-post">
                                  <div class="next">ä¸‹ä¸€ç¯‡</div>
                                  <a href="https://joserccblog.github.io/post/2017-11-27-è‡ªå®šä¹‰è¾“å…¥æ¡†é€ è½®å­å¤§æ³•">
                                      <h3 class="post-title">
                                          è‡ªå®šä¹‰è¾“å…¥æ¡†é€ è½®å­å¤§æ³•
                                      </h3>
                                  </a>
                              </div>
                          
                      </div>
                  </div>

                  <div class="row">
                      <div class="col-md-12 animate-box">
                          
                              

                              
                                  <div id="disqus_thread"></div>
                              
                          
                      </div>
                  </div>
              </div>

          </article>
      </div>
  </div>

    
<footer id="fh5co-footer">
  <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a></p>
</footer>


    <!-- jQuery -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://joserccblog.github.io/media/scripts/_vendors/md5.min.js"></script>

<script type="application/javascript">
    hljs.initHighlightingOnLoad();
</script>



    

    
        <script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>
        <script>

            var options = {
                shortname: 'josercc',
                apikey: 'DBJHHPsqZBT5EUYFyQmorAozkwxTDoySOnd4bmdt9G29YFySUFhFE6SLZrSCHee4',
            }
            if ('') {
                options.api = ''
            }
            var dsqjs = new DisqusJS(options)

        </script>
    




  </body>
</html>
