<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>原生支付 SDK 技术回顾 | 君赏博客</title>
<meta name="description" content="2012年从事iOS开发，资深iOS开发菜鸟，目前在环球易购占坑。喜欢研究偏门技术，喜欢自动化编程，喜欢研究小软件提高编程效率" />
<link rel="shortcut icon" href="https://joserccblog.github.io/favicon.ico">
<link rel="stylesheet" href="https://joserccblog.github.io/styles/main.css">

<script src="https://joserccblog.github.io/media/js/jquery.min.js"></script>
<script src="https://joserccblog.github.io/media/js/masonry.pkgd.min.js"></script>
<script src="https://joserccblog.github.io/media/js/aos.js"></script>
<script src="https://joserccblog.github.io/media/js/pace.min.js"></script>
<script src="https://joserccblog.github.io/media/js/view-image.min.js"></script>
<script src="https://joserccblog.github.io/media/js/functions.js"></script>
    <script src="https://joserccblog.github.io/media/js/waterfall.min.js"></script>
    <script src="https://joserccblog.github.io/media/js/prism.min.js"></script>
    
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
    
  </head>
  <body>
            <header id="header" class="grid-container">
        <!-- start: .menu-wrapper -->
        <div class="menu-mobile"> 
          <i class="fa fa-reorder"></i>
        </div>
        <div class="menu-wrapper">
          <div class="">
            <div class="logo">
              <a href="https://joserccblog.github.io"><img src="https://joserccblog.github.io/media/images/logoo.png" alt=""></a>
            </div>
            <!-- start: .main-nav -->

            <nav class="main-nav grid-container grid-parent">
              <ul id="menu-header" class="menu gradient-effect">
                
                  <li class=""><a href="https://joserccblog.github.io" class="menu">首页</a></li>
                
                
                  <li class="" >
                    <a href="/archives" class="menu">
                      归档
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/tags" class="menu">
                      标签
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/post/about" class="menu">
                      关于
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/post/contact/" class="menu">
                      联系作者
                    </a>
                  </li>
                
              </ul>
            </nav>
            <!-- end: .main-nav -->
            <div class="clear"></div>
            <div class="border hide-on-tablet hide-on-mobile"></div>
          </div>    
          <div class="clear"></div>
        </div>
        <!-- end: .menu-wrapper -->
        <div class="clear"></div>
      </header>

      <main id="single" class="main grid-container fullcover no-sidebar aos-init aos-animate" data-aos="fade">

        <div class="center content">
          <div class="featured-image cover" style="background-image: url('https://diycode.b0.upaiyun.com/photo/2018/508a17fd16640c71221f97aaf5fe412d.png');">
            <div class="meta top"> 
              <time class="meta-info" style="float:left;" datetime="2019-04-19"><i class="fa fa-calendar"></i><span class="lately">9 个月前</span></time>
               
               
               <span id="/post/yuan-sheng-zhi-fu-sdk-ji-zhu-hui-gu/" class="leancloud_visitors views-counter meta-info">
                <i class="fa fa-leancloud"></i><span class="leancloud-visitors-count" style="vertical-align: middle;">0</span>
               </span>
               
            </div>
            <div class="info">
              <div class="tags ">
                
              </div>
              <h1 class="title ularge white bold">原生支付 SDK 技术回顾</h1>
            </div>
          </div>
        </div>  

        <div class="epcl-page-wrapper">
          <div class="left-content grid-70 np-mobile">
            <article class="main-article post">
              <section class="post-content">
                <div class="text">
                  <blockquote>
<p>最近的一个月一直在做原生支付 SDK 的事情，最近第一个版本才上线，才慢慢的回顾做原生支付 SDK 的一些技术点。</p>
<p>之前项目里面的支付部分都是基于 M 网页的支付，一般支付出问题也只是网站的事情。但是也涉及到对于电商项目技术核心支付客户端并没有。</p>
<p>对于支付原生 SDK 开始的设想，从17年初提出 PayPal 原生支付 SDK 的设想，从 PayPal 自身的 SDK 技术不成熟搁置了。到最新因为支付率的下降，也从支付做成原生的来提高转化率渐渐的提上了日程。</p>
<p>支付的原生化导致了支付风险从网站转移到客户端，一下子也让我们涉及到了支付这一块从来都没碰到的领域。</p>
</blockquote>
<p>对于支付原生 SDK 涉及到的一些技术点如下：</p>
<ul>
<li>RTL 语言的翻转
<ul>
<li>各种控件翻转</li>
<li>强行不翻转文本</li>
</ul>
</li>
<li>静态库制作</li>
<li>Bitcode 支持</li>
<li>Bundle 资源文件坑
<ul>
<li>bundle 所在位置的不同</li>
</ul>
</li>
<li>项目集成</li>
<li>图片
<ul>
<li>代码改动颜色</li>
<li>自动翻转</li>
</ul>
</li>
<li>关于信用卡加密</li>
<li>金额精度计算</li>
<li>统计
<ul>
<li>崩溃</li>
<li>FPS</li>
<li>中断时长</li>
</ul>
</li>
</ul>
<h2 id="项目立项">项目立项</h2>
<p>这个项目从十一放假之前开始提起，当时只觉得这个项目只是属于我们平时工作附属品。工作任务优先，有空再来开展支付原生 SDK。</p>
<p>等到了十一放假结束之后，从新开始支付原生评审的时候，发现留给我们的时间并不多了，困难强度十分大。</p>
<p>怎么表述这个难度，当时我们评审这个支付收银台页面原生化的时候，我们评审的时间工作时间需要45天。而且在项目重构的时候，当时网站整个团队整整的做了将近两个月的时间。</p>
<p>但是评审需要十月19号提测，那么留给我们的开发时间只有8天的工作日。并且负责开发我和安卓两个人，其他人还在做正常版本的需求。</p>
<p>8天的时间需要完成这么多的东西，我当时都觉得是不可能的事情。只好把当时已经完成和半完成的需求交给了团队的小伙伴，我全心全意的投入支付原生 SDK 的研发之中。</p>
<p>对于这个项目整个开发计划，我分为了下面的几个阶段:</p>
<ul>
<li>项目框架的搭建</li>
<li>收银台界面的编写</li>
<li>支付加密的完成</li>
<li>支付方式的跑通</li>
<li>信用卡表单的验证</li>
<li>多语言</li>
<li>埋点</li>
<li>后期 UI 和 BUG 处理</li>
</ul>
<h3 id="项目框架的搭建">项目框架的搭建</h3>
<p>开始项目框架搭建的时候，当时准备和我们目前的项目脱离。这样项目所用到文件和框架就不会受到目前项目的影响，之后打包成 Framework 包集成到项目里面。</p>
<p>当时在想，做这个原生 SDK 是做成静态库还是动态库的时候。也是谷歌了一下，对于动态库和静态库的区别可以参考下面的文章。</p>
<p><a href="https://www.jianshu.com/p/42891fb90304">iOS里的动态库和静态库</a></p>
<p>当时单独新建了一个工程存放这个支付原生 SDK 的源代码，之后编译成 Framework 给我们目前的项目 GearBest 用。但是也面临一个问题，就是我修改了支付原生 SDK 的源码，我怎么能实时的同步呢？</p>
<p>最后我还是基于我们的工程新建了一个 Framework 类型的 Target，之后链接到我们的库。这样就可以随时链接到最新的代码了，但是也为之后暴露的问题留下了一个伏笔。</p>
<blockquote>
<p>其实后来想了想，可以做成 Developer Pods。这样就解决了上面的一个问题，当时也没想到放到 Pods，所以也没做成 Developer Pods。</p>
</blockquote>
<h3 id="收银台界面的编写">收银台界面的编写</h3>
<p>先把界面放在框架之后是因为界面已经被设计做出来了，对于这个项目前期没一点头绪，所以就先从界面开始了。因为时间很紧促，所以界面也是一个框架做出来，也没做交互那么细。</p>
<p>看着设计做出来的十几个界面，当时心里面更加的没底了，但是仔细的看一下，其实主要的界面也没多少。</p>
<p>界面主要分为下面几个:</p>
<ul>
<li>收银台主界面</li>
<li>信用卡表单输入界面</li>
<li>错误界面(网络错误/无支付方式)</li>
<li>弹框选择(币种/国家/州/信用卡过期时间)</li>
</ul>
<p>因为收银台主界面和信用卡表单界面共用下面的支付按钮，所以这两个界面做到同一个 ViewController 里面了。对于界面的设计模式可以参考我的另外的一篇文章。</p>
<p><a href="https://www.jianshu.com/p/351ac4ce5a59">模块化架构你为什么这么火，让我如此亲睐你？</a></p>
<p>虽然目前的 MVVM 框架很火，但是并不是所有的框架都会适应自己的项目。我们的框架也是基于 MVVM 做了一下变种，目前用着很顺手。</p>
<figure data-type="image" tabindex="1"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-05-030507.png" alt="image-20181105110502814" loading="lazy"></figure>
<ul>
<li>Base(存放分类/宏/常量)</li>
<li>Core(一些界面框架和核心库)</li>
<li>Component(请求元件/其他元件)</li>
<li>Manager(可以单利的管理器)</li>
<li>Controller(界面控制器)
<ul>
<li>Controller(控制器)</li>
<li>View(基于 UIView 试图)</li>
<li>Model(一些数据 Model)</li>
<li>Api(请求配置)</li>
<li>Other(基于界面的宏和其他)</li>
</ul>
</li>
<li>Module(功能模块)</li>
</ul>
<p>对于界面的搭建可以使用系统的 UITableView和 UICollectionView。不但可以分组还可以原生滑动，不动关心界面高度不够的问题。</p>
<p>既然使用 UITableView 和 UICollectionView 自然少不了我的一个库。</p>
<p><a href="https://github.com/josercc/ZHTableViewGroup">ZHTableViewGroup为 UITableView 而生</a></p>
<p>其实对于收银台界面设计到的东西也不多，就是创建不同的 UITableViewCell,之后通过我的库加载即可。其中有一个点还是需要注意的，就是更新约束的。</p>
<p>收银台界面显示很多的支付方式，每一组支付方式都要显示支付图标。因为图标是后台获取的，长度不固定。所以开始设置的约束我们并不知道，所以要更新约束。</p>
<p>开始的时候我先设置用 YYWebImage 加载图片之后回调去更新约束，之后设置约束代码。这个是一个异步的过程，看上去没问题。</p>
<p>但是图片下载之后，那么回调很快就回来了，所以就会引起崩溃。</p>
<p>之后我修改了代码的位置，先设置约束，再写用 YYWebImage获取图片更新约束，但是依然会崩溃。当时猜测只能是设置约束还没有执行[self layoutIfNeed]方法没有生效，之后走更新约束才会报错的。</p>
<p>为了解决这个崩溃，也没有多余的时间去查资料了，干脆就换一种思路。</p>
<figure data-type="image" tabindex="2"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-05-032232.png" alt="image-20181105112231920" loading="lazy"></figure>
<p>我先用 YYWebImageManager 获取是否存在图片缓存，如果存在就在约束之后直接设置宽度为图片的宽度。否则就在图片下载之后更新约束。</p>
<p>这样设置之后，冲突解决了，但是原因还是不得而知。</p>
<p>其实第一期收银台界面的东西并不多，没有过多的逻辑和交互。实现起来并不是十分的复杂，而且形成的 BUG 并不是很多。</p>
<p>其中一个点还是目前优化用到的，最后也去掉了，这里备注一下，以后方便查找。</p>
<h4 id="代码改变图片的颜色">代码改变图片的颜色</h4>
<p>对于之前，只知道加载图片都是固定的。我们在工程里面看到是什么样子，出来就是什么样子。但是之前一个页面需要用到之前一个图片，我按照名字加载出来懵逼了。</p>
<p>明明我在工程里面这一张图片是灰色的，并且没有出现重名的图片，怎么运行起来是蓝色的了？我带着疑问问了身边小伙伴，小伙伴想了一下，他说之前需要一张红色的图片。没让 UI 作图，之后修改工程为模板图片了。</p>
<p>现在突然需要修改支付方式右侧的选中按钮的颜色，UI 设计师说帮我换一套最新颜色的图片。我突然想起来了，是可以代码动态更改图片颜色的，就说让我尝试一下。</p>
<figure data-type="image" tabindex="3"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-13-031745.png" alt="image-20181113111743393" loading="lazy"></figure>
<pre><code class="language-objective-c">//        _selectButton.imageView.tintColor = GG_COLOR_RGB(184, 0, 79, 1.0);
        [_selectButton setImage:({
            UIImage *image = [UIImage gg_imageNameSupportRTL:@&quot;unSelected&quot;];
//            image = [image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
            image;
        })
</code></pre>
<ul>
<li>设置 <code>UIImageView</code> 的 <code>tintColor</code> 属性</li>
<li>获取 <code>UIImage</code>之后设置<code>UIImageRenderingMode</code>为模板类型</li>
</ul>
<h3 id="信用卡表单界面">信用卡表单界面</h3>
<p>信用卡表单界面是工作的中心，基本上最复杂的 UI 和最复杂的逻辑都在里面。基本上后期的 BUG 全部出在这个界面，最后改的都无爱了。</p>
<p>我们先目睹一下信用卡表单界面。</p>
<figure data-type="image" tabindex="4"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-13-033513.png" alt="image-20181113113508410" loading="lazy"></figure>
<figure data-type="image" tabindex="5"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-14-002056.png" alt="image-20181113113540139" loading="lazy"></figure>
<p>这个界面有最多13个输入框，最多3个选择框。</p>
<p>我们看着界面就一堆输入框，而且样式还十分相似。对于都开发四五年的，简直是分分钟搞定的事情。</p>
<p>界面是小事情，这个界面最复杂的是逻辑和交互。</p>
<p>每一个输入框都有四五条显示和错误提示，不同国家选择省份是选择还是输入也不同。</p>
<figure data-type="image" tabindex="6"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-13-034406.png" alt="image-20181113114404951" loading="lazy"></figure>
<p>选择卡种的区域，我选择采用 <code>UICollectionView</code> 方式进行布局，这样后期维护也会十分的简单。</p>
<p>但是这个 <code>UICollectionView</code> 是添加在一个 <code>UITableViewCell</code> 上面的，所以还有一些需要注意的点的。</p>
<p>既然需要布局 <code>UICollectionView</code>，自然离不开我的布局套装了<code>ZHCollectionViewDataSource</code>.</p>
<p>因为 <code>UITableViewCell</code> 的高度需要里面的 <code>UICollectionView</code> 真正的告诉来决定，不然就会造成这个区域可有单独滚动，交互十分的不好。</p>
<p>对于 <code>UITableView</code> 需要先获取 <code>UITableViewCell</code> 的高度，之后在进行 <code>UITableViewCell</code> 里面的布局的。</p>
<p>我们必须在事先算出 <code>UICollectionView</code> 的合适高度来通知外部的 <code>UITableView</code>。</p>
<figure data-type="image" tabindex="7"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-13-035122.png" alt="image-20181113115120658" loading="lazy"></figure>
<p>我们通过创建临时的 <code>UICollectionView</code> 之后利用我们的数据源管理器获取到合适大小之后赋值给 <code>UITableViewCell</code> 的 <code>sizeToFits</code> 这个方法返回合适大小。</p>
<h4 id="输入框模板">输入框模板</h4>
<p>为了让信用卡表单界面做起来更加的简单，我设置了一个 <code>UITableViewCell</code> 模板 <code>Cell</code> 和分化成界面的各个元素。</p>
<figure data-type="image" tabindex="8"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-13-055906.png" alt="image-20181113135906312" loading="lazy"></figure>
<p>分别由<strong>左侧试图</strong> <strong>右侧试图</strong> 和<strong>错误提示</strong> 组成</p>
<p>因为界面上有的试图不是输入框，有的试图没有右侧多余的。没有错误的时候还要隐藏错误试图，所以要做这样的一个模板。</p>
<p>我们从而可以从模板分化出几种其他试图出来，这种代码风格的起初的来源于 <code>YTK(猿题库)</code>请求库。最后因为不支持 <code>AFNetworking3.0</code>，被我重构里面的代码，这种代码风格保留了下来。虽然文件和类变多了，但是配置和使用起来十分的简单了。</p>
<p>界面撸起来之后，我们接下来要做的就是我们输入框输入之后的验证，这个我们只需要监听输入完毕之后的回调即可。</p>
<pre><code class="language-objective-c">        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(textFieldDidChangeNotification:)
                                                     name:UITextFieldTextDidChangeNotification
                                                   object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(textDidEndEditingNotification:)
                                                     name:UITextFieldTextDidEndEditingNotification
                                                   object:nil];
</code></pre>
<p>你一定会问我，为什么要注册监听文本改变的通知呢。因为我们使用的同一套的模板，涉及到表格重用问题。我们就在文本编辑改变的时候赋值保留下面，也方便我们进行服务器通讯时候取用。</p>
<p>当我们收到编辑框输入完毕之后，我们拿着输入的结果按照我们自定义的验证。如果验证失败，则需要在输入框的下面提示错误的文案让用户修改输入。</p>
<p>现在我们已经注册了<code>文本编辑完成</code>的通知了，接下来怎样才能一步步的把这个逻辑做出来呢。</p>
<figure data-type="image" tabindex="9"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-13-061616.png" alt="image-20181113141614703" loading="lazy"></figure>
<p>上图就是我们整个的接受，判断输入，展示的逻辑。</p>
<p>最关键的步骤就是中心的判断中心，这个判断中心应该怎么做呢？是做这个逻辑的主要工作。</p>
<p>我们新建一个类，代码如下。</p>
<pre><code class="language-objc">/**
 输入框的类型

 - GGPayCashierTextFieldTypeCardNumber: 卡号码
 - GGPayCashierTextFieldTypeExpirationDate: 过期时间
 - GGPayCashierTextFieldTypeSecurityCode: 安全吗
 - GGPayCashierTextFieldTypeCardHolder: 卡持有人
 - GGPayCashierTextFieldTypeBillingFirstName: 账单姓
 - GGPayCashierTextFieldTypeBillingLastName: 账单名
 - GGPayCashierTextFieldTypeBillingEmailAddress: 账单邮箱
 - GGPayCashierTextFieldTypeBillingAddressLine1: 账单地址1
 - GGPayCashierTextFieldTypeBillingAddressLine2: 账单地址2
 - GGPayCashierTextFieldTypeBillingCountry: 账单国家
 - GGPayCashierTextFieldTypeBillingRegion: 账单州省
 - GGPayCashierTextFieldTypeBillingCity: 账单城市
 - GGPayCashierTextFieldTypeBillingPostCode: 账单税号
 - GGPayCashierTextFieldTypeBillingPhoneNumber: 账单的手机号
 */
typedef NS_ENUM(NSUInteger, GGPayCashierTextFieldType) {
    GGPayCashierTextFieldTypeCardNumber = 0,
    GGPayCashierTextFieldTypeExpirationDate = 1,
    GGPayCashierTextFieldTypeSecurityCode = 2,
    GGPayCashierTextFieldTypeCardHolder = 3,
    GGPayCashierTextFieldTypeBillingFirstName = 4,
    GGPayCashierTextFieldTypeBillingLastName = 5,
    GGPayCashierTextFieldTypeBillingEmailAddress = 6,
    GGPayCashierTextFieldTypeBillingAddressLine1 = 7,
    GGPayCashierTextFieldTypeBillingAddressLine2 = 8,
    GGPayCashierTextFieldTypeBillingCountry = 9,
    GGPayCashierTextFieldTypeBillingRegion = 10,
    GGPayCashierTextFieldTypeBillingCity = 11,
    GGPayCashierTextFieldTypeBillingPostCode = 12,
    GGPayCashierTextFieldTypeBillingPhoneNumber = 13,
};

@interface GGListenTextFiledModel : NSObject

@property (nonatomic, copy) NSString *errorMessage;
@property (nonatomic, copy) NSString *(^verifyBlock)(NSString *inputText);
@property (nonatomic, assign) GGPayCashierTextFieldType type;
@property (nonatomic, copy) NSString *inputText;

@end
</code></pre>
<p>其中的字段我们可以显而易见的看出来代表什么意思，就不一一的解释了。</p>
<p>我们新建一个方法，让设置的验证放入到我们的数组里面，当做我们的验证中心。</p>
<pre><code class="language-objective-c">- (void)listenTextFiledEditWithType:(GGPayCashierTextFieldType)type
               verifyInputTextBlock:(NSString *(^)(NSString *inputText))verifyInputTextBlock {
    GGListenTextFiledModel *model = [[GGListenTextFiledModel alloc] init];
    model.type = type;
    model.verifyBlock = verifyInputTextBlock;
    [_listenTextFieldModels addObject:model];
}
</code></pre>
<p>我们就可以像下面一样添加验证代码了。</p>
<figure data-type="image" tabindex="10"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-13-062159.png" alt="image-20181113142157595" loading="lazy"></figure>
<p>为了说明验证的复杂，下面只写一个验证规则。</p>
<ul>
<li>
<p>卡号</p>
<ul>
<li>为空</li>
<li>只能为数字判断</li>
<li>长度为12到20之间判断</li>
<li><a href="https://zh.wikipedia.org/wiki/Luhn%E7%AE%97%E6%B3%95">mod10算法</a>判断</li>
</ul>
</li>
<li>
<p>信用卡过期日期</p>
<ul>
<li>为空</li>
<li>日期必须大于等于当前年月</li>
</ul>
</li>
<li>
<p>安全码</p>
<ul>
<li>为空</li>
<li>必须全为数字</li>
<li>AMEX 卡长度为4</li>
<li>非 AMEX 卡长度为3</li>
</ul>
</li>
<li>
<p>持卡人</p>
<ul>
<li>为空</li>
<li>不能为数字</li>
<li>不能带特殊字符</li>
</ul>
</li>
<li>
<p>First Name</p>
<ul>
<li>为空</li>
<li>只能大小字母</li>
<li>长度2~32位</li>
</ul>
</li>
<li>
<p>Last Name</p>
<ul>
<li>为空</li>
<li>只能大小字母</li>
<li>长度2~32位</li>
</ul>
</li>
<li>
<p>邮箱</p>
<ul>
<li>为空</li>
<li>邮箱正则</li>
</ul>
</li>
<li>
<p>地址1</p>
<ul>
<li>为空</li>
<li>不能全为数字</li>
<li>不能包含&quot;&quot;</li>
<li>长度5~35位</li>
</ul>
</li>
<li>
<p>地址2</p>
<ul>
<li>长度不为0最大不能超过100</li>
</ul>
</li>
<li>
<p>州省</p>
<ul>
<li>为空</li>
<li>可以选择必须选择</li>
<li>不能选择必须输入</li>
</ul>
</li>
<li>
<p>城市</p>
<ul>
<li>长度 1~30位</li>
</ul>
</li>
<li>
<p>邮编</p>
<ul>
<li>
<p>为空</p>
</li>
<li>
<p>如果美国</p>
<ul>
<li>长度5~10</li>
<li>只能数字 - 空格组成</li>
</ul>
</li>
<li>
<p>如果加拿大</p>
<ul>
<li>长度6~9</li>
<li>只能数组 - 空格 字母组成</li>
</ul>
</li>
<li>
<p>其他国家</p>
<ul>
<li>长度2~10</li>
</ul>
</li>
</ul>
</li>
<li>
<p>手机号</p>
<ul>
<li>为空</li>
<li>长度6~20</li>
<li>必须() + - 数字组成</li>
</ul>
</li>
</ul>
<p>顺便提一下验证正则需要用到<a href="https://www.jianshu.com/p/2b599fc55011">NSRegularExpression</a>这个类。</p>
<h4 id="信用卡加密部分">信用卡加密部分</h4>
<p>对于信用卡的加密我们都采用的是原生的 SDK 的加密和 RSA 加密算法。</p>
<p>本来主要涉及到三种SDK 加密和一种服务器加密，因为第一期暂时没做那么多的支付方式，所以第一期就暂时做了设计的 <code>WordPay 加密</code> <code>设备指纹风控</code> <code>RSA 加密</code>。</p>
<h5 id="wordpay-加密">WordPay 加密</h5>
<p>这个加密十分的简单，只要集成 WordPay 加密的 SDK，执行加密即可。</p>
<pre><code class="language-ruby">pod 'WorldpayCSE'
</code></pre>
<pre><code class="language-objc">- (NSString *)wordPayEncryption:(NSString *)cardNumber
               cardHolder:(NSString *)cardHolder
                     year:(NSString *)year
                    month:(NSString *)month
                      CVC:(NSString *)CVC {
    NSError *error = nil;
    WorldpayCSE *wpCSE = [WorldpayCSE new];
    [wpCSE setPublicKey:kGGWordPayPublicKey
                  error:&amp;error];
    
    if (error != nil) {
        return nil;
    }
    WPCardData *cardData = [WPCardData new];
    cardData.cardNumber = cardNumber;
    cardData.cvc = CVC;
    cardData.expiryMonth = month;
    cardData.expiryYear = year;
    cardData.cardHolderName = cardHolder;
    // encrypt card data and validate
    NSString *encryptedData = [wpCSE encrypt:cardData error:&amp;error];
    if (error) {
        if (error.code == WPErrorInvalidCardData) {
            NSArray *cardValidationErrors = error.userInfo[kWPErrorDetailsKey];
            NSLog(@&quot;%@&quot;,cardValidationErrors);
        }
    }
    return encryptedData;
}
</code></pre>
<h4 id="rsa-加密">RSA 加密</h4>
<p>本来这个加密也是十分简单，我们找到对应的库。服务器把生成的公钥 <code>PEM</code> 文件给我们客户端，我们去加密，之后服务器解密即可。</p>
<p>但是这个支付因为是网站做的，他们采用了十六进制加密公钥，之后采用他们那边的一个 <code>JS</code> 方法进行加密传递。</p>
<p>公钥文件丢失，我们只能获取到 <code>JS</code> 那边16进制加密之后残缺的字符串。本地无法加密，直接加密为空。</p>
<p>这个导致郁闷了很久，不可能那么多库都是一样的结果呀。最后试了网上的公钥和私钥都是可以的，这说明是给我们的公钥的问题。</p>
<p>最后一问才知道，他们是进行十六进制加密之后截取的字符串，我说这个公钥怎么全部小写字段加数字，很奇怪呢。</p>
<p>这个字符串给我们是没办法加密了，而且时间很紧促，所以做了一个曲线救国的方针。那就是利用新建一个 <code>UIWebView</code>放在屏幕看不见的位置，利用网站的 <code>JS</code> 进行本地加密。</p>
<p>虽然实现很恶心，但是也是成功了。</p>
<pre><code class="language-objc">- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSDictionary *dic = @{
                          @&quot;cardNo&quot; : self.parameter.cardNumber,
                          @&quot;month&quot; : self.parameter.month,
                          @&quot;year&quot; : [self.parameter.year substringFromIndex:2],
                          @&quot;cvv&quot; : self.parameter.CVC,
                          };
    NSString *jsonText = [dic yy_modelToJSONString];
    NSString *jsStr = [NSString stringWithFormat:@&quot;enCode('%@')&quot;,jsonText];
    NSString *result = [_webView stringByEvaluatingJavaScriptFromString:jsStr];
    self.parameter.request.creditCardRsaStr = result;
    self.parameter.request.rsaLength = result.length;
    _webView.delegate = nil;
    [_webView removeFromSuperview];
    [self completionSuccess];
}
</code></pre>
<p>说道这里，有必要说一下 <code>Bundle</code> 的加载了。</p>
<h4 id="bundle-的加载">Bundle 的加载</h4>
<p>因为我测试的 <code>Framework</code> 是作为一个 <code>Target</code> 来开发和调试的，所以获取的路径是在 <code>Cocoapods</code> 里面获取不到的，这个也是放在 <code>Cocoapods</code> 之后发现的一个问题。</p>
<pre><code>+ (NSBundle *)gg_paySDKBundle {
    NSBundle *bundle = [NSBundle bundleForClass:[GGPayCashierViewController class]];
    /* 获取 POD bundle */
    NSURL *paySDKBundleURL = [bundle URLForResource:@&quot;GGPaySDK&quot; withExtension:@&quot;bundle&quot;];
    if (!paySDKBundleURL) {
        /* 获取不到获取 Framework */
        paySDKBundleURL = [bundle URLForResource:@&quot;Frameworks/GGPaySDK.framework/GGPaySDK&quot; withExtension:@&quot;bundle&quot;];
    }
    NSBundle *paySDKBundle = [NSBundle bundleWithURL:paySDKBundleURL];
    return paySDKBundle;
}
</code></pre>
<ul>
<li>
<p>如果属于工程里面的 <code>Target</code> 的话</p>
<p>路径在 <code>./Frameworks/xxxx.framework/xxxx.bundle</code></p>
</li>
<li>
<p>如果是 <code>Cocoapods</code> 的话</p>
<p>直接在根目录 <code>./xxxx.bundle</code></p>
</li>
</ul>
<h4 id="trustdefender设备指纹">TrustDefender设备指纹</h4>
<p>需要获取到<code>TrustDefender.framework</code>对应的 <code>SDK</code>。</p>
<pre><code class="language-objc">-(void)doProfile:(void (^)(NSString *))callbackBlock {
    THMProfileHandle* profileHandle = [_profile doProfileRequestWithOptions:@{THMSessionID:[NSString stringWithFormat:@&quot;%@%@&quot;,_merchantId,_sessionId]} andCallbackBlock:^(NSDictionary *dic) {
        NSLog(@&quot;callbackBlock:%@&quot;,dic);
    } ];
    if (profileHandle &amp;&amp; callbackBlock) {
        callbackBlock(profileHandle.sessionID);
    }
}
</code></pre>
<p>这么简单的代码，竟然试了一两天。每次都获取不到设备指纹，当时突发奇想，是不是我没有用真机，导致的。</p>
<p>用真机，果然可以收到支付的设备指纹了。</p>
<h3 id="四舍五入多币种精度计算">四舍五入多币种精度计算</h3>
<p>对于支持外币支付的应用，重要的也包含四舍五入的多币种换算。对于 <code>CLP</code> 币种，甚至还要支持五舍六入的支付方式。</p>
<p>简单的说一下多币种计算的工具逻辑。</p>
<figure data-type="image" tabindex="11"><img src="http://ipicimage-1251019290.coscd.myqcloud.com/2018-11-13-73541.png" alt="image-20181113153539357" loading="lazy"></figure>
<p>说道多币种，有必要说一下后台如果金额是 <code>Float</code> 或者是 <code>Double</code> 精度丢失问题。</p>
<h4 id="ios-json-解析精度丢失">iOS JSON 解析精度丢失</h4>
<p>我们都知道后台和 <code>App</code> 的交互，对于金额相关最好的使用字符串进行交互。但是总有一些刁民想害朕，用 <code>Float</code> 和 <code>Double</code> 类型传递过来。</p>
<p>导致 <code>iOS</code> 在底层进行 <code>JSON</code> 解析的时候造成精度丢失，比如<code>0.01</code>可能解析为<code>0.000001</code>的字符串。</p>
<p>这种最好还是后台换成字符串，<code>App</code> 什么都不需要改动这个 <code>BUG</code> 就迎刃而解。</p>
<p>但是考虑到实际情况，对于后台换成字符串，如果 <code>Android</code> 用的不是字符串类型的，就会出问题。也不可能让后台根据<code>App</code>让后台返回不同的数据类型（除非线上遇到了 BUG）。</p>
<p>其实我们也可以自己处理，但是有一些麻烦。</p>
<pre><code class="language-objc">- (NSString *(^)(NSUInteger position))gg_fomatterPrice {
    return ^NSString *(NSUInteger position) {
        NSDecimalNumberHandler *handler = [NSDecimalNumberHandler decimalNumberHandlerWithRoundingMode:NSRoundPlain
                                                                                                 scale:position
                                                                                      raiseOnExactness:NO
                                                                                       raiseOnOverflow:NO
                                                                                      raiseOnUnderflow:NO
                                                                                   raiseOnDivideByZero:NO];
        NSDecimalNumber *floatDecimal = [[NSDecimalNumber alloc] initWithDouble:[self doubleValue]];
        NSDecimalNumber *resultNumber = [floatDecimal decimalNumberByRoundingAccordingToBehavior:handler];
        return [NSString stringWithFormat:@&quot;%@&quot;,resultNumber];
    };
};
</code></pre>
<p>我们用字符串接受，之后重写对应金额属性，用上面方法转换即可。</p>
<h3 id="统计">统计</h3>
<p>统计其实调用后台接口，但是传递的字段有一些技术难点。</p>
<h4 id="获取fps">获取FPS</h4>
<p>获取最高 <code>FPS</code>，最低 <code>FPS</code> 和平均的 <code>FPS</code></p>
<p>我们可以使用系统的一个类<a href="https://www.jianshu.com/p/c35a81c3b9eb">CADisplayLink</a>去获取。</p>
<ul>
<li>添加 FPS 监听</li>
</ul>
<pre><code class="language-objc">    _displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(displayLinkAction:)];
    [_displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes];
</code></pre>
<ul>
<li>获取到 当前的 FPS 值</li>
</ul>
<pre><code class="language-objc">- (void)displayLinkAction:(CADisplayLink *)link {
    static NSTimeInterval lastTime = 0;
    static int frameCount = 0;
    if (lastTime == 0) {
        lastTime = link.timestamp;
        return;
    }
    frameCount ++;
    NSTimeInterval passTime = link.timestamp - lastTime;
    if (passTime &gt; 1) {
        int fps = frameCount / passTime;
        lastTime = link.timestamp;
        frameCount = 0;
        if (!_currentWebInfoTimeRequest.highestFps) {
            _currentWebInfoTimeRequest.highestFps = [@(fps) stringValue];
            _currentWebInfoTimeRequest.fpsStartTime = [@([[NSDate date] timeIntervalSince1970]) stringValue];
        }
        if (!_currentWebInfoTimeRequest.lowestFps) {
            _currentWebInfoTimeRequest.lowestFps = [@(fps) stringValue];
        }
        if (fps &gt; [_currentWebInfoTimeRequest.highestFps integerValue]) {
            _currentWebInfoTimeRequest.highestFps = [@(fps) stringValue];
        }
        if (fps &lt; [_currentWebInfoTimeRequest.lowestFps integerValue]) {
            _currentWebInfoTimeRequest.lowestFps = [@(fps) stringValue];
        }
        [_fpsList addObject:@(fps)];
//        NSLog(@&quot;👉🏻fps:%@&quot;,@(fps));
    }
}
</code></pre>
<h4 id="收银台中断时间比如电话-挂起">收银台中断时间(比如电话 挂起)</h4>
<p>利用<code>applicationDidBecomeActive</code>方法和<code>applicationWillResignActive</code>方法来统计支付挂起的时间。</p>
<blockquote>
<p>不清楚这两个方法是否概括了全部的挂起的时间。</p>
</blockquote>
<h4 id="崩溃信息">崩溃信息</h4>
<p>这个我记得第三方 <code>Fabric</code>拦截的崩溃，其他是获取不到的。刚开始的时候，我还在说我们拿不到崩溃信息，这个点做不到。</p>
<p>并且我们拦截了，其他第三方就获取不到了，这个功能是冲突的。后来我错了，孤陋寡闻，原来崩溃还可以转发。</p>
<pre><code class="language-objc">void GGHandleException(NSException *exception) {
    if ([GGUncaughtExceptionHandler shareUncaughtExceptionHandler].exceptionHandeler) {
        [GGUncaughtExceptionHandler shareUncaughtExceptionHandler].exceptionHandeler(exception);
    }
    gg_previousHandler(exception);
}

+ (void)installUncaughtExceptionHandler {
    gg_previousHandler = NSGetUncaughtExceptionHandler();
    NSSetUncaughtExceptionHandler(&amp;GGHandleException);
}
</code></pre>
<ul>
<li>获取上一个崩溃监听者</li>
<li>注册崩溃监听</li>
<li>发送崩溃到上一个崩溃监听者</li>
</ul>
<p>关于如果判断是我原生支付的 BUG，暂时没有想到好办法，只是判断是否存在 <code>GG</code> 前缀。</p>
<h3 id="rtl-语言翻转">RTL 语言翻转</h3>
<p>针对于支持多语言的应用，自然需要支持阿拉伯国家界面翻转的支持。我们之前应用是没做阿拉伯界面翻转支持的，所以对于这一块不是特别的了解。</p>
<p>我们的支付原生 SDK 是针对于公司服装部门用的，他们支持了阿拉伯界面的翻转。所以我这个 SDK也需要支持了。</p>
<p><a href="https://www.jianshu.com/p/3383ca5f6de0">RTL适配历程</a></p>
<p>我发一下我目前怎么开启界面翻转的。</p>
<pre><code class="language-objc">- (void)rtlWithLanguageCode:(NSString *)languageCode {
    NSArray *supports = @[
                          @&quot;ar&quot;,
                          ];
    if ([supports containsObject:languageCode]) {
        [[UIView appearance] setSemanticContentAttribute:UISemanticContentAttributeForceRightToLeft];
        [[UITextField appearance] setSemanticContentAttribute:UISemanticContentAttributeForceRightToLeft];
        [UITextField appearance].textAlignment = NSTextAlignmentRight;
        [[UILabel appearance] setSemanticContentAttribute:UISemanticContentAttributeForceRightToLeft];
        [[UIButton appearance] setSemanticContentAttribute:UISemanticContentAttributeForceRightToLeft];
    } else {
        [[UIView appearance] setSemanticContentAttribute:UISemanticContentAttributeForceLeftToRight];
        [[UILabel appearance] setSemanticContentAttribute:UISemanticContentAttributeForceLeftToRight];
        [[UITextField appearance] setSemanticContentAttribute:UISemanticContentAttributeForceLeftToRight];
        [UITextField appearance].textAlignment = NSTextAlignmentLeft;
        [[UIButton appearance] setSemanticContentAttribute:UISemanticContentAttributeForceLeftToRight];
    }
}

</code></pre>
<p>可以根据语言自动设置界面翻转或者是不翻转。</p>
<pre><code class="language-objc">@property (nonatomic) UISemanticContentAttribute semanticContentAttribute NS_AVAILABLE_IOS(9_0);
</code></pre>
<p>作为一个<code>UIView</code> 的一个属性，我们可以设置翻转或者不翻转。</p>
<p>需要注意一点的是对于使用 <code>Masonry</code> 一定要规范，用 <code>leading</code> 代替 <code>left</code>,用<code>trailing</code> 代替 <code>right</code>。</p>
<h4 id="图片的翻转">图片的翻转</h4>
<p>这个也就是 <code>UIImage</code> 的问题，我们可以统一封装一下使用即可。</p>
<pre><code class="language-objc">    if ([UIView appearance].semanticContentAttribute == UISemanticContentAttributeForceRightToLeft &amp;&amp; isSupportRTL) {
        image = [image imageFlippedForRightToLeftLayoutDirection];
    }
</code></pre>
<h4 id="对于币种金额强行不翻转">对于币种金额强行不翻转</h4>
<p>这个当时很苦恼，毕竟这个是系统自动翻转的。后台 Android 同事提供了思路，可以使用代码<code>\u200e</code>强行不翻转。</p>
<pre><code class="language-objc">NSString *payNowText = ({
        payNowText = @&quot;&quot;;
        if ([UIView appearance].semanticContentAttribute == UISemanticContentAttributeForceRightToLeft) {
            payNowText = [NSString stringWithFormat:@&quot;%@ (\u200e%@)&quot;,GGLocalizedString(@&quot;soa_paynow&quot;, @&quot;PAY NOW&quot;),[self subTotalPriceManager].displayPrice];
        } else {
            payNowText = [NSString stringWithFormat:@&quot;%@ (%@)&quot;,GGLocalizedString(@&quot;soa_paynow&quot;, @&quot;PAY NOW&quot;),[self subTotalPriceManager].displayPrice];
        }
        payNowText;
    });
</code></pre>
<h3 id="bitcode-的支持">BitCode 的支持</h3>
<p>对于新建的静态库是默认支持 <code>Bitcode</code> 的，但是打包出来。使用人说会提示文件类不存在，谷歌一下原来是 <code>Bitcode</code> 的不支持。</p>
<p>当时是毫无头绪，我也是开启的。最后我觉得可能是因为，我是合并的 <code>Build</code> 的模拟器和真机的包导致的问题。</p>
<p>最后模拟器用 <code>Build</code>，真机用 <code>Archive</code> 打包之后合并，真的再也没有提示 <code>Bitcode</code> 不支持的问题了。</p>
<p>还有就是静态库是编译之后的产物，所以不存在 DEBUG 和 Release 只说。所以我们不要写一些宏的判断，是不起任何效果的。</p>
<p>我们只需要直接进行 <code>Release</code> 进行编译库即可。</p>
<p>为了提高生产率，加上喜欢写脚本。就新建一个 <code>Target</code> 专门用来编译成发布的<code>framework</code>。</p>
<pre><code class="language-shell">#!/bin/bash
BUILD_ROOT_LENGHT=${#BUILD_ROOT} #获取 build 目录长度
SUB_LENGHT=`expr $BUILD_ROOT_LENGHT - 8` #获取需要截取的长度
SDK_ROOT=${BUILD_ROOT:0:SUB_LENGHT} #获取 SDK 合并主目录
echo $SDK_ROOT
xcworkSpanceName=&quot;GearBest&quot; #xcworkspance 名字
sdkName=&quot;GGPaySDK&quot; #SDK名称
schemename=&quot;GGPaySDK&quot; #scheme 名字
#模拟器编译
xcodebuild -workspace $xcworkSpanceName.xcworkspace -scheme $schemename build -sdk iphonesimulator
echo &quot;👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻模拟器编译成功👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻&quot;

#真机编译
xcodebuild -workspace $xcworkSpanceName.xcworkspace -scheme $schemename archive -sdk iphoneos
echo &quot;👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻真机编译成功👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻&quot;


SDK_NAME=&quot;GGPaySDK&quot;
IPHONE_SIMULATOR_SDK_PATH=$SDK_ROOT&quot;Products/Release-iphonesimulator/${SDK_NAME}.framework/${SDK_NAME}&quot;
IPHONE_OS_SDK_PATH=$SDK_ROOT&quot;Intermediates.noindex/ArchiveIntermediates/GGPaySDK/IntermediateBuildFilesPath/UninstalledProducts/iphoneos/${SDK_NAME}.framework/${SDK_NAME}&quot;
lipo -create $IPHONE_SIMULATOR_SDK_PATH $IPHONE_OS_SDK_PATH -output $IPHONE_OS_SDK_PATH
echo &quot;👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻合并库成功👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻👉🏻&quot;

open $SDK_ROOT&quot;Intermediates.noindex/ArchiveIntermediates/GGPaySDK/IntermediateBuildFilesPath/UninstalledProducts/iphoneos&quot;

</code></pre>
<p>切换 <code>Target</code> 之后执行编译，等待打开 <code>Finder</code> 之后就可以获取发布的包。</p>
<h2 id="结束语">结束语</h2>
<p>这一篇算是结束了，写一篇这样超长的很累！</p>
<p>接下来因为准备接入 <code>Apple Pay</code>，准备下一下关于目前接入 <code>Apple Pay</code> 的文章</p>

                </div>
                <div class="clear"></div>
              </section>
            </article>
            <div class="clear"></div>

            <section class="related section">
              
              

                <div class="clear"></div>
            </section>

              <div class="clear"></div>

              <div id="comments" class="bg-white hosted ">

              
                
                
                  <link rel="stylesheet" href="https://unpkg.com/disqusjs@1.1/dist/disqusjs.css">
<script src="https://unpkg.com/disqusjs@1.1/dist/disqus.js"></script>

<div id="disqus_thread"></div>

<script>

var options = {
  shortname: 'josercc',
  apikey: 'DBJHHPsqZBT5EUYFyQmorAozkwxTDoySOnd4bmdt9G29YFySUFhFE6SLZrSCHee4',
}
if ('') {
  options.api = ''
}
var dsqjs = new DisqusJS(options)

</script>

                
              
                <div class="clear"></div>
              </div>

              <div class="clear"></div>
            </div>
          </div>
      </main>

          <footer id="footer" class="grid-container">
        <div class="widgets row gradient-effect">
            <div class="default-sidebar border-effect">
              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_epcl_posts_thumbs underline-effect">
                  <h4 class="widget-title title white bordered">最新文章</h4>
                  
                  
                  <article class="item post-0 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://joserccblog.github.io/post/apple-login-jie-ru-qian-yi-ci-shen-ru-yan-jiu" class="thumb hover-effect">
                      <span class="fullimage cover" style="display: block;background-image: url('http://ipicimage-1251019290.coscd.myqcloud.com/2019-09-18-064137.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2019-09-18">2019-09-18</time>
                      <h4 class="title usmall">
                        <a href="https://joserccblog.github.io/post/apple-login-jie-ru-qian-yi-ci-shen-ru-yan-jiu">Apple Login接入前一次深入研究</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-1 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://joserccblog.github.io/post/ji-yu-xcode11-bian-yi-de-command-line-chu-lai-de-er-jin-zhi-framework-zai-di-ban-ben-bian-yi-bao-cuo-___isplatformversionatleast" class="thumb hover-effect">
                      <span class="fullimage cover" style="display: block;background-image: url('http://ipicimage-1251019290.coscd.myqcloud.com/2019-09-16-070825.png');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2019-09-16">2019-09-16</time>
                      <h4 class="title usmall">
                        <a href="https://joserccblog.github.io/post/ji-yu-xcode11-bian-yi-de-command-line-chu-lai-de-er-jin-zhi-framework-zai-di-ban-ben-bian-yi-bao-cuo-___isplatformversionatleast">基于 Xcode11编译的 Command Line 出来的 二进制 Framework 在低版本编译报错___isPlatformVersionAtLeast</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-2 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://joserccblog.github.io/post/guan-yu-objective-c-ban-ben-de-swiftui-ku-de-zi-dong-sheng-cheng-bu-ju-de-yan-jiu-xin-de" class="thumb hover-effect">
                      <span class="fullimage cover" style="display: block;background-image: url('data:image/jpeg;base64,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');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2019-08-29">2019-08-29</time>
                      <h4 class="title usmall">
                        <a href="https://joserccblog.github.io/post/guan-yu-objective-c-ban-ben-de-swiftui-ku-de-zi-dong-sheng-cheng-bu-ju-de-yan-jiu-xin-de">关于Objective-C版本的SwiftUI库的自动生成布局的研究心得</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_tag_cloud underline-effect">
                  <h4 class="widget-title title white bordered">标签云</h4>
                  <div class="tagcloud">
                    
                      <a href="https://joserccblog.github.io/tag/swift" class="ctag ctag-0 ctag-swift" aria-label="">Swift</a>
                    
                      <a href="https://joserccblog.github.io/tag/ios" class="ctag ctag-1 ctag-ios" aria-label="">iOS</a>
                    
                      <a href="https://joserccblog.github.io/tag/framework" class="ctag ctag-2 ctag-framework" aria-label="">Framework</a>
                    
                      <a href="https://joserccblog.github.io/tag/carthage" class="ctag ctag-3 ctag-carthage" aria-label="">Carthage</a>
                    
                      <a href="https://joserccblog.github.io/tag/cocoapods" class="ctag ctag-4 ctag-cocoapods" aria-label="">Cocoapods</a>
                    
                      <a href="https://joserccblog.github.io/tag/masonry" class="ctag ctag-5 ctag-masonry" aria-label="">Masonry</a>
                    
                      <a href="https://joserccblog.github.io/tag/yue-shu-chong-tu" class="ctag ctag-6 ctag-yue-shu-chong-tu" aria-label="">约束冲突</a>
                    
                      <a href="https://joserccblog.github.io/tag/uistackview" class="ctag ctag-7 ctag-uistackview" aria-label="">UIStackView</a>
                    
                      <a href="https://joserccblog.github.io/tag/ios11" class="ctag ctag-8 ctag-ios11" aria-label="">iOS11</a>
                    
                      <a href="https://joserccblog.github.io/tag/sheng-huo" class="ctag ctag-9 ctag-sheng-huo" aria-label="">生活</a>
                    
                      <a href="https://joserccblog.github.io/tag/zhi-shi-dian" class="ctag ctag-10 ctag-zhi-shi-dian" aria-label="">知识点</a>
                    
                      <a href="https://joserccblog.github.io/tag/testflight" class="ctag ctag-11 ctag-testflight" aria-label="">TestFlight</a>
                    
                      <a href="https://joserccblog.github.io/tag/guo-ji-hua" class="ctag ctag-12 ctag-guo-ji-hua" aria-label="">国际化</a>
                    
                      <a href="https://joserccblog.github.io/tag/xcode9" class="ctag ctag-13 ctag-xcode9" aria-label="">Xcode9</a>
                    
                      <a href="https://joserccblog.github.io/tag/zi-dong-hua" class="ctag ctag-14 ctag-zi-dong-hua" aria-label="">自动化</a>
                    
                      <a href="https://joserccblog.github.io/tag/hei-mo-fa" class="ctag ctag-15 ctag-hei-mo-fa" aria-label="">黑魔法</a>
                    
                      <a href="https://joserccblog.github.io/tag/ota" class="ctag ctag-16 ctag-ota" aria-label="">OTA</a>
                    
                      <a href="https://joserccblog.github.io/tag/xctest" class="ctag ctag-17 ctag-xctest" aria-label="">XCTest</a>
                    
                      <a href="https://joserccblog.github.io/tag/appstore" class="ctag ctag-18 ctag-appstore" aria-label="">AppStore</a>
                    
                      <a href="https://joserccblog.github.io/tag/mac" class="ctag ctag-19 ctag-mac" aria-label="">Mac</a>
                    
                      <a href="https://joserccblog.github.io/tag/gan-xiang" class="ctag ctag-20 ctag-gan-xiang" aria-label="">感想</a>
                    
                      <a href="https://joserccblog.github.io/tag/xcode" class="ctag ctag-21 ctag-xcode" aria-label="">Xcode</a>
                    
                      <a href="https://joserccblog.github.io/tag/svn" class="ctag ctag-22 ctag-svn" aria-label="">SVN</a>
                    
                      <a href="https://joserccblog.github.io/tag/xiang-fa" class="ctag ctag-23 ctag-xiang-fa" aria-label="">想法</a>
                    
                      <a href="https://joserccblog.github.io/tag/di-san-fang-ku" class="ctag ctag-24 ctag-di-san-fang-ku" aria-label="">第三方库</a>
                    
                      <a href="https://joserccblog.github.io/tag/mo-kuai-hua" class="ctag ctag-25 ctag-mo-kuai-hua" aria-label="">模块化</a>
                    
                      <a href="https://joserccblog.github.io/tag/c" class="ctag ctag-26 ctag-c" aria-label="">C</a>
                    
                      <a href="https://joserccblog.github.io/tag/autolayout" class="ctag ctag-27 ctag-autolayout" aria-label="">AutoLayout</a>
                    
                      <a href="https://joserccblog.github.io/tag/xib" class="ctag ctag-28 ctag-xib" aria-label="">Xib</a>
                    
                      <a href="https://joserccblog.github.io/tag/clang-format" class="ctag ctag-29 ctag-clang-format" aria-label="">Clang Format</a>
                    
                      <a href="https://joserccblog.github.io/tag/objetive-c" class="ctag ctag-30 ctag-objetive-c" aria-label="">Objetive-C</a>
                    
                      <a href="https://joserccblog.github.io/tag/zhou-bao" class="ctag ctag-31 ctag-zhou-bao" aria-label="">周报</a>
                    
                      <a href="https://joserccblog.github.io/tag/jekyll" class="ctag ctag-32 ctag-jekyll" aria-label="">Jekyll</a>
                    
                      <a href="https://joserccblog.github.io/tag/server" class="ctag ctag-33 ctag-server" aria-label="">Server</a>
                    
                      <a href="https://joserccblog.github.io/tag/uibarbuttonitem" class="ctag ctag-34 ctag-uibarbuttonitem" aria-label="">UIBarButtonItem</a>
                    
                      <a href="https://joserccblog.github.io/tag/uitextfiled" class="ctag ctag-35 ctag-uitextfiled" aria-label="">UITextFiled</a>
                    
                  </div>
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="epcl_about-2" class="widget widget_epcl_about underline-effect">
                  <h4 class="widget-title title white bordered">关于我</h4>
                  <div class="avatar">
                    <a href="" class="translate-effect thumb"><span class="fullimage cover" style="background-image: url(https://joserccblog.github.io/images/avatar.png);"></span></a>
                  </div>
                  <div class="info">
                    <h4 class="title small author-name gradient-effect no-margin"><a href="">君赏博客</a></h4>
                    <p class="founder">2012年从事iOS开发，资深iOS开发菜鸟，目前在环球易购占坑。喜欢研究偏门技术，喜欢自动化编程，喜欢研究小软件提高编程效率</p>
                    <div class="social">
                      
                          
                            <a href="https://github.com/josercc" class="translate-effect" target="_blank"><i class="fa fa-github"></i></a>
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </div> 
                  </div>
                  <div class="clear"></div>
                  </section>
              </div>

            </div>
            <div class="clear"></div>
        </div>

        <div class="logo">
          <a href="https://joserccblog.github.io"><img class="" src="https://joserccblog.github.io/media/images/logo.png" alt=""></a>
        </div>
        <p class="published border-effect">
          ©2019 共 94 篇文章
          <br/>
          Theme <a href="https://gridea.dev/" target="_blank">「breek」</a> Powered by <a href="https://gridea.dev/" target="_blank">「Gridea」</a>
        </p>
        
        <a href="javascript:void(0)" id="back-to-top" class="epcl-button dark" style="display:none">
          <i class="fa fa-arrow"></i>
        </a>
    </footer>
    <div class="clear"></div>

      <script type="text/javascript">
       jQuery(document).ready(function($){
          $("photos img").each(function(){
              var _a = $("<a></a>").attr("href",this.src);
              $(this).wrap("<div class='photo'></div>").wrap(_a);
          })
          $("figure img").each(function(){
              var _b = $("<a></a>").attr("href",this.src);
              $(this).wrap(_b);
          })
          isImgLoad(function(){
            var photos = document.querySelector('photos');
            if(photos){
              waterfall(photos);
            }
            $(window).resize(function() {
             if(photos){
                  waterfall(photos);
            }
          });
        });
        var t_img;
        var isLoad = true;
        function isImgLoad(callback){
          $('photos img').each(function(){
            if(this.height === 0){
              isLoad = false;
              return false;
            }
          });
          if(isLoad){
            clearTimeout(t_img);
            callback();
          }else{
            isLoad = true;
            t_img = setTimeout(function(){
              isImgLoad(callback);
            },500);
          }
        }
      });
      </script>

    </div>
    <!-- end: #wrapper -->
  </body>
</html>
